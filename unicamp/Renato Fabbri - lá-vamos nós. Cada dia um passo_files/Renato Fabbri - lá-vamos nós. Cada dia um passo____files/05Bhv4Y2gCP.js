/*!CK:2676571088!*//*1436899409,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["hEALj"]); }

__d("MessagesViewerSetID",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={MESSAGES:"messages",MESSAGES_VIEW_ALL_IN_THREAD:"messages:view_all_in_thread"};},null);
__d("StickerAssetType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={IMAGE:"BestEffortImage",SPRITE:"SpriteImage",PADDED_SPRITE:"PaddedSpriteImage"};},null);
__d("StoryAttachmentStyle",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={FALLBACK:"fallback",SHARE:"share",OG_COMPOSER_SIMPLE:"og_composer_simple",SPORTS_MATCHUP:"sports_matchup",SHARE_LARGE_IMAGE:"share_large_image",PHOTO:"photo",COVER_PHOTO:"cover_photo",ALBUM:"album",NEW_ALBUM:"new_album",COUPON:"coupon",QUESTION:"question",ANSWER:"answer",OPTION:"option",GALLERY:"gallery",STREAM_PUBLISH:"stream_publish",MUSIC_AGGREGATION:"music_aggregation",ITEM_LIST:"list",HIGH_SCORE:"high_score",SCORE_LEADERBOARD:"score_leaderboard",FRIEND_LIST:"friend_list",CHECKIN:"checkin",POPULAR_OBJECTS:"popular_objects",AVATAR_LIST:"avatar_list",AVATAR:"avatar",AVATAR_WITH_VIDEO:"avatar_with_video",EVENT:"event",MINUTIAE_EVENT:"minutiae_event",EXPERIENCE:"experience",LIFE_EVENT:"life_event",TRAVEL_SLIDESHOW_LIFE_EVENT:"travel_slideshow_life_event",GIFT:"gift",IMAGE_SHARE:"image_share",ANIMATED_IMAGE_SHARE:"animated_image_share",ANIMATED_IMAGE_AUTOPLAY:"animated_image_autoplay",NOTE:"note",TOPIC:"topic",FILE_UPLOAD:"file_upload",NOTIFICATION_TARGET:"notification_target",UNAVAILABLE:"unavailable",PAGE_RECOMMENDATION:"page_recommendation",PAGE_VIDEO_PLAYLIST:"page_video_playlist",VIDEO:"video",VIDEO_INLINE:"video_inline",VIDEO_AUTOPLAY:"video_autoplay",VIDEO_SHARE:"video_share",VIDEO_SHARE_HIGHLIGHTED:"video_share_highlighted",VIDEO_SHARE_YOUTUBE:"video_share_youtube",MAP:"map",OG_MAP:"og_map",PRODUCT:"product",EXTERNAL_PRODUCT:"external_product",FITNESS_COURSE:"fitness_course",APPLICATION:"application",STICKER:"sticker",EXTERNAL_OG_PRODUCT:"external_og_product",TRAVEL_LOG:"travel_log",MULTI_SHARE:"multi_share",MULTI_SHARE_NO_END_CARD:"multi_share_no_end_card",YEAR_IN_REVIEW:"year_in_review",AVATAR_LARGE_COVER:"avatar_large_cover",BROADCAST_REQUEST:"broadcast_request",COMMERCE_PRODUCT_ITEM:"commerce_product_item",COMMERCE_STORE:"commerce_store",THIRD_PARTY_PHOTO:"third_party_photo",PROMPT:"prompt",BIRTHDAY:"birthday",DONATIONS_CAMPAIGN:"donations_campaign",DONATE_PROMPT:"donate_prompt",DISCUSSION_CONVERSATION:"discussion_conversation",DISCUSSION_COMMENT:"discussion_comment",GROUP_SELL_PRODUCT_ITEM:"group_sell_product_item",GROUP_SELL_PRODUCT_ITEM_MARK_AS_SOLD:"group_sell_mark_as_sold",GAMETIME:"gametime",GROUP_REPORTED_POST_QUEUE:"group_reported_post_queue",GROUP_PENDING_POST_QUEUE:"group_pending_post_queue",GROUP_JOIN_REQUEST_QUEUE:"group_join_request_queue",GREETING_CARD:"greeting_card",LEAD_GEN:"lead_gen",ATTACHED_STORY:"attached_story",SOUVENIR:"souvenir",SLIDESHOW:"slideshow",ORION:"orion",ORION_REQUEST:"orion_request",INSTANT_ARTICLE:"instant_article",JOIN_TOPIC_CONVERSATION:"join_topic_conversation",MOMENTS_APP_INVITATION:"moments_app_invitation",RETAIL_CANCELLATION:"retail_cancellation",RETAIL_ITEM:"retail_item",RETAIL_NOW_IN_STOCK:"retail_now_in_stock",RETAIL_RECEIPT:"retail_receipt",RETAIL_SHIPMENT:"retail_shipment",RETAIL_SHIPMENT_FOR_SUPPORTED_CARRIER:"retail_shipment_for_supported_carrier",RETAIL_SHIPMENT_FOR_UNSUPPORTED_CARRIER:"retail_shipment_for_unsupported_carrier",RETAIL_SHIPMENT_TRACKING_EVENT:"retail_shipment_tracking_event",RETAIL_SHIPMENT_TRACKING_EVENT_ETA:"retail_shipment_tracking_event_eta",RETAIL_SHIPMENT_TRACKING_EVENT_IN_TRANSIT:"retail_shipment_tracking_event_in_transit",RETAIL_SHIPMENT_TRACKING_EVENT_OUT_FOR_DELIVERY:"retail_shipment_tracking_event_out_for_delivery",RETAIL_SHIPMENT_TRACKING_EVENT_DELAYED:"retail_shipment_tracking_event_delayed",RETAIL_SHIPMENT_TRACKING_EVENT_DELIVERED:"retail_shipment_tracking_event_delivered",SURVEY:"survey",MESSAGE_LOCATION:"message_location",JOB_OFFER:"job_offer",GROUP_ADD_MEMBERS:"group_add_memebers",RTC_CALL_LOG:"rtc_call_log",EVENT_CALENDAR:"event_calendar",FACEPILE:"facepile",ATTRIBUTED_SHARE:"attributed_share",VIDEO_CINEMAGRAPH:"video_cinemagraph",LOCAL_CONTEXT_SHARE:"local_context_share",H_SCROLL:"h_scroll",MEDIA_QUESTION:"media_question",RICH_MEDIA:"rich_media",SQUARE_IMAGE_SHARE:"square_image_share",RETAIL_AGENT_ITEM_SUGGESTION:"retail_agent_item_suggestion",NOTE_COMPOSED:"note_composed",AVATAR_WITH_BIRTHDAY:"avatar_with_birthday",AIRLINE_FLIGHT_RESCHEDULE_UPDATE_BUBBLE:"airline_flight_reschedule_update_bubble",LIGHTBOX_VIDEO:"lightbox_video",GLOBALLY_DELETED_MESSAGE_PLACEHOLDER:"globally_deleted_message_placeholder",AVATAR_WITH_EGO_ACTION:"avatar_with_ego_action"};},null);
__d("ItunesPluginLogging",["Run","Bootloader"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={logPluginData:function(){g.onAfterLoad(function(){var i=b('Bootloader');i.loadModules(["ItunesDetector","AsyncRequest"],function(j,k){new k().setURI('/ajax/ads/media/log').setData({status:j.hasItunes()}).send();});});}};e.exports=h;},null);
__d("TypingDetector",["ArbiterMixin","Event","Input","Run","TypingStates","createObjectFrom","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();function n(o,p){this._input=o;this._ignoreKeys={};this._getValueFn=p;}Object.assign(n.prototype,g,{_timeout:7000,_currentState:k.INACTIVE,init:function(){this.init=m;this.reset();this._subscription=h.listen(this._input,'keyup',this._update.bind(this));j.onUnload(this._onunload.bind(this));},reset:function(){clearTimeout(this._checkTimer);this._checkTimer=null;this._lastKeystrokeAt=null;this._currentState=k.INACTIVE;},setIgnoreKeys:function(o){this._ignoreKeys=l(o);},destroy:function(){this._subscription.remove();},_onunload:function(){if(this._currentState==k.TYPING)this._transition(k.QUITTING);},_update:function(event){var o=h.getKeyCode(event),p=this._currentState;if(!this._ignoreKeys[o]){var q=this._getValueFn?this._getValueFn():i.getValue(this._input);if(q.trim().length===0){if(p==k.TYPING)this._transition(k.INACTIVE);}else if(p==k.TYPING){this._recordKeystroke();}else if(p==k.INACTIVE){this._transition(k.TYPING);this._recordKeystroke();}}},_transition:function(o){this.reset();this._currentState=o;this.inform('change',o);},_recordKeystroke:function(){this._lastKeystrokeTime=Date.now();if(!this._checkTimer)this._checkTimer=setTimeout(this._checkTyping.bind(this),this._timeout);},_checkTyping:function(){var o=this._lastKeystrokeTime+this._timeout,p=Date.now();if(p>o){this._transition(k.INACTIVE);}else{clearTimeout(this._checkTimer);this._checkTimer=setTimeout(this._checkTyping.bind(this),o-p+10);}}});e.exports=n;},null);
__d("TypingDetectorController",["AsyncRequest","AvailableList","AvailableListConstants","ChannelConnection","ChatVisibility","Keys","TypingDetector","TypingStates","emptyFunction","setTimeoutAcrossTransitions","shield"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();function r(s,t,u,v,w,x){"use strict";this.userID=s;this.input=t;this.source=u;this.threadID=w;this.remoteState=n.INACTIVE;this.notifyTimer=null;v=v||{};this.notifyDelay=v.notifyDelay||this.notifyDelay;this._typingDetector=new m(t,x);this._typingDetector.init(v);this._typingDetector.subscribe('change',this._stateChange.bind(this));}r.prototype.setUserAndThread=function(s,t){"use strict";if(this.userID!==s||this.threadID!==t){this.resetState();this.userID=s;this.threadID=t;}};r.prototype.setIgnoreEnter=function(s){"use strict";var t=s?[l.RETURN]:[];this._typingDetector.setIgnoreKeys(t);};r.prototype.resetState=function(){"use strict";this._notifyState(n.INACTIVE);this.remoteState=n.INACTIVE;this._typingDetector.reset();clearTimeout(this.notifyTimer);this.notifyTimer=null;};r.prototype.destroy=function(){"use strict";this.resetState();this._typingDetector.destroy();};r.prototype._stateChange=function(s,t){"use strict";if(t!=n.QUITTING){clearTimeout(this.notifyTimer);this.notifyTimer=p(q(this._notifyState,this,t),this.notifyDelay);}else this._notifyState(t,true);};r.prototype._notifyState=function(s,t){"use strict";if((!this.userID&&!this.threadID)||!k.isOnline()||s===this.remoteState||j.disconnected())return;this._sendRequest(s,this.userID,t);};r.prototype._sendRequest=function(s,t,u){"use strict";this.remoteState=s;var v={typ:s,to:t,source:this.source,thread:this.threadID};new g().setHandler(this._onTypResponse.bind(this,t)).setErrorHandler(o).setData(v).setURI('/ajax/messaging/typ.php').setAllowCrossPageTransition(true).setOption('asynchronous',!u).send();};r.prototype._onTypResponse=function(s,t){"use strict";var u=t.getPayload()||{};if(u.offline)h.set(s,i.OFFLINE,'typing_response');};Object.assign(r.prototype,{notifyDelay:1000});e.exports=r;},null);
__d("NotificationBeeperModuleLoader",["BootloadedComponent.react","JSResource","React"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={load:function(k,l){i.render(i.createElement(g,i.__spread({bootloadPlaceholder:i.createElement("span",null),bootloadLoader:h('NotificationBeeper.react')},k)),l);}};e.exports=j;},null);
__d("SplitImage.react",["React","Image.react","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g.createClass({displayName:"SplitImage",render:function(){var l=this.props.size;return (g.createElement("div",g.__spread({},this.props,{className:j(this.props.className,"_55lt"),style:Object.assign({},(this.props.style||{}),{width:l,height:l})}),this.renderImages()));},renderImages:function(){if(!this.props.srcs)return null;var l=this.props.srcs,m=Array.isArray(l);if(!m||l.length==1)return this.renderOne(m?l[0]:l);return l.length==2?this.renderTwo(l):this.renderThree(l);},renderOne:function(l){return (g.createElement(h,{src:l,width:this.props.size,height:this.props.size,alt:""}));},renderTwo:function(l){var m=this.props.size,n=Math.floor(m/2),o=-Math.floor(n/2),p=(("_55lu")+(this.props.border?' '+"_57xo":''));return (g.createElement("div",null,g.createElement("div",{className:"_55lu",style:{width:n}},g.createElement(h,{src:l[0],width:m,height:m,style:{marginLeft:o}})),g.createElement("div",{className:p,style:{width:n}},g.createElement(h,{src:l[1],width:m,height:m,style:{marginLeft:o}}))));},renderThree:function(l){var m=this.props.size,n=Math.floor(m/3*2),o=-Math.floor((m-n)/2),p=Math.floor(m/2),q=m-n,r=-Math.floor((p-q)/2),s=(("_55lu")+(this.props.border?' '+"_57pl":'')),t=(("_55lu")+(this.props.border?' '+"_57pm":''));return (g.createElement("div",null,g.createElement("div",{className:s,style:{width:n}},g.createElement(h,{src:l[0],width:m,height:m,style:{marginLeft:o}})),g.createElement("div",{className:t,style:{width:q,height:p}},g.createElement(h,{src:l[1],width:p,height:p,style:{marginLeft:r}})),g.createElement("div",{className:"_55lu",style:{width:q,height:p}},g.createElement(h,{src:l[2],width:p,height:p,style:{marginLeft:r}}))));}});e.exports=k;},null);
__d("MercuryMessageInfo",["MercuryActionStatus","MercuryViewer"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i={isOutbound:function(j){return j.author===h.getID();},isInbound:function(j){return !i.isOutbound(j);},isSending:function(j){return (j.status===g.UNSENT||j.status===g.UNCONFIRMED||j.status===g.UNABLE_TO_CONFIRM||j.status===g.RESENDING);},hasError:function(j){return (j.status===g.FAILED_UNKNOWN_REASON||j.status===g.UNABLE_TO_CONFIRM||j.status===g.ERROR);}};e.exports=i;},null);
__d("MercuryErrorInfo",["MercuryErrorType","MercuryMessageInfo","fbt"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={getMessage:function(k){var l='';if(j.isConnectionError(k)){l=i._("Diese Nachricht wurde nicht gesendet.");if(j.isTransient(k))l=i._("{message} \u00dcberpr\u00fcfe deine Internetverbindung und klicke, um es erneut zu versuchen.",[i.param("message",l)]);}else{if(k&&k.description){l=k.description;}else l=i._("Die Nachricht konnte nicht gesendet werden.");if(j.isTransient(k))l=i._("{message} Zum erneuten Senden klicken.",[i.param("message",l)]);}return l;},isConnectionError:function(k){if(k&&k.type==g.TRANSPORT)return k.code===1001||k.code===1004||k.code===1006;return false;},isTransient:function(k){return k&&k.is_transient;},isPermanent:function(k){return k?!this.isTransient(k):false;},hasErrorStatus:function(k){return h.hasError(k);}};e.exports=j;},null);
__d("MercuryMessageError.react",["CurrentUser","ImmutableObject","MercuryErrorInfo","MercuryMessageActions","React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=k,o=n.PropTypes,p=k.createClass({displayName:"MercuryMessageError",propTypes:{authorFBID:o.string,message:o.instanceOf(h).isRequired},getDefaultProps:function(){return {authorFBID:g.getID()};},render:function(){var q=this.props.message,r=q.error_data;return (k.createElement("div",k.__spread({},this.props,{className:m(this.props.className,this._getClassNameFromStatus(q)),tabIndex:i.isTransient(r)?0:null,onClick:i.isTransient(r)?this.messageResend:null}),k.createElement("div",{className:"_2fs1"}),k.createElement("span",{dangerouslySetInnerHTML:{__html:this._getTextFromStatus(q)}})));},messageResend:function(){j.getForFBID(this.props.authorFBID).resend(this.props.message);},_getClassNameFromStatus:function(q){if(i.hasErrorStatus(q)){return (("_2fs2")+(' '+"_2fs3")+(i.isTransient(q.error_data)?' '+"_2fs4":'')+(i.isPermanent(q.error_data)?' '+"_2fs5":''));}else return "_2fs6 _2fs2";},_getTextFromStatus:function(q){var r='',s=q.error_data;if(i.hasErrorStatus(q))r=i.getMessage(s);if(typeof r==='object'&&r.__html)r=r.__html;return r;}});e.exports=p;},null);
__d("SyncRequestTitle.react",["React","fbt","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=g,k=j.PropTypes,l=g.createClass({displayName:"SyncRequestTitle",propTypes:{appName:k.string.isRequired,isSender:k.bool.isRequired,receiverName:k.string.isRequired,senderName:k.string.isRequired},render:function(){if(this.props.isSender){return (g.createElement("div",null,h._("Waiting for {receiver} to accept your invite to play {app_name}.",[h.param("receiver",g.createElement("span",{className:"_dg4"},this.props.receiverName)),h.param("app_name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}else return (g.createElement("div",null,h._("{sender} wants to play {app_name} with you, right now.",[h.param("sender",g.createElement("span",{className:"_dg4"},this.props.senderName)),h.param("app_name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}});e.exports=l;},null);
__d("SyncRequestAcceptedMessage.react",["React","fbt","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=g,k=j.PropTypes,l=g.createClass({displayName:"SyncRequestAcceptedMessage",propTypes:{appName:k.string.isRequired,isSender:k.bool.isRequired,receiverName:k.string.isRequired,senderName:k.string.isRequired},render:function(){if(this.props.isSender){return (g.createElement("div",null,h._("{receiver} accepted your invite to play {app name}.",[h.param("receiver",g.createElement("span",{className:"_dg4"},this.props.receiverName)),h.param("app name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}else return (g.createElement("div",null,h._("You accepted an invite from {sender} to play {app name}.",[h.param("sender",g.createElement("span",{className:"_dg4"},this.props.senderName)),h.param("app name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}});e.exports=l;},null);
__d("SyncRequestRejectedMessage.react",["AsyncRequest","Link.react","React","URI","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=i,n=m.PropTypes,o=i.createClass({displayName:"SyncRequestRejectedMessage",propTypes:{requestId:n.string.isRequired,app:n.object.isRequired,isSender:n.bool.isRequired,receiver:n.object.isRequired,sender:n.object.isRequired},render:function(){if(this.props.isSender){return (i.createElement("div",null,l._("{receiver} declined your invite to play {app_name}.",[l.param("receiver",i.createElement("span",{className:"_dg4"},this.props.receiver.name)),l.param("app_name",i.createElement("span",{className:"_dg5"},this.props.app.name))])));}else return (i.createElement("div",null,l._("You declined an invite from {sender} to play {app_name}.",[l.param("sender",i.createElement("span",{className:"_dg4"},this.props.sender.name)),l.param("app_name",i.createElement("span",{className:"_dg5"},this.props.app.name))]),i.createElement("div",{className:"_13n7"},i.createElement("div",null,i.createElement(h,{onClick:this._submitBlockApp},l._("Block {app}",[l.param("app",this.props.app.name)]))),i.createElement("div",null,i.createElement(h,{onClick:this._submitBlockUser},l._("Block requests from {sender}",[l.param("sender",this.props.sender.name)]))))));},_submitBlockApp:function(){var p=new j('/games/block_app/'),q=new g().setURI(p);q.setData({app_id:this.props.app.id,source:'sync_request'});q.send();},_submitBlockUser:function(){var p=new j('/games/block_user/'),q=new g().setURI(p);q.setData({app_id:this.props.app.id,blockee_uid:this.props.sender.id});q.send();}});e.exports=o;},null);
__d("SyncRequestExpiredMessage.react",["React","fbt","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=g,k=j.PropTypes,l=g.createClass({displayName:"SyncRequestExpiredMessage",propTypes:{appName:k.string.isRequired,isSender:k.bool.isRequired,receiverName:k.string.isRequired,senderName:k.string.isRequired},render:function(){if(this.props.isSender){return (g.createElement("div",null,h._("{receiver} missed your invite to play {app name}.",[h.param("receiver",g.createElement("span",{className:"_dg4"},this.props.receiverName)),h.param("app name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}else return (g.createElement("div",null,h._("You missed an invite from {sender} to play {app name}.",[h.param("sender",g.createElement("span",{className:"_dg4"},this.props.senderName)),h.param("app name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}});e.exports=l;},null);
__d("SyncRequestCanceledMessage.react",["React","cx","fbt"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=g,k=j.PropTypes,l=g.createClass({displayName:"SyncRequestCanceledMessage",propTypes:{appName:k.string.isRequired,isSender:k.bool.isRequired,receiverName:k.string.isRequired,senderName:k.string.isRequired},render:function(){if(this.props.isSender){return (g.createElement("div",null,i._("You canceled an invite to {receiver} to play {app name}.",[i.param("receiver",g.createElement("span",{className:"_dg4"},this.props.receiverName)),i.param("app name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}else return (g.createElement("div",null,i._("{sender} canceled an invitation to play {app name}.",[i.param("sender",g.createElement("span",{className:"_dg4"},this.props.senderName)),i.param("app name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}});e.exports=l;},null);
__d("SyncRequestTimer.react",["React","fbt"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=g,j=i.PropTypes;function k(m){if(m){m=Math.ceil(m);var n=m%60;if(n<10)n='0'+n;var o=Math.floor(m/60);return o+':'+n;}else return "0:00";}var l=g.createClass({displayName:"SyncRequestTimer",propTypes:{timeRemaining:j.number.isRequired,isSender:j.bool.isRequired,receiverName:j.string.isRequired},render:function(){if(this.props.isSender){return (g.createElement("div",null,h._("({time_remaining} remaining)",[h.param("time_remaining",k(this.props.timeRemaining))])));}else return (g.createElement("div",null,h._("You have {time_remaining} to accept.",[h.param("time_remaining",k(this.props.timeRemaining))])));}});e.exports=l;},null);
__d("XSyncRequestSubmitController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/platform\/games\/sync_requests\/submit\/",{request_id:{type:"Int",required:true},sender:{type:"Int",required:true},action:{type:"Int",required:true}});},null);
__d("SyncRequest.react",["Arbiter","AsyncRequest","ChannelConstants","React","SyncRequestStatusEnum","SyncRequestTitle.react","SyncRequestAcceptedMessage.react","SyncRequestRejectedMessage.react","SyncRequestExpiredMessage.react","SyncRequestCanceledMessage.react","SyncRequestTimer.react","XUIButton.react","XSyncRequestSubmitController","cx","fbt","getObjectValues"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w=j,x=w.PropTypes,y=j.createClass({displayName:"SyncRequest",propTypes:{app:x.object.isRequired,creationTime:x.number.isRequired,requestId:x.string.isRequired,receiver:x.object.isRequired,sender:x.object.isRequired,status:x.oneOf(v(k)).isRequired,timeout:x.number.isRequired,timeRemaining:x.number.isRequired,viewerId:x.number.isRequired,onStatusUpdate:x.func},componentWillMount:function(){if(this.props.status===k.PENDING){var z=g.subscribe(i.getArbiterType('sync_request_updated'),function(ca,da){da=da.obj;if(da.id.toString()!==this.props.requestId)return;this.setState({status:da.status});}.bind(this));this.setState({statusEvent:z});}var aa=null;if(this.props.status===k.PENDING){var ba=function(){this.setState({time_remaining:(this.state.time_remaining-1)});if(this.state.time_remaining<=0){clearInterval(this.state.counter);var ca={counter:null,time_remaining:0};if(this.state.status===k.PENDING)ca.status=k.EXPIRED;this.setState(ca);}};aa=setInterval(ba.bind(this),1000);}this.setState({time_remaining:this.props.timeRemaining,counter:aa});},componentWillUnmount:function(){if(this.state.counter)clearInterval(this.state.counter);g.unsubscribe(this.state.statusEvent);},getInitialState:function(){return {buttonsDisabled:false,time:Date.now(),status:this.props.status,viewerIsSender:this.props.viewerId===this.props.sender.id};},componentDidUpdate:function(z,aa){if(this.props.status!=k.PENDING)this.state.status=this.props.status;if(this.props.onStatusUpdate)this.props.onStatusUpdate(this.state.status,aa.status);},render:function(){var z;switch(this.state.status){case k.PENDING:var aa;if(!this.state.viewerIsSender){aa=[j.createElement(r,{use:"confirm",onClick:this._handleAccept,disabled:this.state.buttonsDisabled,label:u._("Accept")}),j.createElement(r,{use:"default",onClick:this._handleReject,disabled:this.state.buttonsDisabled,label:u._("Decline")})];}else aa=j.createElement(r,{use:"default",onClick:this._handleCancel,disabled:this.state.buttonsDisabled,label:u._("Cancel")});z=(j.createElement("div",null,j.createElement("div",{className:"_372m"},j.createElement(l,{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name})),j.createElement("div",{className:"_372n"},j.createElement(q,{isSender:this.state.viewerIsSender,timeRemaining:this.state.time_remaining,receiverName:this.props.receiver.name})),j.createElement("div",{className:"_372o"},aa)));break;case k.ACCEPTED:z=j.createElement("div",{className:"_372p mvs"},j.createElement(m,{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;case k.REJECTED:z=j.createElement("div",{className:"_372p mvs"},j.createElement(n,{requestId:this.props.requestId,app:this.props.app,isSender:this.state.viewerIsSender,receiver:this.props.receiver,sender:this.props.sender}));break;case k.EXPIRED:z=j.createElement("div",{className:"_372p mvs"},j.createElement(o,{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;case k.CANCELED:z=j.createElement("div",{className:"_372p mvs"},j.createElement(p,{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;default:throw new Error('The request status `%s` is unknown.',this.state.status);}return (j.createElement("div",{className:"_372q"},z));},_handleAccept:function(){this._handleStatusUpdate(k.ACCEPTED);var z=window.open(this.props.app.uri);if(z)z.focus();},_handleReject:function(){this._handleStatusUpdate(k.REJECTED);},_handleCancel:function(){this._handleStatusUpdate(k.CANCELED);},_handleStatusUpdate:function(z){this.setState({status:z,buttonsDisabled:true});var aa=s.getURIBuilder().setInt('request_id',this.props.requestId).setInt('sender',this.props.sender.id).setInt('action',z).getURI();new h().setURI(aa).setHandler(function(ba){this.setState({status:z});}.bind(this)).setErrorHandler(function(ba){this.setState({buttonsDisabled:false});}.bind(this)).send();}});e.exports=y;},null);
__d("PhotoStoreCore",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={actions:{UPDATE:'update'},_photoCache:{},_postCreateCallbacks:{},getPhotoCache:function(h){if(!this._photoCache[h])throw new Error('Photo cache requested for unknown set ID');return this._photoCache[h];},hasBeenCreated:function(h){return !!this._photoCache[h];},clearSetCache:function(h){delete this._photoCache[h];delete this._postCreateCallbacks[h];},getByIndex:function(h,i,j){this.getPhotoCache(h).getItemAtIndex(i,j);},getByIndexImmediate:function(h,i){if(this._photoCache[h])return this._photoCache[h].getItemAtIndexImmediate(i);return (void 0);},getItemsInAvailableRange:function(h){var i=this.getAvailableRange(h),j=[];for(var k=i.offset;k<i.length;k++)j.push(this.getByIndexImmediate(h,k));return j;},getItemsAfterIndex:function(h,i,j,k){var l=this.getCursorByIndexImmediate(h,i);this.fetchForward(h,l,j,k);},getAllByIDImmediate:function(h){var i=Object.keys(this._photoCache);return i.map(function(j){return this.getByIndexImmediate(j,this.getIndexForID(j,h));}.bind(this)).filter(function(j){return !!j;});},getIndexForID:function(h,i){if(this._photoCache[h])return this._photoCache[h].getIndexForID(i);return (void 0);},getEndIndex:function(h){var i=this.getAvailableRange(h);return i.offset+i.length-1;},getCursorByIndexImmediate:function(h,i){var j=this.getByIndexImmediate(h,i);if(j)return this._photoCache[h].getCursorForID(j.id);return (void 0);},hasNextPage:function(h){var i=this.getCursorByIndexImmediate(h,this.getEndIndex(h));return this.getPhotoCache(h).hasNextPage(i);},getAvailableRange:function(h){return this.getPhotoCache(h).getAvailableRange();},hasLooped:function(h){return this.getPhotoCache(h).hasLooped();},fetchForward:function(h,i,j,k){this.getPhotoCache(h).getItemsAfterCursor(i,j,k);},fetchBackward:function(h,i,j,k){this.getPhotoCache(h).getItemsBeforeCursor(i,j,k);},executePostCreate:function(h,i){if(this._photoCache[h]){i&&i();}else this._postCreateCallbacks[h]=i;},runPostCreateCallback:function(h){var i=this._postCreateCallbacks[h];if(i){i();delete this._postCreateCallbacks[h];}},setPreFetchCallback:function(h,i){this.getPhotoCache(h).setPreFetchCallback(i);},updateData:function(h){var i=h.set_id;if(!this._photoCache[i]){this._photoCache[i]=new h.cache_class(h);this.runPostCreateCallback(i);}else if(h.query_metadata.action==g.actions.UPDATE){this._photoCache[i].updateData(h);}else this._photoCache[i].addData(h);},updateFeedbackData:function(h){var i=Object.keys(h);i.forEach(function(j){return g.getAllByIDImmediate(j).forEach(function(k){k.feedback=h[j].feedback;});});},reset:function(){Object.keys(this._photoCache).forEach(function(h){return this.clearSetCache(h);}.bind(this));}};e.exports=g;},null);
__d("MercuryAttachmentSnippetType",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g({PHOTO:null,GIF:null,VIDEO:null,AUDIO_CLIP:null,STICKER:null,ORION:null,SHARE:null,ERROR:null,MIXED:null});e.exports=h;},null);
__d("ChatEmployeeAwayWarning",["MercuryIDs","MercuryParticipants","MercuryViewer"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={updateEmployeeAwayWarning:function(k,l,m){h.get(i.getID(),function(n){var o=n.employee;if(o)h.getMulti(k.participants,function(p){var q=false,r=g.getUserIDFromThreadID(k.thread_id);if(!r)return;var s='fbid:'+r;for(var t in p)if(s==p[t].id&&p[t].is_employee_away)q=true;if(q){l();}else m();});});}};e.exports=j;},null);
__d("XStickerAssetController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/asset\/",{sticker_id:{type:"Int",required:true},image_type:{type:"Enum",defaultValue:"BestEffortImage",enumType:1}});},null);
__d("MessengerHotLikeUtils",["StickerAssetType","StickerConstants","XStickerAssetController"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j={SizeTimes:{small:1000,medium:2000,large:3000},getStickerIDForTime:function(k){var l=null;switch(true){case k<this.SizeTimes.small:l=h.HOT_LIKE_SMALL_STICKER_ID;break;case k<this.SizeTimes.medium:l=h.HOT_LIKE_MEDIUM_STICKER_ID;break;case k<this.SizeTimes.large:l=h.HOT_LIKE_LARGE_STICKER_ID;break;}return l;},getGrowCoefficientForSince:function(k){return Math.min(1,(Date.now()-k)/this.SizeTimes.large);},getMetadataForHotLike:function(k){var l;switch(k){case h.HOT_LIKE_LARGE_STICKER_ID:l=120;break;case h.HOT_LIKE_MEDIUM_STICKER_ID:l=84;break;case h.HOT_LIKE_SMALL_STICKER_ID:l=35;break;}return l?{height:l,width:l}:(void 0);},getPreviewURI:function(){return i.getURIBuilder().setInt('sticker_id',h.HOT_LIKE_LARGE_STICKER_ID).setEnum('image_type',g.IMAGE).getURI().toString();},getURIWithID:function(k){return i.getURIBuilder().setInt('sticker_id',k).setEnum('image_type',g.IMAGE).getURI().toString();}};e.exports=j;},null);
__d("MessengerContextBannerBootloader",["BootloadedComponent.react","CurrentUser","DOM","immutable","JSResource","MercuryIDs","MercuryParticipants","MercuryThreads","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';function p(q,r,s,t){n.getForFBID(h.getID()).getThreadMeta(q,function(u){if(!u)return;m.getMulti(u.participants,function(v){var w=j.Map();w=w.withMutations(function(y){u.participants.forEach(function(z){y.set(z,v[z]);});});var x=i.create('div',{style:{left:0,position:'absolute',right:0,top:0}});o.render(o.createElement(g,{bootloadPlaceholder:o.createElement("div",{style:{height:80}}),bootloadLoader:k('MessengerContextBannerContainer.react'),contact:w.get(l.getParticipantIDFromFromThreadID(u.thread_id)),location:r,onResize:t,participants:w,thread:u,viewer:h.getID()}),x);s(x);});});}e.exports={bootload:p};},null);
__d("MercuryShareAttachmentReactShape",["React"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g,i=h.PropTypes,j=i.shape({share_id:i.string,description:i.string,media:i.shape({image:i.string,image_size:i.shape({height:i.number,width:i.number}),duration:i.number,playable:i.bool,source:i.string}),source:i.string,style_list:i.arrayOf(i.string),subattachments:i.array,target:i.object,title:i.string,properties:i.object,uri:i.string}).isRequired;e.exports=j;},null);
__d("MessengerMomentsAppSnippet.react",["Image.react","MercuryShareAttachmentReactShape","React","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=i,n=m.PropTypes,o=i.createClass({displayName:"MessengerMomentsAppSnippet",propTypes:{attachment:h,isSenderViewer:n.bool,senderName:n.string},render:function(){var p=this.props.attachment;if(!p||!p.target)return null;var q,r=p.target.photo_count;if(this.props.isViewerSender){if(r==1){q=(k._("You synced 1 photo."));}else q=(k._("You synced {photo_count} photos.",[k.param("photo_count",r)]));}else if(r==1){q=(k._("{sender name} synced 1 photo.",[k.param("sender name",this.props.senderName)]));}else q=(k._("{sender name} synced {photo_count} photos.",[k.param("sender name",this.props.senderName),k.param("photo_count",r)]));return (i.createElement("span",{className:"uiIconText _3l6h"},i.createElement(g,{src:l('/images/messaging/docs/generic.png')}),q));}});e.exports=o;},null);
__d("MercuryThreadMuter",["AsyncDialog","AsyncRequest","DOM","MercuryThreadInfo"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={showMuteChangeDialog:function(l,m){g.send(new h('/ajax/mercury/mute_thread_dialog.php').setRelativeTo(m),function(n){n.subscribe('confirm',function(){this.hide();var o;i.scry(this.getRoot(),'input[type="radio"]').forEach(function(p){if(p.checked)o=p.value;});o=k.convertRawMuteSetting(o);d(['MercuryThreadActions'],function(p){p.get().updateMuteSetting(l,o);});}.bind(n));});},convertRawMuteSetting:function(l){switch(l){case 'always':return -1;case '30minutes':return 1800;case '1hour':return 3600;case '8hours':return 8*3600;case '24hours':return 24*3600;case '8am':var m,n=new Date(),o=new Date();o.setHours(8);o.setMinutes(0);o.setSeconds(0);if(o>n){m=o-n;}else m=o-n+(24*3600*1000);return m/1000;default:return 0;}}};e.exports=k;},null);
__d("MercuryTypingReceiver",["Arbiter","ChannelConstants","FBID","MercuryActionType","MercuryIDs","MercuryPayloadSource","MercuryDispatcher","MercurySingletonMixin","MercuryViewer","TypingStates","isEmpty","mixInEventEmitter","setTimeoutAcrossTransitions","MercuryThreadIDMap"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=b('MercuryThreadIDMap').get(),u=30000;function v(w){"use strict";this.$MercuryTypingReceiver0=null;this.$MercuryTypingReceiver1={};this.$MercuryTypingReceiver2=m.getForFBID(w);this.$MercuryTypingReceiver2.subscribe('update-typing-state',function(y,z){var aa=z.payload_source;if(aa!=l.CLIENT_CHANNEL_MESSAGE)return;var ba=z.actions;if(!ba||!ba.length)return;var ca=j.USER_GENERATED_MESSAGE;ba.forEach(function(da){if(da.action_type==ca&&da.author!=o.getID())this.$MercuryTypingReceiver4(da.thread_id,da.author);}.bind(this));}.bind(this));var x;if(i.isUser(w)){x=[h.getArbiterType('typ'),h.getArbiterType('ttyp')];}else x=[h.getArbiterType('page_typing')];g.subscribe(x,function(y,z){var aa=z.obj,ba=this.$MercuryTypingReceiver5(aa);if(ba){var ca=k.getParticipantIDFromUserID(aa.from);if(aa.st==p.TYPING){this.$MercuryTypingReceiver1[ba]=this.$MercuryTypingReceiver1[ba]||{};var da=this.$MercuryTypingReceiver1[ba][ca];this.$MercuryTypingReceiver1[ba][ca]=Date.now();if(!this.$MercuryTypingReceiver0)this.$MercuryTypingReceiver0=s(function(){this.$MercuryTypingReceiver6();}.bind(this),3000);!da&&this.$MercuryTypingReceiver7(ba);}else if(aa.st==p.INACTIVE)this.$MercuryTypingReceiver4(ba,ca);}}.bind(this));}v.prototype.$MercuryTypingReceiver8=function(w){"use strict";var x=this.$MercuryTypingReceiver1[w]||{},y=Object.keys(x);y.sort(function(z,aa){return x[z]-x[aa];});return y;};v.prototype.$MercuryTypingReceiver6=function(){"use strict";this.$MercuryTypingReceiver0=null;var w=Date.now(),x={},y=false;for(var z in this.$MercuryTypingReceiver1){var aa=false;for(var ba in this.$MercuryTypingReceiver1[z]||{})if(this.$MercuryTypingReceiver1[z][ba]<w-u){delete this.$MercuryTypingReceiver1[z][ba];aa=true;}else y=true;if(aa)x[z]=this.$MercuryTypingReceiver8(z);}if(!q(x))this.$MercuryTypingReceiver9(x);if(y)this.$MercuryTypingReceiver0=s(function(){this.$MercuryTypingReceiver6();}.bind(this),3000);};v.prototype.$MercuryTypingReceiver4=function(w,x){"use strict";if(w in this.$MercuryTypingReceiver1)if(x in this.$MercuryTypingReceiver1[w]){delete this.$MercuryTypingReceiver1[w][x];this.$MercuryTypingReceiver7(w);}};v.prototype.$MercuryTypingReceiver9=function(w){"use strict";this.releaseHeldEventType('state-changed');this.emitAndHold('state-changed',w);};v.prototype.$MercuryTypingReceiver7=function(w){"use strict";var x={};x[w]=this.$MercuryTypingReceiver8(w);this.$MercuryTypingReceiver9(x);};v.prototype.$MercuryTypingReceiver5=function(w){"use strict";if(w.thread_fbid)return t.getClientIDFromFBIDNow(w.thread_fbid);if(w.type==='typ'||w.type==='page_typing')return k.getThreadIDFromUserID(w.from);return null;};r(v,{'state-changed':true});Object.assign(v,n);e.exports=v;},null);
__d("MercuryIndicatorController",["ArbiterMixin","DOM","MercuryActionType","MercuryDelayedRoger","MercuryIDs","MercuryMessageSourceTags","MercuryParticipants","MercuryViewer","arrayContains","formatDate","removeFromArray","fbt","MercuryRoger","MercuryThreads","MercuryTypingReceiver"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s=b('MercuryRoger').get(),t=b('MercuryThreads').get(),u=b('MercuryTypingReceiver').get(),v=[];function w(x){this._threadID=x;this._canonicalUser=k.getUserIDFromThreadID(x);v.push(this);}Object.assign(w.prototype,g,{destroy:function(){q(v,this);},setLastMessage:function(x){this._lastMsg=x;this._handleStateChange();},_informStateChanged:function(x){if(x.activity=='none'&&this._currentActivity=='none')return;if(this._lastMsg&&n.isViewer(this._lastMsg.author))x.self_authored=true;this._currentActivity=x.activity;this.inform('state-changed',x);},_notifySentFrom:function(){var x,y,z=this._lastMsg.source_tags||[];if(o(z,l.MESSENGER)){x=h.create('a',{href:'/mobile/messenger','class':'fcg',target:'_blank'},r._("Vom Messenger gesendet"));y='sentFromMobile';}else if(o(z,l.MOBILE)){x=h.create('a',{href:'/mobile','class':'fcg',target:'_blank'},r._("Vom Handy gesendet"));y='sentFromMobile';}else if(o(z,l.EMAIL)){x=r._("Per E-Mail gesendet");y='sentFromEmail';}else{this._informStateChanged({activity:'none'});return;}this._informStateChanged({activity:y,text:x});},_notifySeenTimestamp:function(x){var y=s.getSeenTimestamp(this._threadID,x[0])*.001,z=Date.now()*.001,aa;if(y<z-518400){aa='M j';}else if(y<z-86400){aa='D g:ia';}else aa='g:ia';this._informStateChanged({activity:'seen-timestamp',text:r._("Gesehen: {timestamp}",[r.param("timestamp",p(y,aa))])});},_nameNormalizer:function(x){var y;m.getMulti(x,function(z){function aa(ca){if(z[ca]!==(void 0)){return z[ca].short_name.toLowerCase();}else return ca;}var ba=x.map(aa);y=function(ca){var da=aa(ca),ea=ba.indexOf(da)!==ba.lastIndexOf(da);return ea?z[ca].name:z[ca].short_name;};});return y;},_notifySeenBy:function(x){var y=this._lastMsg,z=true;m.getMulti(x,function(aa){z=false;if(this._lastMsg!=y)return;var ba=t.getThreadMetaNow(this._threadID),ca=ba?ba.participants.length:0,da=x.length+(y.author!=n.getID()),ea,fa=false,ga=ca>2&&da>=ca-1,ha;if(ba)ha=this._nameNormalizer(ba.participants);if(!ha)ha=function(la){return aa[la].short_name;};if(ga){ea=r._("Von allen gesehen");}else if(x.length==1){ea=r._("Gesehen von {user}",[r.param("user",aa[x[0]].short_name)]);}else if(x.length==2){ea=r._("Gesehen von {user1}, {user2}",[r.param("user1",aa[x[0]].short_name),r.param("user2",aa[x[1]].short_name)]);}else if(x.length==3){ea=r._("Gesehen von {user1}, {user2}, {user3}",[r.param("user1",aa[x[0]].short_name),r.param("user2",aa[x[1]].short_name),r.param("user3",aa[x[2]].short_name)]);}else if(x.length>3){var ia=Object.keys(aa).length-2,ja=r._({"*":"{num} weiteren Personen"},[r.param("num",ia,[0])]),ka=h.create('span',{className:'more'},ja);ea=r._("Gesehen von {user1}, {user2}, {=num more link}",[r.param("user1",aa[x[0]].short_name),r.param("user2",aa[x[1]].short_name),r.param("=num more link",ka)]);fa=true;}this._informStateChanged({activity:'seen-by',text:ea,seenBy:x,tooltip:fa});}.bind(this));z&&this._informStateChanged({activity:'none'});},_notifyTyping:function(x){var y=this._lastMsg,z=true;m.getMulti(x,function(aa){z=false;if(this._lastMsg!=y)return;var ba=t.getThreadMetaNow(this._threadID),ca=ba?ba.participants.length:0,da;if(ba)da=this._nameNormalizer(ba.participants);if(!da)da=function(ja){return aa[ja].short_name;};var ea,fa=false;if(ca>2&&x.length>=ca-1){ea=r._("Alle schreiben etwas ...");}else if(x.length==1){ea=r._("{name} schreibt etwas ...",[r.param("name",aa[x[0]].short_name)]);}else if(x.length==2){ea=r._("{user1} und {user2} schreiben etwas ...",[r.param("user1",aa[x[0]].short_name),r.param("user2",aa[x[1]].short_name)]);}else if(x.length==3){ea=r._("{user1}, {user2} und {user3} schreiben etwas ...",[r.param("user1",aa[x[0]].short_name),r.param("user2",aa[x[1]].short_name),r.param("user3",aa[x[2]].short_name)]);}else if(x.length>3){var ga=Object.keys(aa).length-2,ha=r._({"*":"{num} weitere Personen"},[r.param("num",ga,[0])]),ia=h.create('a',{href:'#'},ha);ea=r._("{user1}, {user2} und {=num more link} schreiben etwas ...",[r.param("user1",aa[x[0]].short_name),r.param("user2",aa[x[1]].short_name),r.param("=num more link",ia)]);fa=true;}this._informStateChanged({activity:'typing',text:ea,typing:x,tooltip:fa});}.bind(this));z&&this._informStateChanged({activity:'none'});},_handleStateChange:function(){var x=i.LOG_MESSAGE;if(!this._lastMsg||this._lastMsg.action_type==x){this._informStateChanged({activity:'none'});return;}if(this._typing&&this._typing.length){this._notifyTyping(this._typing);return;}if(this._canonicalUser&&this._lastMsg.author!=n.getID()){this._notifySentFrom();return;}var y=j.getSeenBy(this._threadID,true);if(y.length)if(this._canonicalUser){this._notifySeenTimestamp(y);return;}else{this._notifySeenBy(y);return;}this._informStateChanged({activity:'none'});}});u.addRetroactiveListener('state-changed',function(x){v.forEach(function(y){var z=x[y._threadID];if(z!==(void 0)){y._typing=z;y._handleStateChange();}});});j.subscribe('state-changed',function(x,y){v.forEach(function(z){y[z._threadID]&&z._handleStateChange();});});e.exports=w;},null);
__d("MercuryLastMessageIndicator.react",["DOM","MercuryIndicatorController","MercuryParticipants","React","TooltipData","cx","emptyFunction","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=j,p=o.PropTypes,q=j.createClass({displayName:"MercuryLastMessageIndicator",propTypes:{hideTyping:p.bool,indicatorWillShow:p.func,indicatorDidShow:p.func,lastMessage:p.object,threadID:p.string.isRequired},getDefaultProps:function(){return {indicatorWillShow:m,indicatorDidShow:m};},getInitialState:function(){return {data:{}};},componentDidMount:function(){this._setup(this.props);},componentWillReceiveProps:function(r){if(r.threadID!=this.props.threadID){this._destroy();this._setup(r);}else if(r.lastMessage!=this.props.lastMessage)this._controller.setLastMessage(r.lastMessage);},componentWillUpdate:function(r,s){if(this.isVisible(r,s))this.props.indicatorWillShow();},componentDidUpdate:function(){if(!this.isVisible())return;this.setText();this.setTooltip();this.props.indicatorDidShow();},componentWillUnmount:function(){this._destroy();},render:function(){return (j.createElement("div",{className:this.getRootClass()},j.createElement("div",{className:"_510h"}),j.createElement("span",{className:"_510f",ref:"text"}," ")));},getRootClass:function(){var r=(("_510g")+(this.state.data.self_authored?' '+"_510e":'')),s=this.state.data.activity,t=null;if(String(s).startsWith('seen')){t='seen';}else if(s=='typing'){t=this.props.hideTyping?null:s;}else t=s;return n(r,t,this.props.className);},isVisible:function(r,s){r=r||this.props;s=s||this.state;return (s.data&&s.data.activity!='none'&&!(r.hideTyping&&s.data.activity=='typing'));},setText:function(){if(this.state.data.text)g.setContent(j.findDOMNode(this.refs.text),this.state.data.text);},setTooltip:function(){if(this.state.data.activity=='seen-by'&&this.state.data.tooltip)i.getMulti(this.state.data.seenBy,function(r){var s=g.create('div',null,this.state.data.seenBy.map(function(t){return g.create('div',null,r[t].name);}));k.set(g.find(j.findDOMNode(this),'span.more'),s,'above','center');}.bind(this));},_setup:function(r){this._controller=new h(r.threadID);this._subscription=this._controller.subscribe('state-changed',function(s,t){return this.setState({data:t});}.bind(this));r.lastMessage&&this._controller.setLastMessage(r.lastMessage);},_destroy:function(){this._subscription.unsubscribe();this._controller.destroy();}});e.exports=q;},null);
__d("MercuryShareAttachmentRenderLocations",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g={CHAT:'chat',CHAT_PREVIEW:'chat_preview',MESSENGER:'messenger',WEB_INBOX:'web_inbox',getValues:function(){return [g.CHAT,g.CHAT_PREVIEW,g.MESSENGER,g.WEB_INBOX];},isPreview:function(h){return h===g.CHAT_PREVIEW;}};e.exports=g;},null);
__d("MNCommerceAttachmentUtils",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g={shouldRenderMap:function(h,i){return (!!h&&h.latitude&&h.longitude&&!!i);},getDestinationAddressString:function(h){if(!h)return null;var i=h.street_1;if(!!h.city)i=i+' '+h.city+',';if(!!h.state)i=i+' '+h.state;return i;}};e.exports=g;},null);
__d("MercuryFallbackShareAttachmentSnippet.react",["Image.react","React","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=h,m=l.PropTypes,n=h.createClass({displayName:"MercuryFallbackShareAttachmentSnippet",propTypes:{isViewerSender:m.bool,senderName:m.string},render:function(){var o;if(this.props.isViewerSender){o=(j._("Du hast einen Link geteilt"));}else o=(j._("{sender name} hat einen Link geteilt.",[j.param("sender name",this.props.senderName)]));return (h.createElement("span",{className:"uiIconText _3l6h"},h.createElement(g,{src:k('/images/messaging/docs/generic.png')}),o));}});e.exports=n;},null);
__d("MercuryAttachmentSnippetRenderer",["MercuryAttachmentSnippetType","MercuryAttachmentType","MercuryAudioType","MercuryConstants","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l={getAttachmentSnippetType:function(m){if(this._hasOnlyPhotos(m))return g.PHOTO;if(this._hasOnlyAnimatedImages(m))return g.GIF;if(this._hasOnlyVideo(m))return g.VIDEO;if(this._hasAudioClip(m))return g.AUDIO_CLIP;if(this._hasSticker(m))return g.STICKER;if(this._hasOrion(m))return g.ORION;if(this._hasShare(m))return g.SHARE;if(this._hasError(m))return g.ERROR;return g.MIXED;},renderAttachmentSnippetText:function(m,n,o,p){switch(m){case g.PHOTO:return this._renderPhotoAttachmentSnippetText(n,o,this._getPhotoAttachments(p));case g.GIF:return this._renderAnimatedImagesAttachmentSnippetText(n,o,this._getAnimatedImageAttachments(p));case g.VIDEO:return n?k._("Du hast ein Video gesendet."):k._("{sender name} hat ein Video gesendet.",[k.param("sender name",o)]);case g.AUDIO_CLIP:return n?k._("Du hast eine Sprachnachricht versendet."):k._("{name} hat eine Sprachnachricht gesendet.",[k.param("name",o)]);case g.STICKER:return n?k._("Du hast einen Sticker verschickt."):k._("{name} hat einen Sticker verschickt.",[k.param("name",o)]);case g.ORION:if(p&&p[0]&&p[0].metadata)return this.renderOrionSnippetText(n,o,p[0].metadata);break;case g.SHARE:return n?k._("Du hast einen Link geteilt"):k._("{sender name} hat einen Link geteilt.",[k.param("sender name",o)]);case g.ERROR:return n?k._("Du hast einen Anhang gesendet."):k._("{sender name} hat einen Anhang gesendet.",[k.param("sender name",o)]);default:return '';}},_hasOnlyPhotos:function(m){return this._getPhotoAttachments(m).length===m.length;},_hasOnlyAnimatedImages:function(m){return this._getAnimatedImageAttachments(m).length===m.length;},_hasOnlyVideo:function(m){return (m.length===1&&m[0].attach_type===h.VIDEO);},_hasAudioClip:function(m){var n=m[0].metadata&&m[0].metadata.type;return (m.length===1&&(n===i.AudioClip||n===i.VoiceMessageWithTranscript));},_hasSticker:function(m){return (m.length===1&&m[0].attach_type===h.STICKER);},_hasOrion:function(m){return this._hasSingleAttachmentOfShareDataType(m,j.MercurySupportedShareType.FB_ORION);},_hasSingleAttachmentOfShareDataType:function(m,n){return (m.length===1&&m[0].share_data_type===n);},_hasShare:function(m){return (m.length===1&&m[0].attach_type===h.SHARE);},_hasError:function(m){return (m.length===1&&m[0].attach_type===h.ERROR);},_getPhotoAttachments:function(m){if(!m)return [];return m.filter(function(n){return n.attach_type===h.PHOTO;});},_getAnimatedImageAttachments:function(m){if(!m)return [];return m.filter(function(n){return n.attach_type===h.ANIMATED_IMAGE;});},_renderPhotoAttachmentSnippetText:function(m,n,o){if(o.length===1){if(m){return (k._("Du hast ein Foto gesendet."));}else return (k._("{name} hat ein Foto gesendet.",[k.param("name",n)]));}else if(m){return (k._({"*":"Du hast {num_photos} Fotos gesendet."},[k.param("num_photos",o.length,[0])]));}else return (k._({"*":"{name} hat {num_photos} Fotos gesendet."},[k.param("name",n),k.param("num_photos",o.length,[0])]));},_renderAnimatedImagesAttachmentSnippetText:function(m,n,o){if(o.length===1){if(m){return (k._("Du hast eine GIF gesendet."));}else return (k._("{name} hat eine GIF gesendet.",[k.param("name",n)]));}else if(m){return (k._("Du hast {num_animated_images} GIF-Dateien gesendet.",[k.param("num_animated_images",o.length)]));}else return (k._("{name} hat {num_animated_images} GIF-Dateien gesendet.",[k.param("name",n),k.param("num_animated_images",o.length)]));},renderOrionSnippetText:function(m,n,o,p){if(m){return (k._("Du hast {currency} {amount} gesendet.",[k.param("currency",o),k.param("amount",p)]));}else return (k._("{name} hat dir {currency} {amount} gesendet.",[k.param("name",n),k.param("currency",o),k.param("amount",p)]));}};e.exports=l;},null);
__d("P2PMercuryAttachmentSnippet.react",["CurrentUser","Image.react","MercuryAttachmentSnippetRenderer","React","cx","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=j,n=m.PropTypes,o=j.createClass({displayName:"P2PMercuryAttachment",propTypes:{sender:n.object,receiver:n.object,amount:n.string,currency:n.string},getDefaultProps:function(){return {sender:{},receiver:{}};},render:function(){var p=i.renderOrionSnippetText(g.getID()===this.props.sender.id,this.props.sender.name,this.props.currency,this.props.amount);return (j.createElement("span",{className:"uiIconText _3l6h _3_io"},j.createElement(h,{height:12,src:l('/images/p2p/attachment-snippet-icon.png'),width:12}),p));}});e.exports=o;},null);
__d("P2PMercuryShareAttachmentSnippet.react",["MercuryShareAttachmentReactShape","P2PMercuryAttachmentSnippet.react","React"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=i.createClass({displayName:"P2PMercuryShareAttachmentSnippet",propTypes:{attachment:g},render:function(){var k=this.props.attachment?this.props.attachment.target:{};return (i.createElement(h,i.__spread({},k)));}});e.exports=j;},null);
__d("MercuryPhotoShareSnippet.react",["Image.react","React","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=h,m=l.PropTypes,n=h.createClass({displayName:"MercuryPhotoShareSnippet",propTypes:{isViewerSender:m.bool,senderName:m.string},render:function(){var o=this.props.isViewerSender?j._("Du hast ein Foto gesendet."):j._("{sender name} hat ein Foto gesendet.",[j.param("sender name",this.props.senderName)]);return (h.createElement("span",{className:"uiIconText _3l6h"},h.createElement(g,{src:k('/images/icons/photo.gif')}),o));}});e.exports=n;},null);
__d("MercuryVideoShareSnippet.react",["Image.react","React","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=h,m=l.PropTypes,n=h.createClass({displayName:"MercuryVideoShareSnippet",propTypes:{isViewerSender:m.bool,senderName:m.string},render:function(){var o=this.props.isViewerSender?j._("Du hast ein Video gesendet."):j._("{sender name} hat ein Video gesendet.",[j.param("sender name",this.props.senderName)]);return (h.createElement("span",{className:"uiIconText _3l6h"},h.createElement(g,{src:k('/images/icons/video.gif')}),o));}});e.exports=n;},null);
__d("MercuryMessageLocationShareAttachmentSnippet.react",["Image.react","React","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=h,m=l.PropTypes,n=h.createClass({displayName:"MercuryMessageLocationShareAttachmentSnippet",propTypes:{isViewerSender:m.bool,senderName:m.string},render:function(){var o;if(this.props.isViewerSender){o=(j._("Du hast einen Standort gesendet."));}else o=(j._("{sender name} hat einen Standort gesendet.",[j.param("sender name",this.props.senderName)]));return (h.createElement("span",{className:"uiIconText _3l6h"},h.createElement(g,{src:k('/images/messaging/location/location.png')}),o));}});e.exports=n;},null);
__d("MercuryAnimatedShareSnippet.react",["Image.react","React","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=h,m=l.PropTypes,n=h.createClass({displayName:"MercuryAnimatedShareSnippet",propTypes:{isViewerSender:m.bool,senderName:m.string},render:function(){var o=this.props.isViewerSender?j._("Du hast eine GIF gesendet."):j._("{sender name} hat eine GIF gesendet.",[j.param("sender name",this.props.senderName)]);return (h.createElement("span",{className:"uiIconText _3l6h"},h.createElement(g,{src:k('/images/icons/photo.gif')}),o));}});e.exports=n;},null);
__d("MercuryShareStyleMap",["JSResource","Map","MercuryConfig","MercuryShareAttachmentRenderLocations","MNCommerceAttachmentUtils","StoryAttachmentStyle","cx","emptyFunction","MercuryFallbackShareAttachmentSnippet.react","P2PMercuryShareAttachmentSnippet.react","MessengerMomentsAppSnippet.react","MercuryPhotoShareSnippet.react","MercuryVideoShareSnippet.react","MercuryMessageLocationShareAttachmentSnippet.react","MercuryAnimatedShareSnippet.react"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=new h();o.set(l.FALLBACK,{componentName:'MercuryFallbackShareAttachment.react',componentLoader:g('MercuryFallbackShareAttachment.react'),getSnippetComponent:function(){return b('MercuryFallbackShareAttachmentSnippet.react');},cx:new h([[j.MESSENGER,"_5i_d"]]),requiresNoBubbleTail:function(q,r){return q.share.media.image&&r;}});o.set(l.EVENT,{componentName:'MercuryEventShareAttachment.react',componentLoader:g('MercuryEventShareAttachment.react'),getSnippetComponent:function(){return b('MercuryFallbackShareAttachmentSnippet.react');}});o.set(l.ORION,{componentName:'P2PMercuryShareAttachment.react',componentLoader:g('P2PMercuryShareAttachment.react'),getSnippetComponent:function(){return b('P2PMercuryShareAttachmentSnippet.react');},cx:new h([[j.MESSENGER,"_5i_d _3djc"]])});if(i.WWWMessengerCommerceGK){o.set(l.RETAIL_RECEIPT,{componentName:'MNCommerceReceiptMercuryShareAttachment.react',componentLoader:g('MNCommerceReceiptMercuryShareAttachment.react'),cx:new h([[j.MESSENGER,"_5i_d _205d"]])});o.set(l.RETAIL_CANCELLATION,{componentName:'MNCommerceCancelationMercuryShareAttachment.react',componentLoader:g('MNCommerceCancelationMercuryShareAttachment.react'),cx:new h([[j.MESSENGER,"_5i_d _205d"]])});o.set(l.RETAIL_SHIPMENT,{componentName:'MNCommerceShippingMercuryShareAttachment.react',componentLoader:g('MNCommerceShippingMercuryShareAttachment.react'),cx:new h([[j.MESSENGER,"_5i_d _205d"]]),requiresNoBubbleTail:function(q){var r=q.share&&q.share.target&&q.share.target;return r&&k.shouldRenderMap(r.destination,r.estimated_delivery_display_time);}});o.set(l.RETAIL_SHIPMENT_TRACKING_EVENT,{componentName:'MNCommerceShippingMercuryShareAttachment.react',componentLoader:g('MNCommerceShippingMercuryShareAttachment.react'),cx:new h([[j.MESSENGER,"_5i_d _205d"]])});o.set(l.RETAIL_NOW_IN_STOCK,{componentName:'MNCommerceProductSubscriptionMercuryShareAttachment.react',componentLoader:g('MNCommerceProductSubscriptionMercuryShareAttachment.react'),cx:new h([[j.MESSENGER,"_5i_d _205d"]]),requiresNoBubbleTail:n.thatReturnsTrue});}if(i.WWWMessengerMoneyPennyGK)o.set(l.RETAIL_AGENT_ITEM_SUGGESTION,{componentName:'MNCommerceAgentItemSuggestionMercuryShareAttachment.react',componentLoader:g('MNCommerceAgentItemSuggestionMercuryShareAttachment.react'),cx:new h([[j.MESSENGER,"_5i_d _205d"]]),requiresNoBubbleTail:function(q){return q.share.target.thumb_url;}});if(i.MomentsMessengerWWWGK)o.set(l.MOMENTS_APP_INVITATION,{componentName:'MessengerMomentsAppShareAttachment.react',componentLoader:g('MessengerMomentsAppShareAttachment.react'),getSnippetComponent:function(){return b('MessengerMomentsAppSnippet.react');},cx:new h([[j.MESSENGER,"_5i_d"]]),requiresNoBubbleTail:n.thatReturnsTrue});o.set(l.PHOTO,{componentName:'MercuryPhotoShareAttachment.react',componentLoader:g('MercuryPhotoShareAttachment.react'),getSnippetComponent:function(){return b('MercuryPhotoShareSnippet.react');},cx:null,requiresNoBubbleTail:n.thatReturnsTrue,unwrapInStory:n.thatReturnsTrue});o.set(l.IMAGE_SHARE,{componentName:'MercuryImageShareAttachment.react',componentLoader:g('MercuryImageShareAttachment.react'),getSnippetComponent:function(){return b('MercuryPhotoShareSnippet.react');},cx:null,requiresNoBubbleTail:n.thatReturnsTrue,unwrapInStory:n.thatReturnsTrue});o.set(l.VIDEO,{componentName:'MercuryVideoShareAttachment.react',componentLoader:g('MercuryVideoShareAttachment.react'),getSnippetComponent:function(){return b('MercuryVideoShareSnippet.react');},cx:null,requiresNoBubbleTail:n.thatReturnsTrue,unwrapInStory:n.thatReturnsTrue});o.set(l.MESSAGE_LOCATION,{componentName:'MercuryMessageLocationShareAttachment.react',componentLoader:g('MercuryMessageLocationShareAttachment.react'),getSnippetComponent:function(){return b('MercuryMessageLocationShareAttachmentSnippet.react');},cx:new h([[j.MESSENGER,"_5i_d"]]),requiresNoBubbleTail:function(q,r){return q.share.media.image&&r;}});o.set(l.ANIMATED_IMAGE_SHARE,{componentName:'MercuryAnimatedShareAttachment.react',componentLoader:g('MercuryAnimatedShareAttachment.react'),getSnippetComponent:function(){return b('MercuryAnimatedShareSnippet.react');},cx:null,requiresNoBubbleTail:n.thatReturnsTrue,unwrapInStory:n.thatReturnsFalse});var p={getStyleFactory:function(q){if(!q||!q.style_list)return null;if(q.style_list[0]===l.ATTACHED_STORY){var r=q.subattachments,s=(r&&r.length)?r[0].style_list:[],t=this._getStyleMapEntry(s);if(t&&t.unwrapInStory&&t.unwrapInStory())return {attachment:r[0],factory:t};}var u=this._getStyleMapEntry(q.style_list);if(!u)return null;return {attachment:q,factory:u};},_getStyleMapEntry:function(q){for(var r=0;r<q.length;r++){var s=o.get(q[r]);if(s)return s;}return null;}};e.exports=p;},null);
__d("WebMessengerDeleteThreadDialog",["Dialog","fbt","MercuryThreadActions"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=b('MercuryThreadActions').get(),j={show:function(k){var l=[];l.push({name:'delete_conversation',label:h._("Unterhaltung l\u00f6schen"),handler:function(){return i["delete"](k);}});l.push(g.CANCEL);new g().setTitle(h._("Diese ganze Unterhaltung l\u00f6schen?")).setBody(h._("Wenn du deine Kopie dieser Unterhaltung l\u00f6schst, kann das nicht r\u00fcckg\u00e4ngig gemacht werden.")).setButtons(l).show();}};e.exports=j;},null);
__d("WebMessengerThreadPermalinks",["MercuryIDs","MessagingTag","URI","WebMessengerPermalinkConstants","WWWBase","requireWeak"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m={getThreadURI:function(q,r,s){if(g.isCanonical(q)){n(q,r,s);}else o(q,r,s);}};function n(q,r,s){var t=new i(k.uri),u=g.tokenize(q).value;t.setPath(p(s)+'/'+u);r&&r(t.toString());}function o(q,r,s){l('MercuryThreadIDMap',function(t){var u=t.get();u.getFBIDFromClientID(q,function(v){var w=new i(k.uri);w.setPath(j.getURIPathForThreadID(v,p(s)));r&&r(w.toString());});});}function p(q){var r=j.BASE_PATH;if(q&&q!=h.INBOX)r+='/'+q;return r;}e.exports=m;},null);
__d("MercuryTypeaheadDataSource",["Banzai","BanzaiLogger","CurrentUser","DataSource","MercuryParticipantTypes","MercuryTypeaheadConstants","OrderedFriendsList","ShortProfiles","WorkModeConfig","debounce"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=500,r=[],s={},t={},u={},v=false,w=false;for(var x in j)if(j.hasOwnProperty(x))z[x]=j[x];var y=j===null?null:j.prototype;z.prototype=Object.create(y);z.prototype.constructor=z;z.__superConstructor__=j;function z(aa){"use strict";aa=aa||{};aa.kanaNormalization=true;j.call(this,aa);this.logQuery=p(function(ba){this.$MercuryTypeaheadDataSource0(ba);},q,this,true);this.logResponse=p(function(ba){this.$MercuryTypeaheadDataSource0(ba);},q,this,true);}z.prototype.dirty=function(){"use strict";this.$MercuryTypeaheadDataSource1=r;this.localCache=t;this.queryCache=s;this.queryIDs=u;return this;};z.prototype.bootstrap=function(){"use strict";if(v||w)return false;this.$MercuryTypeaheadDataSource0({event:'bootstrap_start'});w=true;n.fetchAll().then(function(){this.updateBootstrapData();this.$MercuryTypeaheadDataSource0({event:'bootstrap_end'});w=false;v=true;}.bind(this),function(){this.$MercuryTypeaheadDataSource0({event:'bootstrap_failure'});}.bind(this));return true;};z.prototype.updateBootstrapData=function(){"use strict";var aa=this.getCachedShortProfileIDs(),ba=o.is_work_user?k.FB4C:k.FRIEND,ca=aa.map(function(da){var ea=n.getNow(da),fa=da==i.getID()?ba:ea.type,ga=[ea.additionalName,ea.alternateName].concat(ea.searchTokens||[]).join(' ');return {uid:da,index:m.getActiveRank(da),text:ea.name,tokens:ga,localized_text:ea.name,additional_text:ea.additionalName,photo:ea.thumbSrc,render_type:fa,type:l.USER_TYPE};});if(ca.length)this.addEntries(ca);};z.prototype.query=function(aa,ba,ca,da){"use strict";var ea=ba||aa.length===1;return y.query.call(this,aa,ea,ca,da);};z.prototype.getQueryData=function(aa,ba){"use strict";return Object.assign({},y.getQueryData.call(this,aa,ba),{needs_friends:!this.isBootstrapped()});};z.prototype.setEntry=function(aa,ba){"use strict";this.$MercuryTypeaheadDataSource1[aa]=ba;};z.prototype.getEntry=function(aa){"use strict";return this.$MercuryTypeaheadDataSource1[aa]||null;};z.prototype.getCachedShortProfileIDs=function(){"use strict";var aa=n.getCachedProfileIDs(),ba=aa.filter(function(ca){var da=n.getNow(ca);return (ca==i.getID()||da.type===k.FRIEND||da.type===k.FB4C);});return ba;};z.prototype.isBootstrapped=function(){"use strict";return v;};z.prototype.isBootstrapping=function(){"use strict";return w;};z.prototype.processEntries=function(aa,ba){"use strict";aa=aa.map(function(ca){if(ca.index==null&&(ca.render_type===k.FRIEND||ca.render_type===k.FB4C))ca.index=m.getActiveRank(ca.uid);return ca;});return y.processEntries.call(this,aa);};z.prototype.mergeUids=function(aa,ba,ca,da){"use strict";var ea=ba.sort(function(fa,ga){return this.getEntry(fa).index-this.getEntry(ga).index;}.bind(this));return y.mergeUids.call(this,aa,ea,ca,da);};z.prototype.$MercuryTypeaheadDataSource0=function(aa){"use strict";if(!g.isEnabled('mercury_typeahead_logging'))return;h.log('MercuryQueryResultsLoggerConfig',aa);};e.exports=z;},null);
__d("PhotoStore",["Arbiter","PhotoStoreCore"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();g.subscribe('update-photos',function(i,j){h.updateData(j);});e.exports=h;},null);
__d("MessagesViewer",["AsyncRequest","Bootloader","DOM","MessagesViewerSetID","PhotoStore","React","Run","emptyFunction","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p={bootstrapWithElem:function(s){p.bootstrapWithConfig({fbid:s.getAttribute('data-fbid'),dimensions:s.getAttribute('data-dimensions'),src:s.getAttribute('href'),endpoint:s.getAttribute('data-endpoint'),disablePaging:s.getAttribute('data-disablepaging')},s);},bootstrapWithConfig:function(s,t){var u=s.setID;if(!u)u=j.MESSAGES;r(function(v,w){q(l.createElement(v,{dimensions:[s.dimensions],disablepaging:s.disablePaging,disableForward:s.disableForward,open:true,photoid:s.fbid,reverse:false,rootClassName:s.rootClassName,setid:u,snapToPhoto:s.snapToPhoto,thumbsrc:s.src}));if(!k.hasBeenCreated(u)&&s.endpoint){var x=new g(s.endpoint);if(t)x.setRelativeTo(t);x.send();}});},renderVideo:function(s){r(function(t,u){q(l.createElement(u,l.__spread({},s)));});},preload:function(){m.onAfterLoad(function(){return r(n);});}};function q(s){var t=o('messages_viewer');if(!t){t=i.create('div',{id:'messages_viewer'});document.body.appendChild(t);}s=l.render(s,t);s.subscribeOnce('close',function(){l.unmountComponentAtNode(t);});}function r(s){h.loadModules(["SpotlightMessagesViewer","MessagingVideoViewer.react"],s);}e.exports=p;},null);
__d("MercuryLogMessageRenderer",["Bootloader","CSS","HovercardLink","MercuryViewer","MessagesViewer","MercuryLogMessageType","MercuryParticipants","React","Image.react","TextWithEntities.react","TooltipLink.react","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u={renderText:function(ka,la){switch(ka.log_message_type){case l.SUBSCRIBE:x(ka,la);break;case l.UNSUBSCRIBE:ca(ka,la);break;case l.THREAD_NAME:da(ka,la);break;case l.THREAD_IMAGE:ea(ka,la);break;case l.WALLPAPER:fa(ka,la);break;case l.SERVER_ERROR:ga(ka,la);break;case l.GENERIC_ADMIN_TEXT:ha(ka,la);break;default:g.loadModules(["MercurySpecialLogMessageRenderer"],function(ma){ma.renderText(ka,la);});break;}},renderIcon:function(ka){return (n.createElement(o,{className:v(ka),src:t('images/spacer.gif')}));},renderLegacy:function(ka,la,ma,na){v(na).split(' ').forEach(function(oa){return oa&&h.addClass(ka,oa);});this.renderText(na,function(oa){n.render(n.createElement("span",null,oa),la);});this.renderAttachmentLegacy(ma,na);},renderAttachmentLegacy:function(ka,la){if(la.log_message_type==l.THREAD_IMAGE){var ma=la.log_message_data.image;if(ma&&ma.preview_url){n.render(n.createElement(o,{className:"_z6a",onClick:function(){return w(ma);},src:ma.preview_url}),ka);h.show(ka);}}}};e.exports=u;function v(ka){var la=ka.log_message_type,ma=ka.log_message_data;return (("_5wzu")+(la==l.SUBSCRIBE?' '+"_5wzj":'')+(la==l.UNSUBSCRIBE?' '+"_5wzk":'')+(la==l.THREAD_NAME?' '+"_5wzl":'')+(la==l.THREAD_IMAGE?' '+"_5wzm":'')+(la==l.VIDEO_CALL&&ma.answered?' '+"_5wzn":'')+(la==l.VIDEO_CALL&&!ma.answered?' '+"_5wzo":'')+(la==l.PHONE_CALL&&ma.answered?' '+"_5wzp":'')+(la==l.PHONE_CALL&&!ma.answered?' '+"_5wzq":'')+(la==l.SERVER_ERROR?' '+"_5wzr":''));}function w(ka){k.bootstrapWithConfig({src:ka.preview_url,endpoint:ka.url,fbid:ka.metadata.fbid,dimensions:ka.metadata.dimensions,disablePaging:true},null);}function x(ka,la){var ma=ja(ka.log_message_data.added_participants);switch(ma.length){case 1:y(ka,la,ma);break;case 2:z(ka,la,ma);break;case 3:aa(ka,la,ma);break;default:ba(ka,la,ma);break;}}function y(ka,la,ma){var na=[ka.author,ma[0]];m.getMulti(na,function(oa){if(ka.author==j.getID()){la(s._("Du hast {subscriber1} hinzugef\u00fcgt.",[s.param("subscriber1",ia(oa[ma[0]]))]));}else if(ma[0]==j.getID()){la(s._("{actor} hat dich hinzugef\u00fcgt.",[s.param("actor",ia(oa[ka.author]))]));}else la(s._("{actor} hat {subscriber1} hinzugef\u00fcgt.",[s.param("actor",ia(oa[ka.author])),s.param("subscriber1",ia(oa[ma[0]]))]));});}function z(ka,la,ma){var na=[ka.author].concat(ma);m.getMulti(na,function(oa){if(ka.author==j.getID()){la(s._("Du hast {subscriber1} und {subscriber2} hinzugef\u00fcgt.",[s.param("subscriber1",ia(oa[ma[0]])),s.param("subscriber2",ia(oa[ma[1]]))]));}else if(ma[0]==j.getID()){la(s._("{actor} hat dich und {subscriber2} hinzugef\u00fcgt.",[s.param("actor",ia(oa[ka.author])),s.param("subscriber2",ia(oa[ma[1]]))]));}else la(s._("{actor} hat {subscriber1} und {subscriber2} hinzugef\u00fcgt.",[s.param("actor",ia(oa[ka.author])),s.param("subscriber1",ia(oa[ma[0]])),s.param("subscriber2",ia(oa[ma[1]]))]));});}function aa(ka,la,ma){var na=[ka.author].concat(ma);m.getMulti(na,function(oa){if(ka.author==j.getID()){la(s._("Du hast {subscriber1}, {subscriber2} und {subscriber3} hinzugef\u00fcgt.",[s.param("subscriber1",ia(oa[ma[0]])),s.param("subscriber2",ia(oa[ma[1]])),s.param("subscriber3",ia(oa[ma[2]]))]));}else if(ma[0]==j.getID()){la(s._("{actor} hat dich, {subscriber2} und {subscriber3} hinzugef\u00fcgt.",[s.param("actor",ia(oa[ka.author])),s.param("subscriber2",ia(oa[ma[1]])),s.param("subscriber3",ia(oa[ma[2]]))]));}else la(s._("{actor} hat {subscriber1}, {subscriber2} und {subscriber3} hinzugef\u00fcgt.",[s.param("actor",ia(oa[ka.author])),s.param("subscriber1",ia(oa[ma[0]])),s.param("subscriber2",ia(oa[ma[1]])),s.param("subscriber3",ia(oa[ma[2]]))]));});}function ba(ka,la,ma){var na=[ka.author].concat(ma);m.getMulti(na,function(oa){function pa(ra){var sa=n.createElement("div",null,ra.map(function(ta){return n.createElement("div",null,ta.name);}));return (n.createElement(q,{alignH:"center",position:"above",tooltip:sa},s._({"*":"{num} weitere Personen"},[s.param("num",ra.length,[0])])));}var qa=ma.map(function(ra){return oa[ra];});if(ka.author==j.getID()){la(s._("Du hast {subscriber1}, {subscriber2} und {more_people} hinzugef\u00fcgt.",[s.param("subscriber1",ia(qa[0])),s.param("subscriber2",ia(qa[1])),s.param("more_people",pa(qa.slice(2)))]));}else if(ma[0]==j.getID()){la(s._("{actor} hat dich, {subscriber2} und {more_people} hinzugef\u00fcgt.",[s.param("actor",ia(oa[ka.author])),s.param("subscriber2",ia(qa[1])),s.param("more_people",pa(qa.slice(2)))]));}else la(s._("{actor} hat {subscriber1}, {subscriber2} und {more_people} hinzugef\u00fcgt.",[s.param("actor",ia(oa[ka.author])),s.param("subscriber1",ia(qa[0])),s.param("subscriber2",ia(qa[1])),s.param("more_people",pa(qa.slice(2)))]));});}function ca(ka,la){var ma=[ka.author],na=ka.log_message_data.removed_participants,oa;if(na.length===1){oa=na[0];ma.push(oa);}m.getMulti(ma,function(pa){var qa=pa[ka.author],ra=pa[oa];if(ka.author==j.getID()){if(!oa||oa==ka.author){la(s._("Du hast die Unterhaltung verlassen."));}else la(s._("Du hast {name} von der Unterhaltung entfernt.",[s.param("name",ia(ra))]));}else if(!oa||oa==ka.author){la(s._("{actor} hat die Unterhaltung verlassen.",[s.param("actor",ia(qa))]));}else if(oa==j.getID()){la(s._("{actor} hat dich von der Unterhaltung entfernt.",[s.param("actor",ia(qa))]));}else la(s._("{actor} hat {name} von der Unterhaltung entfernt.",[s.param("actor",ia(qa)),s.param("name",ia(ra))]));});}function da(ka,la){var ma=ka.log_message_data.name;if(ka.author==j.getID()){if(ma){la(s._("Du hast die Unterhaltung benannt: {name}.",[s.param("name",n.createElement("span",{className:"_5wzs"},n.createElement(p,{renderEmoticons:true,renderEmoji:true,text:ma})))]));}else la(s._("Du hast den Namen der Unterhaltung entfernt."));}else m.get(ka.author,function(na){var oa=ia(na);if(ma){la(s._("{actor} hat der Unterhaltung einen Namen gegeben: {name}.",[s.param("actor",oa),s.param("name",n.createElement("span",{className:"_5wzs"},ma))]));}else la(s._("{actor} hat den Namen der Unterhaltung entfernt.",[s.param("actor",oa)]));});}function ea(ka,la){if(ka.author==j.getID()){if(ka.log_message_data.image){la(s._("Du hast das Bild dieser Unterhaltung ge\u00e4ndert."));}else la(s._("Du hast das Bild der Unterhaltung entfernt."));}else m.get(ka.author,function(ma){var na=ia(ma);if(ka.log_message_data.image){la(s._("{actor} hat das Bild der Unterhaltung ge\u00e4ndert.",[s.param("actor",na)]));}else la(s._("{actor} hat das Bild der Unterhaltung entfernt.",[s.param("actor",na)]));});}function fa(ka,la){if(ka.author==j.getID()){la(s._("Du hast den Hintergrund ge\u00e4ndert."));}else m.get(ka.author,function(ma){var na=ia(ma);la(s._("{actor} hat den Hintergrund ge\u00e4ndert.",[s.param("actor",na)]));});}function ga(ka,la){la(s._("Vorherige Nachrichten konnten nicht gefunden werden."));}function ha(ka,la){la(ka.log_message_body);}function ia(ka,la){var ma=ka.fbid,na=i.constructEndpoint({id:ma});if(ka.href)return (n.createElement("a",{className:"_5wzt",href:ka.href,"data-hovercard":na},la?ka.short_name:ka.name));return ka.name;}function ja(ka){var la=ka.indexOf(j.getID());if(la>0){var ma=ka.filter(function(na){return na!==j.getID();});return [j.getID()].concat(ma);}return ka;}},null);
__d("MercuryThreadMetadataRawRenderer",["Event","CSS","DOM","MercuryActionStatus","MercuryErrorInfo","MercuryStatusTemplates","TooltipData","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p={renderParticipantListWithNoThreadName:function(q,r,s,t,u,v){var w={callback:true,check_length:true,show_unread_count:true};v=v||{};var x={};for(var y in v)if(w[y]){x[y]=v[y];delete v[y];}var z=s.map(function(ea){return t[ea];}),aa=this.renderRawParticipantList(q,z,s.length,v);aa=this.renderRawTitleWithUnreadCount(aa,x.show_unread_count?r.unread_count:0);var ba=v.abbr_mode,ca={};for(var da in v)ca[da]=v[da];ca.abbr_mode=true;u.forEach(function(ea){var fa=u.length>1?this._cloneIfDOMElement(aa):aa;i.setContent(ea,fa);if(x.check_length&&!ba&&ea.scrollWidth>ea.clientWidth){var ga=this.renderRawParticipantList(q,z,s.length,ca),ha=this.renderRawTitleWithUnreadCount(ga,x.show_unread_count?r.unread_count:0);i.setContent(ea,ha);}}.bind(this));x.callback&&x.callback(aa);},renderRawParticipantList:function(q,r,s,t){var u={abbr_mode:true,last_separator_uses_and:true,names_renderer:true};t=t||{};var v=null;if(t.names_renderer){v=t.names_renderer(r);}else v=r.map(function(x){return x.name;});var w=null;if(v.length===0){if(!q){w=o._("Neue Nachricht");}else w=o._("Keine Teilnehmer");}else if(v.length==1){w=v[0];}else if(v.length==2){if(t.last_separator_uses_and){w=o._("{participant1} und {participant2}",[o.param("participant1",v[0]),o.param("participant2",v[1])]);}else w=o._("{participant1}, {participant2}",[o.param("participant1",v[0]),o.param("participant2",v[1])]);}else if(t.last_separator_uses_and){if(t.abbr_mode){w=o._("{participant1} und {others_link}",[o.param("participant1",v[0]),o.param("others_link",this.renderRawParticipantCount({render_subset:true,count:s-1}))]);}else if(v.length==3){w=o._("{participant1}, {participant2} und {participant3}",[o.param("participant1",v[0]),o.param("participant2",v[1]),o.param("participant3",v[2])]);}else w=o._("{participant1}, {participant2} und {others_link}",[o.param("participant1",v[0]),o.param("participant2",v[1]),o.param("others_link",this.renderRawParticipantCount({render_subset:true,count:s-2}))]);}else if(v.length==3){w=o._("{participant1}, {participant2}, {participant3}",[o.param("participant1",v[0]),o.param("participant2",v[1]),o.param("participant3",v[2])]);}else w=o._("{participant1}, {participant2}, {participant3}, {others_link}",[o.param("participant1",v[0]),o.param("participant2",v[1]),o.param("participant3",v[2]),o.param("others_link",this.renderRawParticipantCount({render_subset:true,count:s-3}))]);if(Array.isArray(w))w=i.create('span',{},w);return w;},renderRawTitleWithUnreadCount:function(q,r){var s=q;if(r&&r>1)s=i.create('span',{},o._("{conversation_title} ({unread_count})",[o.param("conversation_title",q),o.param("unread_count",r)]));return s;},renderRawParticipantCount:function(q){var r=q.render_subset,s;if(!r){s=q.count>1?o._({"*":"{num} Personen"},[o.param("num",q.count,[0])]):o._("1 Person");}else s=q.count>1?o._({"*":"{others_count} weitere Personen"},[o.param("others_count",q.count,[0])]):o._("1 weitere Person");return s;},renderShortNames:function(q){if(q.length==1)return [q[0].name];return q.map(function(r){return r.short_name;});},renderStatusIndicator:function(q,r,s){var t;if(q==j.RESENDING){t=this.renderResendIndicator();}else if(q!==(void 0)&&q!=j.UNSENT&&q!=j.UNCONFIRMED&&q!=j.SUCCESS)t=this.renderErrorIndicator(r,s);return t;},renderResendIndicator:function(){return l[':fb:mercury:resend-indicator'].render();},renderErrorIndicator:function(q,r){if(!q)return null;var s=l[':fb:mercury:error-indicator'].render(),t=q.is_transient,u=k.getMessage(q);if(t)if(k.isConnectionError(q)){u=o._("{message} \u00dcberpr\u00fcfe deine Internetverbindung und klicke, um es erneut zu versuchen.",[o.param("message",u)]);}else u=o._("{message} Zum erneuten Senden klicken.",[o.param("message",u)]);m.set(s,u,'above','center');if(r&&t){g.listen(s,'click',r);s.setAttribute('tabindex','0');h.addClass(s,"_55q-");}return s;},_cloneIfDOMElement:function(q){if(q&&q.cloneNode){return q.cloneNode();}else return q;}};e.exports=p;},null);
__d("MercuryThreadSearchUtils",["escapeRegex","TokenizeUtil"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={wordsInString:function(j){return (j||'').split(/\s+/).filter(function(k){return k.trim().length>0;});},anyMatchPredicate:function(j,k){for(var l=0;l<j.length;l++)if(k(j[l]))return true;return false;},allMatchPredicate:function(j,k){for(var l=0;l<j.length;l++)if(!k(j[l]))return false;return true;},queryWordMatchesAnyNameWord:function(j,k){var l=new RegExp('^'+g(j),'i');return this.anyMatchPredicate(k,function(m){var n=h.parse(m).flatValue;return l.test(n);});},queryMatchesName:function(j,k){var l=this.wordsInString(j),m=this.wordsInString(k);return this.allMatchPredicate(l,function(n){return this.queryWordMatchesAnyNameWord(n,m);}.bind(this));}};e.exports=i;},null);
__d("MercuryMessageGroup",["MercuryActionType","MercuryAttachmentType","MercuryShareAttachmentRenderLocations","MercuryThreadlistConstants","toIterator"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l={calculateMessageGroups:function(o,p){var q=[],r=null,s={value:null},t=k(o),u;while(!(u=t.next()).done){var v=l.canAppendMessageToLastGroup(s.value,u.value,p);if(!v){r=[];q.push(r);}r.push(u.value);s=u;}return q;},canAppendMessageToLastGroup:function(o,p,q){var r=j.GROUPING_THRESHOLD;if(!o||m(o,q)||m(p,q)||o.author!=p.author||o.timestamp<p.timestamp-r||o.is_spoof_warning!==p.is_spoof_warning)return false;return true;}};function m(o,p){var q=o.has_attachment;if(q&&p===i.MESSENGER)q=n(o);return !!(o.action_type==g.LOG_MESSAGE||q||o.forward_count||o.html_body||(o.body&&o.body.length>j.MAX_CHARS_BEFORE_BREAK));}function n(o){var p=o.attachments[0];return (!p||p.attach_type===h.STICKER||p.attach_type===h.ANIMATED_IMAGE);}e.exports=l;},null);
__d("XOfferSetNotificationsController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/offers\/v2\/notifications\/",{offer:{type:"Int",required:true},enable:{type:"Bool",defaultValue:false}});},null);
__d("XOfferSendPlatformNotificationController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/offers\/v2\/send_platform_notification\/",{});},null);
__d("OffersUtil",["DOM","DOMQuery","CSS","Event","AsyncRequest","XOfferSetNotificationsController","XOfferSendPlatformNotificationController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n={attachHideShowClickListener:function(o,p,q){j.listen(o,'click',function(){var r=h.scry(h.getRootElement(),p),s=h.scry(h.getRootElement(),q);for(var t=0;t<r.length;t++)i.hide(r[t]);for(var u=0;u<s.length;u++)i.show(s[u]);});},registerRedirectAfter:function(o,p){setTimeout(function(){window.location.href=o;},p);},attachDeletelLinkClickListener:function(o,p,q,r,s){j.listen(o,'click',function(){new k().setURI(q).setHandler(function(t){var u=t.getPayload();if(u){p.className=r;}else p.className=s;}).send();});},listen:function(o,p){j.listen(o,'click',p.show.bind(p));},showRegistered:function(o,p){j.listen(o,'click',function(){p.show();});},logGoToWebsiteClick:function(o,p){j.listen(o,'click',function(){new k().setURI(p).send();});},sendPlatformNotification:function(){var o=m.getURIBuilder().getURI();new k().setURI(o).send();}};e.exports=n;},null);
__d("SyncRequestNotificationBeeperItemContents.react",["Animation","CloseButton.react","ImageBlock.react","NotificationUserActions","React","SyncRequest.react","SyncRequestStatusEnum","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=k.createClass({displayName:"SyncRequestNotificationBeeperItemContents",_markAsRead:function(){j.markNotificationsAsRead([this.props.beep.notificationID]);this.props.onHide();},_onClose:function(){this._markAsRead();this.props.onHide();},_doFlash:function(){new g(k.findDOMNode(this.refs.inner)).from('opacity','0').to('opacity','1').duration(200).go();},componentDidMount:function(){if(this.props.beep.rendererData.status!=m.PENDING)this.props.onReadyToHide(this.props.beep.notificationID);},componentDidUpdate:function(p){if(this.props.beep.rendererData.status!=m.PENDING&&p.beep.rendererData.status==m.PENDING)this.props.onReadyToHide(this.props.beep.notificationID);},onRequestStatusUpdate:function(p,q){if(p!=m.PENDING&&q==m.PENDING)this.props.onReadyToHide(this.props.beep.notificationID);},render:function(){var p=this.props.beep,q=p.rendererData;return (k.createElement("div",{ref:"inner"},k.createElement(h,{className:"_3soc",onClick:this._onClose,size:"medium"}),k.createElement(i,{className:"_3soj"},k.createElement("img",{src:p.actors[0].profile_picture.uri,className:"_3sok"}),k.createElement("div",{className:"_3sol"},k.createElement(l,{app:q.app,creationTime:q.creation_time,requestId:q.id.toString(),receiver:q.receiver,sender:q.sender,status:q.status,timeout:q.timeout,timeRemaining:q.time_remaining,viewerId:q.receiver.id,onStatusUpdate:this.onRequestStatusUpdate})))));}});e.exports=o;},null);
__d("LiveMessageReceiver",["Arbiter","ChannelConstants","emptyFunction","shield"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();function k(l){this.eventName=l;this.subs=null;this.handler=i;this.shutdownHandler=null;this.registered=false;this.appId=1;}Object.assign(k,{getAppMessageType:function(l,m){return 'live_message/'+l+':'+m;},route:function(l){var m=function(n){var o=k.getAppMessageType(l.app_id,l.event_name);g.inform(o,n,g.BEHAVIOR_PERSISTENT);};m(l.response);}});Object.assign(k.prototype,{setAppId:function(l){this.appId=l;return this;},setHandler:function(l){this.handler=l;this._dirty();return this;},setRestartHandler:i,setShutdownHandler:function(l){this.shutdownHandler=j(l);this._dirty();return this;},_dirty:function(){if(this.registered){this.unregister();this.register();}},register:function(){var l=function(n,o){return this.handler(o);}.bind(this),m=k.getAppMessageType(this.appId,this.eventName);this.subs={};this.subs.main=g.subscribe(m,l);if(this.shutdownHandler)this.subs.shut=g.subscribe(h.ON_SHUTDOWN,this.shutdownHandler);this.registered=true;return this;},unregister:function(){if(!this.subs)return this;for(var l in this.subs)if(this.subs[l])this.subs[l].unsubscribe();this.subs=null;this.registered=false;return this;}});e.exports=k;},null);
__d("initLiveMessageReceiver",["Arbiter","ChannelConstants","LiveMessageReceiver"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();g.subscribe(h.getArbiterType('app_msg'),function(j,k){i.route(k.obj);});},null);
__d("StickerActions",["BanzaiLogger","StickersDispatcher","keyMirror"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=i({ADD_PACK:null,CLICKED_STICKER_IN_THREAD:null,HIDE_TRAY:null,REMOVE_PACK:null,REPLACE_STICKER_STATE:null,RESET_NUM_NEW_PACKS:null,SELECT_PACK:null,SELECT_STORE_PACK:null,SHOW_TRAY:null,UPDATE_TRAY_DATA:null,TRAY_DATA_READY:null}),k={Types:j,addPack:function(l){h.dispatch({type:j.ADD_PACK,packID:l});},removePack:function(l){h.dispatch({type:j.REMOVE_PACK,packID:l});},selectPack:function(l,m){if(!m)g.log('StickersLoggerConfig',{event:'select_pack',packid:l});h.dispatch({type:j.SELECT_PACK,packID:l});},selectStorePack:function(l){h.dispatch({type:j.SELECT_STORE_PACK,packID:l});},resetNumNewPacks:function(){h.dispatch({type:j.RESET_NUM_NEW_PACKS});},handleStickerClick:function(l,m){h.dispatch({packID:l,threadID:m,type:k.Types.CLICKED_STICKER_IN_THREAD});},showStickerTray:function(l){h.dispatch({type:k.Types.SHOW_TRAY,threadID:l});},hideStickerTray:function(){h.dispatch({type:k.Types.HIDE_TRAY});},updateTrayData:function(){h.dispatch({type:k.Types.UPDATE_TRAY_DATA});},loadedTrayData:function(){h.dispatch({type:k.Types.TRAY_DATA_READY});}};e.exports=k;},null);
__d("XStickerPackImagesController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/{pack_id}\/images\/",{pack_id:{type:"Int",required:true},sticker_size:{type:"Int",defaultValue:50}});},null);
__d("XStickersAddPackController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/addpack\/",{pack_id:{type:"Int"},size:{type:"String"},redirect_uri:{type:"String"},is_promoted:{type:"Bool",defaultValue:false}});},null);
__d("XStickersRemovePackController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/removepack\/",{pack_id:{type:"Int"},size:{type:"String"},redirect_uri:{type:"String"}});},null);
__d("XStickerStateInitialDataController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/state\/",{});},null);
__d("XStickerStatePackDataController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/state\/pack\/",{pack_id:{type:"Int",required:true}});},null);
__d("XStickerStateStoreDataController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/state\/store\/",{});},null);
__d("XStickerSearchPromotePackController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/search\/promotePack\/",{sticker_id:{type:"Int",required:true}});},null);
__d("XStickerSearchNUXSeenController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/searchNUX\/seen\/",{});},null);
__d("XStickerTagDataController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/tag\/data\/",{});},null);
__d("XStickerQueryImagesController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/query\/images\/",{query:{type:"String",required:true}});},null);
__d("StickerServerRequests",["AsyncRequest","Promise","XStickerPackImagesController","XStickersAddPackController","XStickersRemovePackController","XStickerStateInitialDataController","XStickerStatePackDataController","XStickerStateStoreDataController","XStickerSearchPromotePackController","XStickerSearchNUXSeenController","XStickerTagDataController","XStickerQueryImagesController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();'use strict';var s={addPack:function(u,v,w){var x=j.getURIBuilder().setInt('pack_id',u).setBool('is_promoted',v).getURI();new g(x).setHandler(function(y){return w(y.payload);}).send();},removePack:function(u,v){var w=k.getURIBuilder().setInt('pack_id',u).getURI();new g(w).setHandler(function(x){return v(x.payload);}).send();},getStickersForPack:function(u,v){var w=i.getURIBuilder().setInt('pack_id',u).setInt('sticker_size',v).getURI();return new h(function(x,y){return new g().setURI(w).setMethod("POST").setHandler(function(z){return x(z.payload);}).send();});},getStickersForQuery:function(u,v){new g().setURI(r.getURIBuilder().setString('query',u).getURI()).setMethod("POST").setHandler(function(w){return v(w);}).send();},fetchTrayData:function(u){return t(l.getURIBuilder().getURI(),u,true);},fetchStoreData:function(u){return t(n.getURIBuilder().getURI(),u);},fetchPackData:function(u,v){return t(m.getURIBuilder().setInt('pack_id',u).getURI(),v);},fetchTagData:function(u){return t(q.getURIBuilder().getURI(),u,true);},markSeenSearchNUX:function(){new g(p.getURIBuilder().getURI().toString()).send();},promotePackSentFromSearch:function(u,v){var w=o.getURIBuilder().setInt('sticker_id',u).getURI();t(w,v,true);}};function t(u,v,w){return new h(function(x,y){return new g(u).setHandler(function(z){return x(z.getPayload());}).setAllowCrossPageTransition(w).send();}).then(v);}e.exports=s;},null);
__d("StickerImages",["StickerServerRequests"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h={},i={},j={},k={getStickerTagsData:function(){return j;},requestStickersForPack:function(l,m,n){if(!l)return;if(!i[l]){i[l]=g.getStickersForPack(l,m);i[l].then(function(o){o.forEach(function(p){return this.cacheSticker(p);}.bind(this));}.bind(this));}i[l].then(function(o){return n(o);});},cacheSticker:function(l){h[l.id]=l;},getSticker:function(l){return h[l];}};e.exports=k;},null);
__d("StickerState",["ImmutableObject","StickerConfig","PresenceState","StickerActions","StickerConstants","StickerImages","StickerServerRequests"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n={},o,p,q,r=null,s=0,t={},u=[],v=[],w=[],x=null,y=null,z=i.get();if(z)x=z.tray_pack_id;var aa=h.ShowStickerReplyNUX,ba=h.ShowStickerSearchNUX,ca={onTrayDataReady:function(ea){if(!p)p=m.fetchTrayData(function(fa){u=fa.packs.map(function(ga){return da(ga);});q=fa.mru;s=fa.num_new_packs;w=fa.tags;});p.then(function(){ea();j.loadedTrayData();});},onStoreDataReady:function(ea){if(!o)o=m.fetchStoreData(function(fa){v=fa.packs.map(function(ga){return da(ga);});});o.then(ea);},onPackDataReady:function(ea,fa){if(!n[ea])n[ea]=m.fetchPackData(ea,function(ga){da(ga);});n[ea].then(fa);},getPacksInTrayAllInterfaces:function(){return u;},getPacksInTray:function(){var ea=[],fa;for(var ga=0;ga<u.length;ga++)if(u[ga].id==k.EMOTICON_PACK_ID){fa=u[ga];}else if(u[ga].isMessengerCapable)ea.push(u[ga]);fa&&ea.push(fa);return ea;},getPacksInCommentsTray:function(){var ea=[],fa=[],ga;for(var ha=0;ha<u.length;ha++)if(u[ha].id==k.EMOTICON_PACK_ID){ga=u[ha];}else if(u[ha].isCommentsCapable){ea.push(u[ha]);}else fa.push(u[ha]);var ia=ea.concat(fa);if(ga)ia.push(ga);return ia;},getPacksInComposerTray:function(){return u.filter(function(ea){return ea.isComposerCapable;});},getPackIDsInTray:function(){return u.map(function(ea){return ea.id;});},getPacksInStore:function(){return v.filter(function(ea){return ea.isMessengerCapable;});},getComposerPacksInStore:function(){return v.filter(function(ea){return ea.isComposerCapable;});},getPack:function(ea){return t[ea];},getNumNewPacks:function(){return s;},getFeaturedTags:function(){return w;},resetNumNewPacks:function(){if(s){s=0;this.emit(this.NUM_NEW_PACKS_CHANGED,0);}},addMRUPack:function(){if(q){this._addPackToTray(q);q=null;}},addPack:function(ea){var fa=false;if(t[ea])fa=t[ea].isPromoted;m.addPack(ea,fa,function(ga){this._addPackToTray(ga);}.bind(this));},removePack:function(ea){m.removePack(ea,function(fa){u=u.filter(function(ga){return ga.id!==fa;});t[fa]=g.set(t[fa],{isInTray:false});v=v.map(function(ga){return t[ga.id];});j.updateTrayData();}.bind(this));},setTrayPackID:function(ea){x=ea;i.doSync();},getTrayPackID:function(ea){if(ea&&ea.length>0&&!ea.some(function(fa){return fa.id===x;})){return ea[0].id;}else return x;},setStorePackID:function(ea){y=ea;},getStorePackID:function(){return y;},shouldShowStickerReplyNUX:function(){return aa;},clearShowStickerReplyNUX:function(){aa=false;},shouldShowStickerSearchNUX:function(){return ba;},clearShowStickerSearchNUX:function(){m.markSeenSearchNUX();ba=false;},_addPackToTray:function(ea,fa){da(ea);t[ea.id]=g.set(t[ea.id],{isPurchased:!fa,isInTray:true});var ga=u.filter(function(ia){return ia.id===ea.id;}).length>0;if(!ga){var ha;if(!fa){ha=u.filter(function(ia){return ia.isMRU||ia.isSearch;}).length;}else ha=u.filter(function(ia){return ia.id!==k.EMOTICON_PACK_ID;}).length;u.splice(ha,0,t[ea.id]);}v=v.map(function(ia){return t[ia.id];});j.updateTrayData();},_addRecentlyUsedSticker:function(ea){for(var fa=0;fa<r.length;++fa)if(r[fa].id===ea.id){r.splice(fa,1);break;}r.unshift(ea);},getMRUStickerPack:function(ea){if(!r)r=ea;return r;},updateRecentlyUsed:function(ea){if(!r){this.addMRUPack();return;}this._addRecentlyUsedSticker(l.getSticker(ea));},promotePackSentFromSearch:function(ea){m.promotePackSentFromSearch(ea,function(fa){return fa&&this._addPackToTray(fa,true);}.bind(this));}};i.registerStateStorer(function(ea){ea.tray_pack_id=x;});function da(ea){var fa=ea.id;if(!t[fa]){return (t[fa]=new g(ea));}else return (t[fa]=g.set(t[fa],ea));}e.exports=ca;},null);
__d("DialogFitHeight",["AbstractDialogFitHeight"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(){"use strict";if(g!==null)g.apply(this,arguments);}j.prototype.getHeightProperty=function(){"use strict";return 'height';};e.exports=j;},null);
__d("StickerStoreController",["Bootloader","DialogFitHeight","DOM","LayerAutoFocus","LayerFadeOnHide","LayerHideOnEscape","React","ReactComponentRenderer","StickerActions","XUIDialog.react","XUIDialogBody.react","XUISpinner.react","cx","requestAnimationFrame"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();'use strict';var u=m,v=u.PropTypes,w=688,x=null,y=m.createClass({displayName:"StoreLayer",propTypes:{isComposer:v.bool,shown:v.bool},getDefaultProps:function(){return {isComposer:false,shown:false};},getInitialState:function(){return {renderStore:function(){return (m.createElement("div",{className:"_5r5e"},m.createElement(r,{background:"light",size:"large"})));}};},componentDidMount:function(){g.loadModules(["StickerStore.react"],function(ba){this.setState({renderStore:function(){return (m.createElement(ba,{isComposer:this.props.isComposer,shown:this.props.shown}));}.bind(this)});}.bind(this));},_onToggle:function(ba){t(this.setProps.bind(this,{shown:ba},null));},render:function(){return (m.createElement(p,{behaviors:{DialogFitHeight:h,LayerAutoFocus:j,LayerFadeOnHide:k,LayerHideOnEscape:l},onToggle:this._onToggle,shown:this.props.shown,width:w},m.createElement(q,{className:"_5rq- autofocus"},this.state.renderStore())));}});function z(ba){var ca=i.create('div');i.appendContent(document.body,ca);x=new n(y,ca);x.setProps({isComposer:ba,shown:true});}var aa={showStore:function(ba,ca){if(!x){z(!!ca);}else x.setProps({shown:true,isComposer:!!ca});o.selectStorePack(ba);}};e.exports=aa;},null);
__d("StickerStateStore",["FluxStore","StickerActions","StickerInterfaces","StickersDispatcher","StickerState","StickerStoreController","arrayContains"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';for(var n in g)if(g.hasOwnProperty(n))p[n]=g[n];var o=g===null?null:g.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=g;function p(){g.call(this,j);this.$StickerStateStore0=false;}p.prototype.getState=function(q){var r=null;if(q===i.COMPOSER){r=k.getPacksInComposerTray();}else if(q===i.COMMENTS){r=k.getPacksInCommentsTray();}else r=k.getPacksInTray();return {showTray:this.$StickerStateStore1,storePackID:k.getStorePackID(),packID:k.getTrayPackID(r),trayPacks:r,numNewPacks:k.getNumNewPacks(),threadID:this.$StickerStateStore2,trayDataReady:this.$StickerStateStore0};};p.prototype.isPackInTray=function(q){var r=k.getPacksInTrayAllInterfaces();return r.some(function(s){return s.id===q;});};p.prototype.__onDispatch=function(q){var r=h.Types;switch(q.type){case r.REPLACE_STICKER_STATE:this.$StickerStateStore1=!!q.showTray;break;case r.SHOW_TRAY:this.$StickerStateStore1=true;this.$StickerStateStore2=q.threadID;break;case r.HIDE_TRAY:this.$StickerStateStore1=false;break;case r.CLICKED_STICKER_IN_THREAD:k.onTrayDataReady(function(){if(m(k.getPackIDsInTray(),q.packID)){k.setTrayPackID(q.packID);this.$StickerStateStore1=true;this.$StickerStateStore2=q.threadID;}else{this.$StickerStateStore1=false;l.showStore(q.packID);}}.bind(this));break;case r.SELECT_PACK:k.setTrayPackID(q.packID);break;case r.SELECT_STORE_PACK:k.setStorePackID(q.packID);break;case r.RESET_NUM_NEW_PACKS:k.resetNumNewPacks();break;case r.ADD_PACK:k.addPack(q.packID);break;case r.REMOVE_PACK:k.removePack(q.packID);break;case r.UPDATE_TRAY_DATA:break;case r.TRAY_DATA_READY:this.$StickerStateStore0=true;break;}this.__emitChange();};e.exports=new p();},null);
__d("legacy:CompactTypeaheadRenderer",["CompactTypeaheadRenderer"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();if(!a.TypeaheadRenderers)a.TypeaheadRenderers={};a.TypeaheadRenderers.compact=b('CompactTypeaheadRenderer');},3);
__d("XNFXStartForMessageThreadController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/nfx\/start_message_thread\/",{thread_fbid:{type:"String",required:true},responsible_fbid:{type:"Int"},av:{type:"Int"},location:{type:"Enum",enumType:1},__asyncDialog:{type:"Int"}});},null);