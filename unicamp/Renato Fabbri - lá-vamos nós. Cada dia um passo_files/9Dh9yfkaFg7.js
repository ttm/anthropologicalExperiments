/*!CK:956457571!*//*1436882312,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["6jp5Z"]); }

__d("ComposerTargetType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={SELF_USER:"feed",OTHER_USER:"wall",GROUP:"group",PAGE:"page",EVENT:"event",EXAMPLE:"example"};},null);
__d("ComposerType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={INLINE:"inline",ADVANCED:"advanced",NORMAL:"normal"};},null);
__d("ComposerWaterfallEvent",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={COMPOSER_CANCEL:"composer_cancel",COMPOSER_CANCEL_INTENT:"intent_composer_cancel",COMPOSER_ENTRY:"composer_entry",COMPOSER_NOT_RENDERED:"composer_not_renderer",COMPOSER_POST:"composer_post",COMPOSER_POST_CANCEL:"composer_post_cancel",COMPOSER_POST_FAILURE:"composer_post_failure",COMPOSER_POST_FAILURE_FATAL:"composer_post_fatal_failure",COMPOSER_POST_FAILURE_GIVEUP:"composer_post_giveup_failure",COMPOSER_POST_SUCCESS:"composer_post_success",COMPOSER_POST_COMPLETED:"composer_post_completed",COMPOSER_WRITTEN:"composer_written",ALBUM_ADD:"add_album",ALBUM_CANCEL:"cancel_album",ALBUM_INTENT:"intent_album",ALBUM_REMOVE:"remove_album",FRIEND_TAG_ADD:"add_friend_tag",FRIEND_TAG_CANCEL:"cancel_friend_tag",FRIEND_TAG_INTENT:"intent_friend_tag",FRIEND_TAG_REMOVE:"remove_friend_tag",FRIEND_TAG_SEARCH:"search_friend_tag",FRIEND_SHOW_MORE:"show_more_friend_tag",LOCATION_ADD:"add_location",LOCATION_CANCEL:"cancel_location",LOCATION_INTENT:"intent_location",LOCATION_REMOVE:"remove_location",LOCATION_SCROLL:"scroll_location",LOCATION_SEARCH:"search_location",EMBEDS_ADD:"add_embed",EMBEDS_CANCEL:"cancel_embed",EMBEDS_INTENT:"intent_embed",MINUTIAE_ADD:"add_minutiae",MINUTIAE_CANCEL:"cancel_minutiae",MINUTIAE_CHANGE_ICON:"change_icon_minutiae",MINUTIAE_CHANGE_ICON_CANCEL:"change_icon_cancel_minutiae",MINUTIAE_CHANGE_ICON_INTENT:"change_icon_intent_minutiae",MINUTIAE_INTENT:"intent_minutiae",MINUTIAE_REMOVE:"remove_minutiae",MINUTIAE_SCROLL:"scroll_minutiae",MINUTIAE_SEARCH:"search_minutiae",MINUTIAE_TYPE_CLICK:"type_click_minutiae",MINUTIAE_SEE_MORE:"see_more_minutiae",MINUTIAE_CHAIN_SKIP:"skip_chain_minutiae",MINUTIAE_CHAIN_SUGGEST:"suggest_chain_minutiae",MINUTIAE_ICONPICKER_QUERY:"minutiae_iconpicker_query",MINUTIAE_ICONPICKER_BOOTSTRAP:"minutiae_iconpicker_bootstrap",MINUTIAE_ICONPICKER_SELECT:"minutiae_iconpicker_select",MEDIA_INTENT:"intent_media",MEDIA_CANCEL:"cancel_media",PHOTO_ADD:"add_photo",PHOTO_ADD_FAILURE:"add_photo_failure",PHOTO_ADD_SUCCESS:"add_photo_success",PHOTO_REMOVE:"remove_photo",PRIVACY_ADD:"add_privacy",PRIVACY_CANCEL:"cancel_privacy",PRIVACY_INTENT:"intent_privacy",PRIVACY_SCROLL:"scroll_privacy",PRIVACY_SEE_ALL_LISTS:"see_all_lists_privacy",SELECT_FRIEND_TIMELINE_INTENT:"intent_select_friend_timeline",SELECT_FRIEND_TIMELINE_ADD:"add_select_friend_timeline",SELECT_FRIEND_TIMELINE_CANCEL:"cancel_select_friend_timeline",SERVER_POST_BEGIN:"server_composer_post_begin",SERVER_POST_FAILURE:"server_composer_post_failure",SERVER_POST_SUCCESS:"server_composer_post_succeeded",POST_POST_WITH_TAG_BEGIN:"post_post_with_tag_begin",POST_POST_WITH_TAG_FAILURE:"post_post_with_tag_failure",POST_POST_WITH_TAG_SUCCESS:"post_post_with_tag_success",TARGET_SELECTOR_INTENT:"intent_target_selector",TARGET_SELECTOR_CANCEL:"cancel_target_selector",VIDEO_ADD:"add_video",VIDEO_ADD_FAILURE:"add_video_failure",VIDEO_ADD_SUCCESS:"add_video_success",VIDEO_REMOVE:"remove_video"};},null);
__d("PUWApplications",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={WEB_SIMPLE:"web_simple",WEB_FLASH:"web_flash",WEB_HTML5:"web_html5",WEB_COMPOSER:"web_composer",WEB_ARCHIVE:"web_archive",WEB_MESSENGER:"web_messenger",WEB_OMNIPICKER:"web_omnipicker",WEB_MUSE_OMNIPICKER:"web_muse_omnipicker",WEB_SAY_THANKS:"web_say_thanks",WEB_GOODWILL_CAMPAIGN_OMNIPICKER:"web_goodwill_campaign_omnipicker",WEB_PRODUCT_PHOTO_OMNIPICKER:"web_product_photo_omnipicker",WEB_M_ZERO:"web_m_zero",WEB_M_BASIC:"web_m_basic",WEB_M_TOUCH:"web_m_touch",WEB_REACT_COMPOSER:"web_react_composer",MOBILE_FB4IOS:"mobile_fb4ios",MOBILE_FB4IOS_SNAP:"mobile_fb4ios_snap",MOBILE_FB4A:"mobile_fb4a",MOBILE_PMA_ANDROID:"mobile_pma_android",MOBILE_PMA_IOS:"mobile_pma_ios",THIRD_PARTY:"third_party"};},null);
__d("PUWSteps",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={CLIENT_FLOW_BEGIN:"client_flow_begin",CLIENT_SELECT_BEGIN:"client_select_begin",CLIENT_SELECT_SUCCESS:"client_select_success",CLIENT_SELECT_CANCEL:"client_select_cancel",CLIENT_SELECT_FAIL:"client_select_fail",CLIENT_FLOW_POST:"client_flow_post",CLIENT_TRANSFER_BATCH_BEGIN:"client_transfer_batch_begin",CLIENT_UPLOAD_BEGIN:"client_upload_begin",CLIENT_ATTACH_PHOTO:"client_attach_photo",CLIENT_PROCESS_BEGIN:"client_process_begin",CLIENT_PROCESS_SUCCESS:"client_process_success",CLIENT_PROCESS_CANCEL:"client_process_cancel",CLIENT_PROCESS_SKIP:"client_process_skip",CLIENT_PROCESS_FAIL:"client_process_fail",CLIENT_PROCESS_UNAVAILABLE:"client_process_unavailable",CLIENT_TRANSFER_ENQUEUE:"client_transfer_enqueue",CLIENT_TRANSFER_BEGIN:"client_transfer_begin",CLIENT_TRANSFER_SUCCESS:"client_transfer_success",CLIENT_TRANSFER_CANCEL:"client_transfer_cancel",CLIENT_TRANSFER_FAIL:"client_transfer_fail",CLIENT_TRANSFER_MANUAL_RETRY:"client_transfer_manual_retry",CLIENT_UPLOAD_SUCCESS:"client_upload_success",CLIENT_UPLOAD_FAIL:"client_upload_fail",CLIENT_UPLOAD_CANCEL:"client_upload_cancel",CLIENT_UPLOAD_REMOVE:"client_upload_remove",CLIENT_FACEREC_BEGIN:"client_facerec_begin",CLIENT_FACEREC_SUCCESS:"client_facerec_success",CLIENT_FACEREC_FAIL:"client_facerec_fail",CLIENT_PHOTO_PREVIEW_OPEN:"client_photo_preview_open",CLIENT_PHOTO_PREVIEW_CLOSE:"client_photo_preview_close",CLIENT_TRANSFER_BATCH_SUCCESS:"client_transfer_batch_success",CLIENT_TRANSFER_BATCH_CANCEL:"client_transfer_batch_cancel",CLIENT_TRANSFER_BATCH_FAIL:"client_transfer_batch_fail",CLIENT_PUBLISH_ENQUEUE:"client_publish_enqueue",CLIENT_PUBLISH_BEGIN:"client_publish_begin",CLIENT_PUBLISH_SUCCESS:"client_publish_success",CLIENT_PUBLISH_FAIL:"client_publish_fail",CLIENT_ATTEMPT_FAIL:"client_attempt_fail",CLIENT_FLOW_SUCCESS:"client_flow_success",CLIENT_FLOW_FATAL:"client_flow_fatal",CLIENT_FLOW_GIVEUP:"client_flow_giveup",CLIENT_FLOW_CANCEL:"client_flow_cancel",CLIENT_FLOW_FAIL:"client_flow_fail",CLIENT_FLOW_INCOMPLETE:"client_flow_incomplete",CLIENT_ATTEMPT_INCOMPLETE:"client_attempt_incomplete",CLIENT_FLOW_RETRY:"client_flow_retry",CLIENT_ATTEMPT_RETRY:"client_attempt_retry",CLIENT_DIAGNOSTIC:"client_diagnostic",CLIENT_QUALITY_SWITCH:"client_quality_switch",CLIENT_CANCEL_SURVEY:"client_cancel_survey",CLIENT_PHOTO_EDIT_BEGIN:"client_photo_edit_begin",CLIENT_PHOTO_EDIT_SUCCESS:"client_photo_edit_success",SERVER_UPLOAD_BEGIN:"server_upload_begin",SERVER_UPLOAD_SUCCESS:"server_upload_success",SERVER_UPLOAD_FAIL:"server_upload_fail",SERVER_PUBLISH_BEGIN:"server_publish_begin",SERVER_PUBLISH_SUCCESS:"server_publish_success",SERVER_PUBLISH_FAIL:"server_publish_fail",SERVER_RECEIVER_BEGIN:"server_receiver_begin",SERVER_RECEIVER_PUBLISH_BEGIN:"server_receiver_publish_begin",SERVER_SENTRY_RESTRICTION:"server_sentry_restriction"};},null);
__d("TagExpansionButtonConfig",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={FRIENDS_OF_TAGGED:"friends_of_tagged",TAGGED_ONLY:"tagged_only"};},null);
__d("ComposerXStore",["Arbiter","ge"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={};function j(l,m){return 'ComposerX/'+l+'/'+m;}var k={set:function(l,m,n){if(!i[l])i[l]={};i[l][m]=n;g.inform(j(l,m),{},g.BEHAVIOR_STATE);},get:function(l,m){if(i[l])return i[l][m];return null;},getAllForComposer:function(l){return i[l]||{};},waitForComponents:function(l,m,n){g.registerCallback(n,m.map(j.bind(null,l)));}};g.subscribe('page_transition',function(){for(var l in i)if(!h(l))delete i[l];});e.exports=k;},null);
__d("fileSliceName",["UserAgent_DEPRECATED"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h='slice',i;if(i=g.chrome()){if(i<21)h='webkitSlice';}else if(i=g.firefox()){if(i<13)h='mozSlice';}else if(!(i=g.safari()))if(g.webkit())h='webkitSlice';e.exports=h;},null);
__d("fileSlice",["fileSliceName"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=a.File&&a.File.prototype[g];e.exports=h;},null);
__d("VideoUploadFeatureDetector",["UserAgent_DEPRECATED","fileSlice"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={supportsChunking:function(){return (typeof h==='function')&&this.supportsXHR();},supportsFullProgress:function(){return !g.firefox();},supportsFileAPI:function(){return ('FileList' in window);},supportsFileReading:function(){return ('FileReader' in window&&'DataView' in window);},supportsXHR:function(){return ('FormData' in window);}};e.exports=i;},null);
__d("ComposerXDragDropUtils",["Arbiter","CSS","DOMQuery","Parent","VideoUploadFeatureDetector","csx","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n={handleDragEnterAndLeave:function(o){var p=i.scry(j.byClass(o,"_119"),"._2wr");g.subscribe('dragenter',function(q,r){if(o==r.element)p.forEach(h.hide);});g.subscribe('dragleave',function(q,r){if(o==r.element)p.forEach(h.show);});},filterImages:function(o){var p=k.supportsFileAPI(),q=[];for(var r=0;r<o.length;r++)if(o[r].type.match('image/*')){q.push(o[r]);}else if(p&&o[r].type.match('video/*'))q.push(o[r]);return q;}};e.exports=n;},null);
__d("uuid",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(){return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(h){var i=Math.random()*16|0,j=h=='x'?i:(i&3|8);return j.toString(16);});}e.exports=g;},null);
__d("ComposerXSessionIDs",["DOM","cx","uuid"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={},k={getSessionID:function(l){return j[l];},resetSessionID:function(l){j[l]=i();},createSessionIDInput:function(l){return g.create('input',{type:'hidden',name:'composer_session_id',className:"_5r_b",value:l});}};e.exports=k;},null);
__d("ShareModeConst",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={SELF_PAGE:'selfpage',PAGE:'page',SELF_POST:'self',FRIEND:'friend',GROUP:'group',ALBUM:'album',MESSAGE:'message',ONE_CLICK:'oneclick',EVENT:'event',UNKNOWN:'unknown'};e.exports=g;},null);
__d("ComposerXMarauderLogger",["Event","ComposerTargetType","ComposerType","ComposerWaterfallEvent","ComposerXSessionIDs","MarauderLogger","ShareModeConst"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n={},o=i.NORMAL,p={logEvent:function(q,r,s){if(!s)s={};var t=n[r],u=k.getSessionID(r);if(!t||!u)return;if(s.logOncePerSession){if(!t.loggedEventTypes[u])t.loggedEventTypes[u]={};if(t.loggedEventTypes[u][q])return;t.loggedEventTypes[u][q]=true;}var v=Object.assign({},s.extraData,{composer_type:o,composer_version:t.composerVersion,target_type:t.targetType,target_id:t.targetID,ref:t.entryPointRef});if(s.logDetails){v.has_photo=t.hasPhoto;v.has_video=t.hasVideo;v.xy_tag_count=t.numXYTags;v.with_tag_count=t.numWithTags;v.tags_user=t.numUserTags;}l.log(q,'composer',v,(void 0),(void 0),u);},registerComposer:function(q,r,s,t,u){n[q.id]={targetID:u,targetType:r,entryPointRef:s,composerVersion:t,loggedEventTypes:{},hasPhoto:false,hasVideo:false,numWithTags:0,numXYTags:0,numUserTags:0};},getInstance:function(q){return n[q];},updateHasPhoto:function(q,r){if(!n[q])return;n[q].hasPhoto=r;},updateHasVideo:function(q,r){if(!n[q])return;n[q].hasVideo=r;},updateNumWithTags:function(q,r){if(!n[q])return;n[q].numWithTags=r;},updateNumXYTags:function(q,r){if(!n[q])return;n[q].numXYTags=r;n[q].numWithTags=n[q].numWithTags-r;},updateNumUserTags:function(q,r){if(!n[q])return;n[q].numUserTags=r;},listenForPostEvents:function(q,r){if(!r)return [];return [g.listen(r,'submit',function(){p.logPost(q);}),g.listen(r,'success',function(){p.logPostSuccess(q);}),g.listen(r,'error',function(event){p.logPostFailure(q,{error_info:{error_code:event.data.response.error,error_description:event.data.response.errorDescription,error_summary:event.data.response.errorSummary}});})];},setShareMode:function(q,r){var s=n[q];if(!s)return;switch(r){case m.SELF_POST:s.targetType=h.SELF_USER;break;case m.FRIEND:s.targetType=h.OTHER_USER;break;case m.PAGE:case m.SELF_PAGE:s.targetType=h.PAGE;break;case m.GROUP:s.targetType=h.GROUP;break;default:s.targetType=h.OTHER;}},logEntry:function(q,r){if(typeof r==='string')return;p.logEvent(j.COMPOSER_ENTRY,q,{logOncePerSession:true,extraData:r});},logCompleted:function(q,r){p.logEvent(j.COMPOSER_POST_COMPLETED,q,{extraData:r});},logPost:function(q,r){p.logEvent(j.COMPOSER_POST,q,{extraData:r});},logPostSuccess:function(q,r){p.logEvent(j.COMPOSER_POST_SUCCESS,q,{extraData:r});},logPostFailure:function(q,r){p.logEvent(j.COMPOSER_POST_FAILURE,q,{extraData:r});}};e.exports=p;},null);
__d("filterObject",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g=Object.prototype.hasOwnProperty;function h(i,j,k){if(!i)return null;var l={};for(var m in i)if(g.call(i,m)&&j.call(k,i[m],m,i))l[m]=i[m];return l;}e.exports=h;},null);
__d("PhotosUploadWaterfallXMixin",["AsyncSignal","Banzai","Map","PhotosUploadWaterfallXConfig","Set","invariant","randomInt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=new i();function o(q,r){var s={};q.client_time=Math.round(Date.now()/1000);if(j.retryBanzai){s.retry=true;q.nonce=m(4294967296);}h.post(j.banzaiRoute,q,s);if(r)setTimeout(r,0);}function p(q,r){if(j.useBanzai){o(q,r);}else{var s=new g(j.loggingEndpoint,{data:JSON.stringify(q)}).setHandler(r);if(j.timeout)s.setTimeout(10*1000);s.send();}}e.exports={logStep:function(q,r,s){var t=this.getWaterfallID&&this.getWaterfallID(),u=this.getWaterfallAppName&&this.getWaterfallAppName();if(!t||!u)return;p(Object.assign({step:q,qn:t,uploader:u,ref:this.getWaterfallSource&&this.getWaterfallSource()},r),s);},logPUWStep:function(q,r,s,t,u,v,w){if(v&&v.logOncePerSession){if(!n.has(r))n.set(r,new k());if(n.get(r).has(q))return;n.get(r).add(q);}p(Object.assign({step:q,qn:r,uploader:s,ref:t},u),w);}};},null);
__d("LitestandComposer",["Arbiter","Bootloader","ReactComposerIDGenerator","Run","SubscriptionsHandler"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=600;function m(o,p){h.loadModules(["Animation","ComposerXController","ComposerXMarauderLogger","DOM","LitestandStream"],function(q,r,s,t,u){if(!i.isComposerID(o))r.reset(o);if(!u||!p)return;t.prependContent(u.getStreamRoot(),p);new q(p).from('opacity',0).to('opacity',1).duration(l).go();s.logCompleted(o);});}var n={initComposer:function(o){var p=new k();p.addSubscriptions(g.subscribe('LitestandComposer/publish',function(q,r){if(r.composer_id===o)m(o,r.markup);}.bind(this)));j.onLeave(function(){p.release();});}};e.exports=n;},null);
__d("XUIError",["ARIA","Bootloader","CSS","DataStore","DOM","Event","JSXDOM","Parent","Promise","cx","filterObject","getActiveElement","getElementText","invariant","isNode","memoize","nl2br"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){b.__markCompiled&&b.__markCompiled();'use strict';var x='data-xui-error-alignh',y='XUIError',z='data-xui-error',aa="_1tp7",ba='data-xui-error-position';l.listen(document.documentElement,'mouseover',function(event){if(n.byClass(r(),aa))return;var pa=n.byClass(event.getTarget(),aa);if(pa){la(pa);}else ma();});l.listen(document.documentElement,'focusin',function(event){var pa=n.byClass(event.getTarget(),aa);if(pa){la(pa);}else ma();});l.listen(document.documentElement,'focusout',function(event){ma();});var ca=v(function(){return new o(function(pa,qa){h.loadModules(["ContextualDialog","ContextualLayerAutoFlip","ContextualLayerUpdateOnScroll","LayerRefocusOnHide","React"],function(ra,sa,ta,ua,va){var wa={ContextualDialog:ra,ContextualLayerAutoFlip:sa,ContextualLayerUpdateOnScroll:ta,LayerRefocusOnHide:ua,React:va};pa(Object.assign({},wa,da(wa)));});});});function da(pa){var qa=pa.ContextualDialog,ra=pa.ContextualLayerAutoFlip,sa=pa.ContextualLayerUpdateOnScroll,ta=pa.LayerRefocusOnHide,ua=m.div({className:"_1tp8"}),va=(m.div({className:"_53ij _1tp9"},m.div({className:"_1tpa"}),ua)),wa=new qa({addedBehaviors:[sa,ra],theme:{wrapperClassName:"_1tpb",arrowDimensions:{offset:12,length:16}}},va);wa.disableBehavior(ta);wa.shouldSetARIAProperties(false);return {dialog:wa,dialogBodyNode:va,dialogMessageNode:ua};}var ea=null;function fa(pa){return Object.assign({message:pa.getAttribute(z),position:pa.getAttribute(ba),alignh:pa.getAttribute(x)},j.get(pa,y));}function ga(pa,qa){j.set(pa,y,qa);}function ha(pa,qa){j.set(pa,y,Object.assign({},j.get(pa,y),qa));}function ia(pa){j.remove(pa,y);}var ja=false,ka=false;function la(pa){ca().done(function(qa){var ra=qa.React,sa=qa.dialog,ta=qa.dialogMessageNode,ua=fa(pa),va=ua.message,wa=ra.isValidElement(va);if(ja&&!wa)ra.unmountComponentAtNode(ta);if(wa){ra.render(va,ta);}else{t(typeof va==='string'||u(va));if(typeof va==='string')va=w(va);k.setContent(ta,va);}ja=wa;sa.setContext(pa).setPosition(ua.position||'right').setAlignment(ua.alignh||(ua.position==='above'||ua.position==='below'?'right':null)).show();g.notify(s(ta));ea=pa;});ka=true;}function ma(){if(!ka)return;ca().done(function(pa){var qa=pa.React,ra=pa.dialog,sa=pa.dialogMessageNode;if(!ea)return;if(ja){qa.unmountComponentAtNode(sa);ja=false;}ra.hide();ea=null;});}function na(pa){if(k.contains(pa,r()))la(pa);}var oa={set:function(pa){var qa=pa.target,ra=pa.message,sa=pa.position,ta=pa.alignh;t(ra!==null);i.addClass(qa,aa);ha(qa,q({message:ra,position:sa,alignh:ta},function(ua){return ua!==(void 0);}));na(qa);},clear:function(pa){i.removeClass(pa,aa);pa.removeAttribute(z);ia(pa);if(pa===ea)ma();},updatePosition:function(){if(!ka)return;ca().done(function(pa){var qa=pa.dialog;if(ea)qa.updatePosition();});},__setReactError:function(pa,qa){var ra=qa.message,sa=qa.position,ta=qa.alignh;t(ra!==null);ga(pa,{message:ra,position:sa,alignh:ta});na(pa);},__clearReactError:function(pa){ia(pa);if(pa===ea)ma();}};e.exports=oa;},null);
__d("PrivacySelectorOptionNew",["CSS","DOM","DOMQuery","JSXDOM","MenuSelectableItem","PrivacyConst","csx","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();for(var p in k)if(k.hasOwnProperty(p))r[p]=k[p];var q=k===null?null:k.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=k;function r(s){"use strict";k.call(this,s);this.updateAfterTagExpansion(s.hasTags);}r.prototype._getData=function(){"use strict";return this._data;};r.prototype.getTooltip=function(){"use strict";return this._getData().tooltip;};r.prototype.getPostParam=function(){"use strict";return this._getData().postParam;};r.prototype.getTriggerIcon=function(){"use strict";return this._getData().triggerIcon;};r.prototype.getTriggerLabel=function(){"use strict";return this._getData().triggerLabel;};r.prototype.isPublic=function(){"use strict";return this.getPostParam()===l.PostParam.EVERYONE;};r.prototype.isFriends=function(){"use strict";return this.getPostParam()===l.PostParam.FRIENDS;};r.prototype.isOnlyMe=function(){"use strict";return this.getPostParam()===l.PostParam.ONLY_ME;};r.prototype.isBasicOption=function(){"use strict";return true;};r.prototype.isCustomOption=function(){"use strict";return false;};r.prototype.getTagExpansionBehavior=function(){"use strict";return this._getData().tagExpansionBehavior;};r.prototype.getBaseValue=function(){"use strict";return this._getData().baseValue;};r.prototype.getIndex=function(){"use strict";return this._getData().value;};r.prototype.getLoggingEventName=function(){"use strict";switch(this.getPostParam()){case l.PostParam.FRIENDS:return 'click_friends';case l.PostParam.EVERYONE:return 'click_everyone';case l.PostParam.ONLY_ME:return 'click_only_me';case l.PostParam.FRIENDS_MINUS_ACQUAINTANCES:return 'click_friends_except_acquaintances';case l.PostParam.FB_ONLY:return 'click_fb_only';default:return 'click_other';}};r.prototype.updateAfterTagExpansion=function(s){"use strict";var t=this._getData().triggerLabel;if(s&&this._getData().showPlusOnTagExpansion)t=o._("{privacyLabel} (+)",[o.param("privacyLabel",this._getData().triggerLabel)]);this._setLabel(t);if(s){this._setSubtitle(this._getData().optionSubtitleWithTags);}else this._setSubtitle(this._getData().optionSubtitle);};r.prototype.isBelowFold=function(){"use strict";var s=g.hasClass(this.getRoot(),"_3ey_");return s;};r.prototype._setLabel=function(s){"use strict";if(!s)return;var t=i.find(this.getRoot(),"._54nh");t&&h.setContent(t,s);this._getData().label=s;};r.prototype._setSubtitle=function(s){"use strict";if(!s)return;var t=i.find(this.getRoot(),"._48u1");t&&h.setContent(t,s);};r.prototype.render=function(){"use strict";var s=q.render.call(this);if(!this._getData().isPrimaryOption)return s;var t=i.find(s,"._54nc");t&&g.addClass(t,"_48t_");var u=h.find(s,"._54nh");u&&g.addClass(u,"_48u0");var v=j.div({className:"_48u1"},this._getData().optionSubtitle);h.appendContent(t,v);return s;};e.exports=r;},null);
__d("XPrivacySelectorLoggingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/privacy\/selector\/log\/",{event:{type:"Enum",required:true,enumType:1},render_location:{type:"Int",required:true},content_type:{type:"String",required:true}});},null);
__d("XPrivacyCustomDialogController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/privacy\/custom_dialog\/",{id:{type:"String",required:true},option_id:{type:"String",required:true},autosave:{type:"Bool",defaultValue:false},explain_tags:{type:"Bool",defaultValue:false},limit_community:{type:"Bool",defaultValue:false},limit_facebook:{type:"Bool",defaultValue:false},limit_fof:{type:"Bool",defaultValue:false},limit_tagexpand:{type:"Bool",defaultValue:false},is_new_privacy_selector:{type:"Bool",defaultValue:false},render_location:{type:"Int"},content_type:{type:"String"},post_param:{type:"String"},privacy_data:{type:"String"},source:{type:"String"},tags:{type:"IntVector"},tag_expansion_button:{type:"String"},__asyncDialog:{type:"Int"}});},null);
__d("PrivacySelectorCustomOption",["AsyncDialog","AsyncRequest","DataStore","PrivacySelectorOptionNew","XPrivacySelectorLoggingController","XPrivacyCustomDialogController"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();for(var m in j)if(j.hasOwnProperty(m))o[m]=j[m];var n=j===null?null:j.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=j;function o(p){"use strict";j.call(this,p);}o.prototype.isBasicOption=function(){"use strict";return false;};o.prototype.isCustomOption=function(){"use strict";return true;};o.prototype.getSelector=function(){"use strict";return this._selector;};o.prototype.setPostParam=function(p){"use strict";this._data.postParam=p;};o.prototype.getLoggingEventName=function(){"use strict";return 'click_custom';};o.prototype.openDialog=function(p){"use strict";if(typeof this._selector==='undefined')this._selector=p;i.set(this._data.id,'PrivacySelectorCustomOption',this);var q=l.getURIBuilder().setString('option_id',this._data.id).setString('id',this._data.privacyfbid.toString()).setString('post_param',p.getPostParam()).setString('content_type',p.getContentType()).setInt('render_location',p.getRenderLocation()).setIntVector('tags',p.getTags()).setBool('autosave',this._data.autosave).setBool('limit_community',this._data.limitcommunity).setBool('limit_facebook',this._data.limitfacebook).setBool('limit_fof',this._data.limitfof).setBool('limit_tagexpand',this._data.limittagexpand).setBool('is_new_privacy_selector',true).setString('tag_expansion_button',p.getTagExpansionButton()).getURI(),r=new h(q);r.setRelativeTo(p.getTriggerButtonElement());g.send(r,function(s){var t=function(u){var v=k.getURIBuilder().setEnum('event',u).setInt('render_location',document.getElementsByName('render_location')[0].value).setString('content_type',document.getElementsByName('content_type')[0].value).getURI();new h().setURI(v).send();};s.subscribe('hide',function(){p.inform('custom/hide');p.inform('selectorFinished');});s.subscribe('success',function(){p.inform('custom/success');t('custom_save');});s.subscribe('cancel',function(){p.inform('custom/cancel');t('custom_cancel');});});};o.customPrivacySave=function(p,q){"use strict";var r=i.get(p,'PrivacySelectorCustomOption');r.getSelector().selectOption(q);i.remove(p,'PrivacySelectorCustomOption');};e.exports=o;},null);
__d("PrivacySelectableMenu",["AsyncRequest","CSS","Ease","PrivacySelectorCustomOption","PrivacySelectorOptionNew","SelectableMenu","SelectableMenuUtils","XPrivacySelectorLoggingController","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();for(var p in l)if(l.hasOwnProperty(p))r[p]=l[p];var q=l===null?null:l.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=l;function r(s,t){"use strict";l.call(this,s,t);}r.prototype.getItemForIndex=function(s){"use strict";for(var t=0;t<this._items.length;t++){var u=this._items[t];if(u instanceof k&&u.getIndex()==s)return u;}return null;};r.prototype.selectDefaultOption=function(){"use strict";this._items.some(function(s){if(s instanceof k&&this._isDefaultOption(s)){this.setValue(s.getIndex());return true;}return false;},this);};r.prototype.selectOption=function(s){"use strict";var t=null,u=this._items.some(function(v){if(v instanceof k&&!v.isCustomOption()&&v.getPostParam()==s){this.setValue(v.getIndex());return true;}if(v instanceof j){t=v;return false;}if(this._isMoreOption(v)){this.expandMenu();return false;}},this);if(!u&&t){t.setPostParam(s);this.setValue(t.getIndex());}};r.prototype._isDefaultOption=function(s){"use strict";return h.hasClass(s.getRoot(),"_plx");};r.prototype._isMoreOption=function(s){"use strict";return h.hasClass(s.getRoot(),"_po2");};r.prototype._handleItemClick=function(s,t){"use strict";if(!m.doesItemSupportSelect(s))return q._handleItemClick.call(this,s,t);if(this._isMoreOption(s)){this._logMoreClick();this.expandMenu();return;}this._logOptionClick(s);var u=this.inform('itemclick',{item:s,event:t});if(u)return;if(!m.isSelected(s)&&!s.isCustomOption()&&s.select()!==false){this._items.forEach(function(v){if(m.isSelected(v)&&v!==s)v.deselect();});this.inform('change',this.getSelection());}this.done();return s.handleClick();};r.prototype._logMoreClick=function(){"use strict";var s=n.getURIBuilder().setEnum('event','more_options').setInt('render_location',this._config.renderlocation).setString('content_type',this._config.contenttype).getURI();new g().setURI(s).send();};r.prototype._logOptionClick=function(s){"use strict";var t=n.getURIBuilder().setEnum('event',s.getLoggingEventName()).setInt('render_location',this._config.renderlocation).setString('content_type',this._config.contenttype).getURI();new g().setURI(t).send();};r.prototype.expandMenu=function(){"use strict";h.removeClass(this.getRoot(),"_po3");h.addClass(this.getRoot(),"_po4");this.inform('expandMenu');};r.prototype.collapseMenu=function(){"use strict";h.removeClass(this.getRoot(),"_po4");h.addClass(this.getRoot(),"_po3");};r.prototype.updateOptionsAfterTagExpansion=function(s){"use strict";this.forEachItem(function(t){if(t instanceof k)t.updateAfterTagExpansion(s);});};r.prototype.onPopoverOpen=function(s){"use strict";if(this._config.learnMore)this._config.learnMore.collapse();if(s&&s.isBelowFold()){this.expandMenu();}else this.collapseMenu();if(s&&this._items.indexOf(s)>=15)setTimeout(function(){this._scrollableArea.scrollToBottom(true,{duration:1000,ease:i.sineOut});}.bind(this),250);};e.exports=r;},null);
__d("PopoverButton",["DOM","DOMQuery","csx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={setLabel:function(k,l){var m=h.find(k,"._55pe"),n=m.childNodes;for(var o=0;o<n.length;o++)if(h.isTextNode(n[o])){g.replace(n[o],l);return;}g.appendContent(m,l);}};e.exports=j;},null);
__d("PrivacySelectorNewDispatcher",["Dispatcher"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h='selector',i=Object.assign(new g(),{handleUpdateFromSelector:function(j){this.dispatch(Object.assign({payloadSource:h},j));}});e.exports=i;},null);
__d("PrivacySelectorDataStore",["ArbiterMixin","PrivacySelectorNewDispatcher","KeyedCallbackManager"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=new i(),k=Object.assign({},g,{get:function(l,m){j.executeOrEnqueue(l,m);},hasValueChanged:function(l){return !!j.getResource(l);}});h.register(function(l){if(l.selector_type){var m={};m[l.selector_type]={post_param:l.post_param,unique_id:l.unique_id,reload:l.reload};j.addResourcesAndExecute(m);k.inform('change');}});e.exports=k;},null);
__d("XPrivacySelectorTransitionDefaultController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/privacy\/selector\/transition_default\/",{post_param:{type:"String"},render_location:{type:"Enum",enumType:0}});},null);
__d("XPrivacySelectorUpdateController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/privacy\/selector\/update\/",{privacy_fbid:{type:"String",required:true},post_param:{type:"String",required:true},tags:{type:"IntVector"},render_location:{type:"Int",required:true},is_saved_on_select:{type:"Bool",defaultValue:false},should_return_tooltip:{type:"Bool",defaultValue:false},replace_on_select:{type:"Bool",defaultValue:false},prefix_tooltip_with_app_privacy:{type:"Bool",defaultValue:false},ent_id:{type:"String",required:true},tag_expansion_button:{type:"String"},reload_selector:{type:"Bool",defaultValue:false}});},null);
__d("XPrivacySelectorEventCheckinController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/privacy\/selector\/event_checkin\/",{object_id:{type:"Int",required:true}});},null);
__d("PrivacySelectorBase",["ArbiterMixin","AsyncRequest","Button","CSS","CurrentUser","DOM","Input","MenuStaticItem","MenuSelectableItem","PopoverButton","PopoverLoadingMenu","PrivacyConst","DataStore","PrivacySelectorNewDispatcher","PrivacySelectorDataStore","PrivacySelectableMenu","Run","SubscriptionsHandler","TagExpansionButtonConfig","Tooltip","XPrivacySelectorLoggingController","XPrivacySelectorTransitionDefaultController","XPrivacySelectorUpdateController","XPrivacySelectorEventCheckinController","bind","cx","fbt","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha){b.__markCompiled&&b.__markCompiled();var ia=3,ja=ha(g);for(var ka in ja)if(ja.hasOwnProperty(ka))ma[ka]=ja[ka];var la=ja===null?null:ja.prototype;ma.prototype=Object.create(la);ma.prototype.constructor=ma;ma.__superConstructor__=ja;function ma(na,oa,pa,qa,ra,sa){"use strict";s.set(na,'selector',this);this._root=na;this._button=oa;this._config=sa;this._menu=pa;this._popoverMenu=ra;this._input=qa;this._isSavedOnSelect=sa.is_saved_on_select;this._privacyFBID=sa.privacy_fbid;this._contentType=sa.content_type;this._renderLocation=sa.render_location;this._supportsTagExpansion=sa.supports_tag_expansion;this._prefixTooltipApps=sa.should_prefix_tooltip_apps;this._shouldDisplayLabel=sa.should_display_label;this._tags=sa.tagged_uids;this._hasTags=this._tags.length>0;this._entID=sa.ent_id;this._popover=this._popoverMenu.getPopover();this._receivingUpdate=false;this._initTagExpansionButtonState();this._selectorSyncKey=sa.selector_sync_key;this._previousParam=null;this._confirmOnSave=false;this._confirmOnSaveDialogs={};this._listeners=new x();this._attendingMinutiaePrivacySelectorAttached=false;this._previousPrivacySelectorButton=null;if(sa.use_async_menu){this._listeners.addSubscriptions(this._popoverMenu.subscribe('setMenu',function(){this._menu=this._popoverMenu.getMenu();if(!(this._menu instanceof v))return;this._onMenuLoad();this._onPopoverOpen();this.inform('asyncMenuLoaded');}.bind(this)));}else this._onMenuLoad();if(this._selectorSyncKey)this._initSelectorSync();w.onLeave(this._cleanup.bind(this));}ma.prototype._cleanup=function(){"use strict";this._listeners&&this._listeners.release();this._listeners=null;};ma.prototype._initSelectorSync=function(){"use strict";this._listeners.addSubscriptions(u.subscribe('change',function(){u.get(this._selectorSyncKey,function(na){if(na.unique_id!==this._menu._config.id){this._receivingUpdate=true;if(na.post_param)this.selectOption(na.post_param);na.reload&&this.reloadSelector();}}.bind(this));}.bind(this)));if(!this._syncsToDefault())this._listeners.addSubscriptions(this._menu.subscribe('change',function(){this._broadcastUpdate();}.bind(this)));};ma.prototype._broadcastUpdate=function(){"use strict";if(!this._receivingUpdate){var na=this._getSelectedOption();t.handleUpdateFromSelector({selector_type:this._selectorSyncKey,post_param:na.getPostParam().toString(),unique_id:this._menu._config.id});}else this._receivingUpdate=false;};ma.prototype.shouldReplaceOnPost=function(){"use strict";return this._config.replace_on_post||this.isComposerWithDefault();};ma.prototype.isComposerWithDefault=function(){"use strict";return this._syncsToDefault()&&!this._config.replace_on_select;};ma.prototype._isSelectorForChangingComposerDefault=function(){"use strict";return this._syncsToDefault&&this._config.replace_on_select;};ma.prototype._syncsToDefault=function(){"use strict";return this._config.selector_sync_key==r.PrivacyField.DEFAULT_COMPOSER.toString();};ma.prototype.getIsPublicSelected=function(){"use strict";return this._selectedOption&&this._selectedOption.isPublic();};ma.prototype.getIsFriendsSelected=function(){"use strict";return this._selectedOption&&this._selectedOption.isFriends();};ma.prototype.getIsOnlyMeSelected=function(){"use strict";return this._selectedOption&&this._selectedOption.isOnlyMe();};ma.prototype.getSelectedBaseValue=function(){"use strict";return this._selectedOption&&this._selectedOption.getBaseValue();};ma.prototype.getSelectedPostParam=function(){"use strict";return this._selectedOption&&this._selectedOption.getPostParam().toString();};ma.prototype.setValue=function(na){"use strict";this._menu.setValue(na);};ma.prototype.openSelectorExpanded=function(na){"use strict";this.openSelector(function(){this._menu.expandMenu();na&&na();}.bind(this));};ma.prototype.openSelector=function(na){"use strict";if(this._menu instanceof q){this.subscribeOnce('asyncMenuLoaded',function(){na&&na();}.bind(this));this._popover.showLayer();}else{this._popover.showLayer();na&&na();}};ma.prototype.closeSelector=function(){"use strict";this._popover.hideLayer();};ma.prototype.getPopover=function(){"use strict";return this._popover;};ma.prototype.getTriggerButtonElement=function(){"use strict";return this._button;};ma.prototype.getRoot=function(){"use strict";return this._root;};ma.prototype.getMenuElement=function(){"use strict";return this._menu.getRoot();};ma.prototype.selectDefaultOption=function(){"use strict";this.removeAttendingMinutiaePrivacySelectorIfNecessary();this._menu.selectDefaultOption();this._updateMenu();};ma.prototype.selectOption=function(na){"use strict";if(!na)return;if(this._menu instanceof q){this.subscribeOnce('asyncMenuLoaded',this._selectOptionImpl.bind(this,na));this._fetchAsyncMenu();}else this._selectOptionImpl(na);};ma.prototype._selectOptionImpl=function(na){"use strict";this._menu.selectOption(na);this._updateMenu();};ma.prototype._updateMenu=function(){"use strict";this._selectedOption=this._getSelectedOption();this.updateDataForItemIndex(this._selectedOption.getIndex(),this._selectedOption.getPostParam().toString());};ma.prototype.setTagExpansionButton=function(na){"use strict";this._tagExpansionButton=na;if(this._hasTags){this._menu.updateOptionsAfterTagExpansion(this._showTagExpansion());this._updateTriggerButtonLabel();this._updateTooltipAfterChange();}};ma.prototype.getTagExpansionButton=function(){"use strict";return this._tagExpansionButton;};ma.prototype._initTagExpansionButtonState=function(){"use strict";this._tagExpansionButton=y.FRIENDS_OF_TAGGED;var na=this._getSelectedOption();if(!na)return;var oa=JSON.parse(na.getPostParam());if(oa.settings&&oa.settings.no_tag_expansion===true){this._tagExpansionButton=y.TAGGED_ONLY;}else this._tagExpansionButton=y.FRIENDS_OF_TAGGED;};ma.prototype._fetchAsyncMenu=function(){"use strict";if(this._config.use_async_menu)this._popoverMenu.fetchMenu();};ma.prototype._getSelectedOption=function(){"use strict";if(!(this._menu instanceof v))return;var na;this._menu.forEachItem(function(oa){if(oa instanceof o&&oa.isSelected())na=oa;}.bind(this));return na;};ma.prototype._onItemClick=function(na,oa){"use strict";var pa=oa.item;if(pa instanceof n)return;if(pa.isBasicOption()){this.updateDataForItemIndex(pa.getIndex(),pa.getPostParam().toString());}else if(pa.isCustomOption()){this._closeForCustom=true;pa.openDialog(this);}this.inform('click',{customSelected:pa.isCustomOption()});};ma.prototype.getContentType=function(){"use strict";return this._contentType;};ma.prototype.getRenderLocation=function(){"use strict";return this._renderLocation;};ma.prototype.getPostParam=function(){"use strict";return this._postParam;};ma.prototype.getTags=function(){"use strict";return this._tags;};ma.prototype.registerConfirmOnSaveDialog=function(na,oa,pa){"use strict";this._confirmOnSave=true;if(!(na in this._confirmOnSaveDialogs))this._confirmOnSaveDialogs[na]={};pa.subscribe('hide',function(){if(this._previousParam!==this._postParam)this.selectOption(this._previousParam);}.bind(this));pa.subscribe('button',function(){this._savePrivacy();pa.hide();}.bind(this));this._confirmOnSaveDialogs[na][oa]=pa;};ma.prototype.updateDataForItemIndex=function(na,oa,pa){"use strict";if(pa){this._tagExpansionButton=pa;this.inform('CustomTagExpansion',this._tagExpansionButton);}var qa=this._menu.getItemForIndex(na);if(qa.isCustomOption())qa.setPostParam(oa);this._selectedOption=qa;this._previousParam=this._postParam;this._postParam=oa;m.setValue(this._input,oa);this._updateTriggerButtonLabel();if(this._shouldUpdateTooltips()){this._updateTooltipAfterChange();}else{if(this._isSavedOnSelect)if(this._confirmOnSave&&(this._previousParam in this._confirmOnSaveDialogs)&&(this._postParam in this._confirmOnSaveDialogs[this._previousParam])){this._confirmOnSaveDialogs[this._previousParam][this._postParam].show();}else this._savePrivacy();this._setTooltipValue(this._selectedOption.getTooltip());}this.inform('changed',{post_param:this._postParam,base_value:this.getSelectedBaseValue()});};ma.prototype._shouldUpdateTooltips=function(){"use strict";return this._prefixTooltipApps||this._supportsTagExpansion;};ma.prototype._savePrivacy=function(){"use strict";this._previousParam=this._postParam;this._sendUpdateRequest();};ma.prototype.reloadSelector=function(){"use strict";this._cleanup();var na=ca.getURIBuilder().setString('privacy_fbid',String(this._privacyFBID)).setString('post_param',this._postParam).setInt('render_location',this._renderLocation).setBool('reload_selector',true).setString('ent_id',String(this._entID)).getURI();new h().setRelativeTo(this._root).setHandler(this.inform.bind(this,'reloaded')).setURI(na).send();};ma.prototype.transitionToDefault=function(){"use strict";var na=ba.getURIBuilder().setString('post_param',this._postParam).setEnum('render_location',this._renderLocation).getURI();new h().setRelativeTo(this._root).setHandler(function(){this._config.selector_sync_key=r.PrivacyField.DEFAULT_COMPOSER.toString();this._initSelectorSync();this.inform.bind(this,'reloaded');}.bind(this)).setURI(na).send();};ma.prototype._sendUpdateRequest=function(){"use strict";var na=ca.getURIBuilder().setString('privacy_fbid',String(this._privacyFBID)).setString('post_param',this._postParam).setIntVector('tags',this._tags).setInt('render_location',this._renderLocation).setBool('is_saved_on_select',this._isSavedOnSelect).setBool('should_return_tooltip',this._shouldUpdateTooltips()).setBool('prefix_tooltip_with_app_privacy',this._prefixTooltipApps).setBool('replace_on_select',this._config.replace_on_select).setString('ent_id',String(this._entID)).setString('tag_expansion_button',this._tagExpansionButton).getURI();new h().setRelativeTo(this._root).setHandler(ea(this,function(oa){if(this._config.replace_on_select)this._cleanup();if(this._isSelectorForChangingComposerDefault())this._broadcastUpdate();var pa=oa&&oa.payload&&oa.payload.tooltip;pa&&this._setTooltipValue(oa.payload.tooltip);this.inform('selector_updated');})).setURI(na).send();};ma.prototype.informTagsChanged=function(na){"use strict";var oa=this._getTags(na);this.informTagsChangedWithIDs(oa);};ma.prototype.addAttendingMinutiaePrivacySelectorIfNecessary=function(na){"use strict";if(!na)return;var oa=da.getURIBuilder().setInt('object_id',na).getURI();new h().setURI(oa).setHandler(function(pa){if(pa.payload.privacy_selector){this._attendingMinutiaePrivacySelectorAttached=true;this._previousPrivacySelectorButton=this._button;l.replace(this._button,pa.payload.privacy_selector);this._button=l.find(this._root,'#'+pa.payload.privacy_selector_id);this._updateTriggerButtonLabel();}}.bind(this)).send();};ma.prototype.removeAttendingMinutiaePrivacySelectorIfNecessary=function(){"use strict";if(this._attendingMinutiaePrivacySelectorAttached){l.replace(this._button,this._previousPrivacySelectorButton);this._button=this._previousPrivacySelectorButton;this._previousPrivacySelectorButton=null;this._attendingMinutiaePrivacySelectorAttached=false;this._attendingMinutiae=null;this._updateTriggerButtonLabel();}};ma.prototype.informTagsChangedWithIDs=function(na){"use strict";var oa=!na.length;if(this._hasTags===oa){this._hasTags=!!na.length;this._menu.updateOptionsAfterTagExpansion(this._showTagExpansion());this._updateTriggerButtonLabel();}if(this._tags.length!==na.length){this._tags=na;this._updateTooltipAfterChange();}};ma.prototype._showTagExpansion=function(){"use strict";return this._hasTags&&(this._tagExpansionButton.valueOf()===y.FRIENDS_OF_TAGGED.valueOf());};ma.prototype._getTags=function(na){"use strict";var oa=[],pa=k.getID();if(na.withTags)for(var qa=0;qa<na.withTags.length;qa++){var ra=na.withTags[qa].info;if(ra.uid!=pa)oa.push(ra.uid);}if(na.mention)for(var sa in na.mention)if(na.mention[sa].type=='user'&&na.mention[sa].uid!=pa)oa.push(na.mention[sa].uid);return oa;};ma.prototype._updateTriggerButtonLabel=function(){"use strict";if(this._attendingMinutiaePrivacySelectorAttached){this._updateTriggerButtonLabelForEventPrivacy();}else{var na=this._selectedOption.getTriggerIcon();if(this._config.trigger_no_icon)j.hide(na);i.setIcon(this._button,na.cloneNode());if(!this._shouldDisplayLabel)return;p.setLabel(this._button,this._selectedOption.getLabel());if(this._config.trigger_style===ia){j.conditionClass(this.getTriggerButtonElement(),"_mw-",this.getIsOnlyMeSelected());j.conditionClass(this.getTriggerButtonElement(),"_mw_",this.getIsPublicSelected());}}};ma.prototype._updateTriggerButtonLabelForEventPrivacy=function(){"use strict";j.conditionClass(this._button,"_5n7w",this._showTagExpansion());};ma.prototype._updateTooltipAfterChange=function(){"use strict";var na=ga._("Wird geladen ...");this._setTooltipValue(na);this._sendUpdateRequest();};ma.prototype._setTooltipValue=function(na){"use strict";na&&z.set(this._button,na);};ma.prototype._onPopoverClose=function(){"use strict";if(!this._getSelectedOption())return;if(this._closeForCustom){this._closeForCustom=false;}else this.inform('selectorFinished');this.inform('close');};ma.prototype._onPopoverOpen=function(){"use strict";if(!(this._menu instanceof v))return;this._menu.onPopoverOpen(this._getSelectedOption());var na=aa.getURIBuilder().setEnum('event','opened').setInt('render_location',this._renderLocation).setString('content_type',this._contentType).getURI();new h().setURI(na).send();this.inform('open');};ma.prototype._onMenuLoad=function(){"use strict";this._listeners.addSubscriptions(this._menu.subscribe('itemclick',this._onItemClick.bind(this)),this._popover.subscribe('hide',this._onPopoverClose.bind(this)),this._popover.subscribe('show',this._onPopoverOpen.bind(this)));this._listeners.addSubscriptions(this._menu.subscribe('expandMenu',function(){if(this._popover&&this._popover.getLayer())this._popover.getLayer().updatePosition();}.bind(this)));this._selectedOption=this._getSelectedOption();if(this._selectedOption){this._postParam=this._selectedOption.getPostParam().toString();this._previousParam=this._postParam;this._hasTags&&this._updateTriggerButtonLabel();}};e.exports=ma;},null);