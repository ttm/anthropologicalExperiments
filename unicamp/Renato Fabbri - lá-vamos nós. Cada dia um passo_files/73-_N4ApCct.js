/*!CK:2463929285!*//*1436882312,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["L0QC8"]); }

__d("NotificationSeenState",["NotificationConstants","NotificationUpdates","createObjectFrom"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={},k=1,l=2,m=0,n=k,o=k|l,p=g.PayloadSourceType.INITIAL_LOAD,q={UNSEEN_AND_UNREAD:m,SEEN_BUT_UNREAD:n,SEEN_AND_READ:o};function r(u){var v=[],w=[];Object.keys(u).forEach(function(x){var y=u[x],z=j[x];j[x]=y;if(z===(void 0)){v.push(x);w.push(x);return;}var aa=z^y;if(aa&k)v.push(x);if(aa&l)w.push(x);});v.length&&h.didUpdateSeenState(v);w.length&&h.didUpdateReadState(w);}h.subscribe('update-notifications',function(u,v){var w=v.nodes;if(!w||!w.length)return;var x=v.payloadsource,y=g.PayloadSourceType,z=x==y.ENDPOINT,aa={};v.nodes.forEach(function(ba){var ca=ba.alert_id;if(!z||j[ca]===(void 0))aa[ca]=q[ba.seen_state];});r(aa);});h.subscribe('update-seen',function(u,v){if(!v.seenState)return;var w=[],x={};Object.keys(v.seenState).forEach(function(z){if(!v.seenState[z]){w.push(z);return;}var aa=j[z];if(aa!==(void 0))x[z]=aa|k;});var y=Object.assign({},i(w,m),x);r(y);});h.subscribe('update-read',function(u,v){if(!v.readState)return;var w=[],x={};Object.keys(v.readState).forEach(function(z){if(v.readState[z]){w.push(z);return;}var aa=j[z];if(aa!==(void 0)){x[z]=aa&~l;}else if(v.payloadsource==p)x[z]=n;});var y=Object.assign({},i(w,o),x);r(y);});function s(u){var v=j[u];return v;}var t={isRead:function(u){return s(u)===o;},isSeen:function(u){return s(u)!==m;},getUnseenCount:function(){return t.getUnseenIDs().length;},getUnseenIDs:function(){return Object.keys(j).filter(function(u){return j[u]===m;});},getUnreadCount:function(){return t.getUnreadIDs().length;},getUnreadIDs:function(){return Object.keys(j).filter(function(u){return j[u]!==o;});}};e.exports=t;},null);
__d("NotificaionJewelControllerModuleLoader",["JSResource","NotificationSeenState","NotificationStore","NotificationUpdates"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();b('NotificationSeenState');b('NotificationStore');b('NotificationUpdates');e.exports=g('NotificationJewelController');},null);
__d("NotificationCounter",["Arbiter","ChatConfig","DocumentTitle","FavIcon","JSLogger","UserActivity"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m={messages:0,notifications:0,requests:0},n;if(h.get('unreadFavicon'))j.setToggleResources(h.get('unreadFaviconURL'));var o={init:function(p){g.subscribe('update_title',this._handleUpdate.bind(this));g.subscribe('jewel/count-updated',this._handleCountUpdate.bind(this));},getCount:function(){var p=0;for(var q in m){var r=Number(m[q]);if(typeof m[q]=='string'&&isNaN(r))return m[q];if(isNaN(r)||r<0){k.create('jewels').error('bad_count',{jewel:q,count:m[q]});continue;}p+=r;}return p;},updateTitle:function(){var p=this.getCount(),q=i.get();q=p?'('+p+') '+q:q;i.set(q,true);if(h.get('unreadFavicon')){if(!l.isOnTab()&&((n>0&&p===0)||(n===0&&p>0)||(n>0&&!j.isToggledResource())))j.toggle();n=p;}},_handleCountUpdate:function(p,q){m[q.jewel]=q.count;this.updateTitle();},_handleUpdate:function(p,q){this.updateTitle();}};e.exports=o;},null);
__d("XNotificationsSyncController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/notifications\/sync\/",{lastSync:{type:"Int",required:true}});},null);
__d("NotificationSync",["Arbiter","AsyncRequest","ChannelConstants","JSLogger","NotificationConstants","NotificationUpdates","XNotificationsSyncController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=j.create('notifications'),o='channel_reload',p=0;function q(v){var w=l.getserverTime()?l.getserverTime():p,x=m.getURIBuilder().setInt('lastSync',w).getURI();v.setHandler(r).setOption('suppressErrorAlerts',true).setErrorHandler(s).setMethod('GET').setReadOnly(true).setURI(x).setAllowCrossPageTransition(true);}function r(v){var w=v.getPayload();if(w.syncPayload)l.handleUpdate(k.PayloadSourceType.SYNC,w.syncPayload);}function s(v){}function t(){var v=new h();v.setIsBackgroundRequest(true);q(v);v.send();n.bump(o);}var u={setup:function(v){p=v;g.subscribe(i.ON_INVALID_HISTORY,t);}};e.exports=u;},null);
__d("NotificationJewelController",["Arbiter","Event","NotificationConstants","NotificationCounter","NotificationSeenState","NotificationSync","NotificationUpdates","createObjectFrom","curry"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=0;function q(s){g.inform('jewel/count-updated',{jewel:s,count:k.getUnseenIDs().length},g.BEHAVIOR_STATE);}function r(s,t,u,v){"use strict";var w=null;if(t.list&&t.unseenNotifs&&t.startTime){w=t.list;u=t.unseenNotifs;v=t.startTime;}else w=t;j.init();var x=h.listen(s.getRoot(),'mouseover',function(){x.remove();x=null;w.open();});if(s.isOpen()){w.open();}else var y=s.subscribe('opened',function(){y.unsubscribe();y=null;w.open();});var z=w.pause.bind(w);s.subscribe('opened',function(){setTimeout(z,0);});s.subscribe('closed',function(){w.unpause();q(s.name);});m.subscribe('seen-state-updated',o(q,s.name));m.handleUpdate(i.PayloadSourceType.INITIAL_LOAD,{seenState:n(u,p)});l.setup(v);q(s.name);}e.exports=r;},null);
__d("NotificationJewelHeaderController",["DOM","Event","NotificationSeenState","NotificationUserActions","NotificationUpdates"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(m,n){"use strict";h.listen(m,'click',function(){var o=i.getUnreadIDs();if(o.length)j.markNotificationsAsRead(o);});k.subscribe('read-state-updated',function(){if(n)g.setContent(n,i.getUnreadCount());});}e.exports=l;},null);
__d("NotificationGNFState",["NotificationUpdates","isEmpty"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={};g.subscribe('update-notifications',function(k,l){var m=l.nodes;if(!m||!m.length)return;var n={};l.nodes.forEach(function(o){var p=o.alert_id;if(i[p]!==o.gaveGNF)n[p]=o.gaveGNF;});if(!h(n)){i=Object.assign(i,n);g.didUpdateGNFState(Object.keys(n));}});g.subscribe('update-gnf',function(k,l){if(l.gnfState){i=Object.assign(i,l.gnfState);g.didUpdateGNFState(Object.keys(l.gnfState));}});var j={gaveGNF:function(k){return !!i[k];}};e.exports=j;},null);
__d("NotificationHiddenState",["NotificationUpdates","NotificationConstants","isEmpty"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={};g.subscribe('update-notifications',function(l,m){var n=m.nodes,o=m.payloadsource;if(o===h.PayloadSourceType.LIVE_SEND&&n&&n.length){var p={};n.forEach(function(q){var r=q.alert_id;if(j[r])p[r]=false;});if(!i(p)){j=Object.assign(j,p);g.didUpdateHiddenState(Object.keys(p));}}});g.subscribe('update-hidden',function(l,m){if(m.hiddenState){j=Object.assign(j,m.hiddenState);g.didUpdateHiddenState(Object.keys(m.hiddenState));}});var k={isHidden:function(l){if(j[l])return j[l];return false;}};e.exports=k;},null);
__d("NotificationList.react",["NotificationConstants","NotificationGNFState","NotificationHiddenState","NotificationSeenState","NotificationStore","NotificationUpdates","NotificationUserActions","React","getObjectValues","isEmpty","mapObject"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r=n,s=r.PropTypes,t=g.PayloadSourceType.LIVE_SEND,u=n.createClass({displayName:"NotificationList",propTypes:{businessID:s.string,hasEverBeenOpened:s.bool,maxHeight:s.number,negativeTracking:s.object,paused:s.bool,tracking:s.string,useChevron:s.bool,numPerPage:s.number.isRequired,listRenderer:s.func.isRequired,upsell:s.object},getInitialState:function(){this._currentlyFetching=false;this._pendingNotifs={};this._shouldScroll=false;var v=q(this.props.staticNotifs,function(w){return !!w.gaveGNF;});return {canFetchMore:true,notifs:{},hiddenState:{},readState:{},gnfState:v||{},showingChevron:false};},componentWillMount:function(){k.setBusinessID(this.props.businessID);this._subscriptions=[l.subscribe('notifications-updated',function(v,w){if(w.source==t&&!p(w.updates)){this._shouldScroll=true;if(this.props.paused!==false)this._pendingNotifs=Object.assign({},this._pendingNotifs,w.updates);return;}this._fetchAndUpdate(k.getCount());}.bind(this)),l.subscribe(['hidden-state-updated','read-state-updated','gnf-state-updated'],function(v,w){if(v=='hidden-state-updated'){if(w.source!==t||!this.props.paused){var x={};Object.keys(w.updates).forEach(function(aa){x[aa]=i.isHidden(aa);});this.setState({hiddenState:Object.assign({},this.state.hiddenState,x)});}}else if(v=='gnf-state-updated'){var y={};Object.keys(w.updates).forEach(function(aa){y[aa]=h.gaveGNF(aa);});this.setState({gnfState:Object.assign({},this.state.gnfState,y)});}else{var z={};Object.keys(w.updates).forEach(function(aa){z[aa]=j.isRead(aa);});this.setState({readState:Object.assign({},this.state.readState,z)});}}.bind(this))];},componentWillUnmount:function(){if(this._subscriptions){while(this._subscriptions.length)this._subscriptions.pop().unsubscribe();this._subscriptions=null;}},_getNotifsWithCurrentOrder:function(v){var w=Object.keys(this.state.notifs),x=Object.keys(v).filter(function(z){return !this.state.notifs[z];}.bind(this));w=w.concat(x);var y={};w.forEach(function(z){if(this._pendingNotifs[z]){if(this.state.notifs[z])y[z]=this.state.notifs[z];}else y[z]=v[z];}.bind(this));return y;},_fetchAndUpdate:function(v){this._currentlyFetching=true;k.getNotifications(v,function(w){var x=p(this._pendingNotifs)?w:this._getNotifsWithCurrentOrder(w),y={},z={},aa={};o(x).forEach(function(ba){var ca=ba.alert_id;if(!this.state||!this.state.readState[ca])y[ca]=j.isRead(ca);if(!this.state||!this.state.hiddenState[ca])z[ca]=i.isHidden(ca);if(!this.state||!this.state.gnfState[ca])aa[ca]=h.gaveGNF(ca);});this._currentlyFetching=false;this.setState({notifs:x,canFetchMore:k.canFetchMore()||k.getCount()!=Object.keys(x).length,readState:Object.assign({},this.state.readState,y),hiddenState:Object.assign({},this.state.hiddenState,z),gnfState:Object.assign({},this.state.gnfState,aa)});}.bind(this));},_fetchAndUpdateAll:function(){var v={};Object.keys(this._pendingNotifs).forEach(function(w){var x=i.isHidden(w);if(x!=this.state.hiddenState[w])v[w]=i.isHidden(w);}.bind(this));if(!p(v))this.setState({hiddenState:Object.assign({},this.state.hiddenState,v)});this._pendingNotifs={};this._fetchAndUpdate(k.getCount());},_fetchNextSet:function(){if(!this._currentlyFetching){var v=Object.keys(this.state.notifs).length;this._fetchAndUpdate(v+this.props.numPerPage);}},_onScrollAndUpdate:function(v){if(this._currentlyFetching||!this.state.canFetchMore)return;if(v)this._fetchNextSet();},_onChevronShow:function(){this.setState({showingChevron:true});},_onChevronHide:function(){this.setState({showingChevron:false});},_updateNotifInContainer:function(v){if(v.length>this.props.numPerPage){this._fetchAndUpdate(v.length);}else this._fetchNextSet();return;},componentDidUpdate:function(v){var w=j.getUnseenIDs();if(!p(this._pendingNotifs))w=w.filter(function(x){return !this._pendingNotifs[x];}.bind(this));if(w.length&&this.props.paused)m.markNotificationsAsSeen(w);if(!v.hasEverBeenOpened&&this.props.hasEverBeenOpened)this._updateNotifInContainer(w);if(v.paused&&!this.props.paused){this._shouldScroll=false;setTimeout(this._fetchAndUpdateAll,0);return;}},render:function(){var v=this.props.listRenderer;return (n.createElement(v,{hasEverBeenOpened:this.props.hasEverBeenOpened,paused:this.props.paused,tracking:this.props.tracking,negativeTracking:this.props.negativeTracking,shortenTimestamp:this.props.shortenTimestamp,businessID:this.props.businessID,maxHeight:this.props.maxHeight,useChevron:this.props.useChevron,notifs:this.state.notifs,afterScroll:this._onScrollAndUpdate,onChevronShow:this._onChevronShow,onChevronHide:this._onChevronHide,canFetchMore:this.state.canFetchMore,hiddenState:this.state.hiddenState,readState:this.state.readState,gnfState:this.state.gnfState,showingChevron:this.state.showingChevron,shouldScroll:this._shouldScroll,upsell:this.props.upsell||null,isRHC:this.props.isRHC}));}});e.exports=u;},null);
__d("NotificationListPropTypes",["React"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g,i=h.PropTypes,j={negativeTracking:i.object,tracking:i.string,useChevron:i.bool,notifs:i.object,afterScroll:i.func,onChevronShow:i.func,onChevronHide:i.func,canFetchMore:i.bool,hiddenState:i.object,readState:i.object,gnfState:i.object,showingChevron:i.bool,paused:i.bool,maxHeight:i.number,shouldScroll:i.bool,upsell:i.object};e.exports=j;},null);
__d("FlexibleBlock.react",["LeftRight.react","React","cx","invariant","keyMirror"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=k({left:true,right:true});function m(o){j(o.flex&&o.flex in n.FLEX);j(o.children&&o.children.length===2);}var n=h.createClass({displayName:"FlexibleBlock",render:function(){m(this.props);var o,p=this.props.children[0],q=this.props.children[1],r=this.props.flex==l.left,s;if(r){s=p;o=g.DIRECTION.right;}else{s=q;o=g.DIRECTION.left;}var t=h.createElement("div",{className:"_42ef"},s);return (h.createElement(g,h.__spread({},this.props,{direction:o}),r?t:this.props.children[0],r?this.props.children[1]:t));}});n.FLEX=l;e.exports=n;},null);
__d("NotificationPhotoThumbnail",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(i){if(!i.media||!i.style_list||!i.style_list.length)return null;switch(i.style_list[0]){case 'new_album':case 'album':case 'application':case 'photo':case 'video':case 'video_autoplay':case 'video_inline':return i.media.image;default:return null;}}var h={getThumbnail:function(i,j,k){var l;if(i&&i.length){i.some(function(p){l=g(p);if(l)return true;return false;});if(l)return l;}if(k){var m=k.relevant_comments;if(m&&m.length){var n=m[0].attachments;if(n&&n.length){l=g(n[0]);if(l)return l;}}}if(j){var o=j.attachments;if(o&&o.length)return g(o[0]);}return null;}};e.exports=h;},null);
__d("NotificationURI",["BusinessURI.brands","URI","isFacebookURI","VideoPermalinkURI"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={localize:function(l){l=g(l);if(!i(l))return l.toString();var m=l.getSubdomain();return l.getUnqualifiedURI().getQualifiedURI().setSubdomain(m).toString();},snowliftable:function(l){if(!l)return false;l=new h(l);var m=l.getQueryData();return i(l)&&(j.isValid(l)||'fbid' in m);},isVaultSetURI:function(l){return this._areEquals(l,'/ajax/vault/sharer_preview.php');},isAlbumDraftRecoveryDialogURI:function(l){return this._areEquals(l,'/ajax/photos/upload/overlay/');},_areEquals:function(l,m){if(!l)return false;l=new h(l);return i(l)&&l.getPath()===m;},_startsWith:function(l,m){if(!l)return false;l=new h(l);return i(l)&&l.getPath().startsWith(m);}};e.exports=k;},null);
__d("NotificationListItem.react",["AsyncResponse","BizSiteIdentifier.brands","BanzaiLogger","CloseButton.react","Event","FlexibleBlock.react","ImageBlock.react","Keys","List.react","NotificationPhotoThumbnail","NotificationTokens","NotificationURI","NotificationUserActions","React","TextWithEntities.react","ReadToggle.react","Timestamp.react","VaultBoxURI","XUIButton.react","PopoverMenu.react","ReactXUIMenu","cx","invariant","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da){b.__markCompiled&&b.__markCompiled();var ea=aa.Item;function fa(ia,ja){return t.createElement("span",{className:"fwb"},ia);}function ga(ia){return !!(ia&&ia.id&&!ia.is_facebook_app);}var ha=t.createClass({displayName:"NotificationListItem",getInitialState:function(){return {showingOptions:false,negativeFeedbackConfirmation:null,canReportAsSpam:false,spamReportConfirmation:null,sendingFeedback:false,mayUndoHide:false,genericNegativeFeedbackConfirmation:null,isBizSite:h.isBizSite()};},_onKeyDownItem:function(ia){if(k.getKeyCode(ia.nativeEvent)==n.RETURN)this._markItemRead();},_markItemReadIfUnreadFromReadButton:function(){if(!this.props.isRead)s.setNextIsFromReadButton(true);this._markItemReadIfUnread();},_markItemReadIfUnread:function(){!this.props.isRead&&this._markItemRead();},_markItemRead:function(){s.markNotificationsAsRead([this.props.alert_id]);},_onFeedbackError:function(ia){g.defaultErrorHandler(ia);this.setState({sendingFeedback:false});},_onHideSuccess:function(ia){var ja=ia.getPayload();ca(ja.confirmation);this.setState({negativeFeedbackConfirmation:ja.confirmation,canReportAsSpam:ja.canReportAsSpam,sendingFeedback:false,showingOptions:true});},_onHideAppSuccess:function(ia){var ja=ia.getPayload(),ka=ja.confirmation,la=ja.canReportAsSpam;ca(ka);this.setState({negativeFeedbackConfirmation:ka,canReportAsSpam:la,mayUndoHide:true,sendingFeedback:false,showingOptions:true});},_onSpamReportSuccess:function(ia){var ja=ia.getPayload().spamReportConfirmation;this.setState({negativeFeedbackConfirmation:null,spamReportConfirmation:ja,sendingFeedback:false});},_onHide:function(){s.markNotificationAsHidden(this.props.alert_id,this._onHideSuccess,this._onFeedbackError);this.setState({sendingFeedback:true,mayUndoHide:true});},_onShowSuccess:function(){this.setState({genericNegativeFeedbackConfirmation:null,negativeFeedbackConfirmation:null,sendingFeedback:false,showingOptions:false});},_onShow:function(){var ia=this.props.negative?this.props.negative.subscription_level:null;s.markNotificationAsVisible(this.props.alert_id,ia,this._onShowSuccess,this._onFeedbackError);this.setState({sendingFeedback:true});},_onReportSpam:function(){s.markNotificationAsSpam(this.props.alert_id,this._onSpamReportSuccess,this._onFeedbackError);this.setState({sendingFeedback:true});},_markAppAsHidden:function(){s.markAppAsHidden(this.props.alert_id,this.props.application.id,this._onHideAppSuccess,this._onFeedbackError);this.setState({sendingFeedback:true});},_markAppAsVisible:function(){s.markAppAsVisible(this.props.alert_id,this.props.application.id,function(){this.setState({negativeFeedbackConfirmation:null,sendingFeedback:false,showingOptions:false,mayUndoHide:false});}.bind(this),this._onFeedbackError);this.setState({sendingFeedback:true});},_renderAttachedImage:function(ia){if(ia)return (t.createElement("img",{src:ia.uri,className:"_42td","aria-hidden":true}));return t.createElement("span",null);},_getModifiedTrackingString:function(ia){return JSON.stringify(Object.assign({},JSON.parse(this.props.tracking),ia));},_onClickCloseButton:function(){if(this.props.useChevron){this.showCloseOptionOnMenuClose=true;}else this.setState({showingOptions:true});},_onCancelNegativeFeedback:function(){this.setState({showingOptions:false});},shouldComponentUpdate:function(ia,ja){return (this.props.visible!==ia.visible||this.props.isRead!==ia.isRead||this.props.timestamp!==ia.timestamp||this.props.gnfGiven!==ia.gnfGiven||this.props.paused!==ia.paused||this.state.showingOptions!==ja.showingOptions||this.state.sendingFeedback!==ja.sendingFeedback||this.state.canReportAsSpam!==ja.canReportAsSpam||this.state.spamReportConfirmation!==ja.spamReportConfirmation);},componentWillReceiveProps:function(ia){if(this.props.paused&&!ia.paused&&!this.props.visible&&this.state.mayUndoHide)this.setState({mayUndoHide:false});},_onChevronHide:function(){this.props.onChevronHide();this._logChevronEvent('close');if(this.showCloseOptionOnMenuClose){this.showCloseOptionOnMenuClose=false;this._turnOff();}},_turnOff:function(){var ia=ga(this.props.application)?this._markAppAsHidden:this._onHide;ia();},_onChevronShow:function(){this.props.onChevronShow();this._logChevronEvent('open');},_logChevronEvent:function(ia){var ja={event:ia,notif_type:this.props.notif_type,notif_id:parseInt(q.untokenizeIDs([this.props.alert_id])[0],10)};i.log('NotifJewelMenuLoggerConfig',ja);},_onGenericSuccess:function(ia){this.setState({showingOptions:true,sendingFeedback:false,genericNegativeFeedbackConfirmation:ia});},_onClickGenericNegative:function(){this.setState({sendingFeedback:true,mayUndoHide:true});s.giveGenericNegativeFeedback(this.props.alert_id,this._onGenericSuccess,this._onFeedbackError);},_undoGenericNegative:function(){this.setState({sendingFeedback:true});s.undoGenericNegativeFeedback(this.props.alert_id,this._onShowSuccess,this._onFeedbackError);},render:function(){if(!this.props.visible&&!this.state.mayUndoHide)return t.createElement("li",{className:"_4_62"});var ia=this.props.negative,ja=this.props.negativeTracking,ka=(("_33c")+(!this.props.isRead?' '+"_4af":'')+(this.state.showingOptions?' '+"_4ag":'')+(this.state.sendingFeedback?' '+"_4m8s":''));if(this.state.negativeFeedbackConfirmation){var la=this.state.negativeFeedbackConfirmation,ma=null,na=null;if(this.state.canReportAsSpam)if(!this.props.useChevron){ma=t.createElement("span",null,t.createElement("span",{className:"mhs"},"·"),t.createElement("a",{href:"#",onClick:this._onReportSpam},da._("App wegen Spam melden")));}else na=t.createElement(o,{border:"none",spacing:"small",className:"_1v4c"},t.createElement("li",null,t.createElement("a",{href:"#",onClick:this._onReportSpam,className:"mls"},da._("App wegen Spam melden"))));var oa=ga(this.props.application)?this._markAppAsVisible:this._onShow,pa=!this.props.useChevron?t.createElement("a",{href:"#",onClick:oa,className:"mls"},da._("R\u00fcckg\u00e4ngig")):null;return (t.createElement("li",{className:ka,"data-gt":this.props.tracking},t.createElement("div",{className:"_4ai"},t.createElement(u,{interpolator:fa,ranges:la.ranges,aggregatedranges:la.aggregated_ranges,text:la.text}),pa,ma),na));}var qa=this.state.spamReportConfirmation;if(qa)return (t.createElement("li",{className:ka,"data-gt":this.props.tracking},t.createElement("div",{className:"_4ai"},t.createElement(u,{interpolator:fa,ranges:qa.ranges,aggregatedranges:qa.aggregated_ranges,text:qa.text}))));if(this.state.genericNegativeFeedbackConfirmation){la=this.state.genericNegativeFeedbackConfirmation;var ra=ia?t.createElement("li",null,t.createElement("a",{href:"#","data-gt":xa,onClick:this._turnOff,className:"mls",ref:"closeButton"},ia.menu_option_text)):null;return (t.createElement("li",{className:ka,"data-gt":this.props.tracking},t.createElement("div",{className:"_4ai"},t.createElement(u,{interpolator:fa,ranges:la.ranges,aggregatedranges:la.aggregated_ranges,text:la.text}),t.createElement("a",{href:"#",onClick:this._undoGenericNegative,className:"mls"},da._("R\u00fcckg\u00e4ngig"))),t.createElement(o,{border:"none",spacing:"small",className:"_1v4c"},ra)));}if(this.state.showingOptions&&!this.props.useChevron){var sa=ga(this.props.application)?this._markAppAsHidden:this._onHide;return (t.createElement("li",{className:ka,"data-gt":this.props.tracking},t.createElement("div",{className:"_4ai"},t.createElement("div",null,t.createElement(u,{interpolator:fa,ranges:ia.confirm_question.ranges,aggregatedranges:ia.confirm_question.aggregated_ranges,text:ia.confirm_question.text})),t.createElement("div",{className:"mts"},t.createElement(y,{"data-gt":this._getModifiedTrackingString(ja.confirm),href:{url:'#'},label:ia.turn_off,use:"confirm",onClick:sa,disabled:this.state.sendingFeedback}),t.createElement(y,{"data-gt":this._getModifiedTrackingString(ja.cancel),href:{url:'#'},label:da._("Aktiviert lassen"),onClick:this._onCancelNegativeFeedback,disabled:this.state.sendingFeedback})))));}var ta=null;if(this.props.title)ta=t.createElement(u,{interpolator:fa,ranges:this.props.title.ranges,aggregatedranges:this.props.title.aggregated_ranges,text:this.props.title.text,renderEmoji:true,renderEmoticons:true});var ua=null,va=null;if(ia){var wa=this._onClickCloseButton,xa;xa=this._getModifiedTrackingString(ja.click);var ya=(("_4ah")+(' '+"_55m9"));ua=t.createElement(j,{className:ya,"data-gt":xa,size:"medium",tooltip:ia.button_tooltip,onClick:wa,ref:"closeButton"});}var za=r.localize(this.props.url),ab=null;if(!this.props.noPhotoPreviews)ab=p.getThumbnail(this.props.attachments,this.props.attached_story,this.props.feedback_context);var bb=ab&&r.snowliftable(za),cb=r.isVaultSetURI(za),db=r.isAlbumDraftRecoveryDialogURI(za),eb=((this.props.useChevron?"_55ma":'')+(' '+"_55m9")),fb=t.createElement(v,{className:eb,isRead:!!this.props.isRead,onClick:this._markItemReadIfUnreadFromReadButton,readLabel:da._("Gelesen"),unreadLabel:da._("Als gelesen markieren")}),gb=null;if(this.props.useChevron){ua=null;var hb=(("_1_0c")+(' '+"_55m9")),ib=null;if(ia)ib=t.createElement(ea,{onclick:this._onClickCloseButton,"data-gt":xa,ref:"closeButton"},t.createElement("div",{className:"_3-y-"},ia.menu_option_title),t.createElement("div",{className:"_3-y_"},ia.menu_option_text));var jb=this.props.gnfGiven?t.createElement(ea,{onclick:this._undoGenericNegative},t.createElement("div",{className:"_3-y-"},da._("Du hast kein Interesse daran")),t.createElement("div",{className:"_3-y_"},da._("R\u00fcckg\u00e4ngig machen"))):t.createElement(ea,{onclick:this._onClickGenericNegative},t.createElement("div",{className:"_3-y-"},da._("Kein Interesse daran?")),t.createElement("div",{className:"_3-y_"},da._("Teile es uns mit"))),kb=t.createElement(aa,null,jb,ib);gb=t.createElement(z,{alignh:"right",menu:kb,className:hb,onShow:this._onChevronShow,onHide:this._onChevronHide},t.createElement("div",{className:"_1_0d"}));}var lb=(bb||cb||db)?za:this.props.ajaxify_url,mb=null,nb=null,ob=cb?x.getSyncedTabURI().toString():za;if(bb){mb='theater';}else if(db){mb='async-post';}else if(cb||lb)mb='dialog';var pb=null,qb=this.props.actors[0];if(qb)pb={backgroundImage:'url('+qb.profile_picture.uri+')'};var rb=false;this.props.attachments.forEach(function(tb){if(rb)return;rb=tb.style_list.indexOf("notification_target")>=0||tb.style_list.indexOf("question")>=0;if(rb)return;});var sb=t.createElement("div",null,fb,ua,gb);return (t.createElement("li",{className:ka,"data-gt":this.props.tracking,onMouseLeave:va},t.createElement("div",{className:"anchorContainer"},t.createElement("a",{href:ob,ajaxify:lb,className:(("_33e")+(this.props.useChevron?' '+"_1_0e":'')),rel:mb,onClick:nb,onMouseDown:this._markItemRead,onKeyDown:this._onKeyDownItem},t.createElement(m,null,t.createElement("span",{style:pb,className:((!this.props.isNotifsPage?"_33h":'')+(this.props.isNotifsPage?' '+"_12u1":''))}),t.createElement(l,{flex:l.FLEX.left},t.createElement("div",{className:"_4l_v"},ta,t.createElement(m,{className:(("_33f")+(this.state.isBizSite?' '+"_2g48":''))},t.createElement("img",{className:"_10cu",src:this.props.icon.uri}),t.createElement("span",null,t.createElement(w,{shorten:this.props.shortenTimestamp,time:this.props.timestamp.time,text:this.props.timestamp.text,verbose:this.props.timestamp.verbose,className:"_33g"})))),this._renderAttachedImage(ab)))),sb)));}});e.exports=ha;},null);
__d("NotificationJewelList.react",["Animation","Event","LoadingIndicator.react","NotificationListPropTypes","NotificationListItem.react","React","ScrollableArea.react","Vector","cx","debounce","fbt","getObjectValues","isEmpty"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=160,u=530,v=40,w=64,x=430,y=l.createClass({displayName:"NotificationJewelList",propTypes:j,_isLoadingIndicatorVisible:function(){var z=this.refs.loading;if(!z)return false;var aa=l.findDOMNode(this.refs.scrollable),ba=n.getElementDimensions(aa).y;if(ba===0)return false;var ca=n.getElementPosition(aa).y+ba,da=n.getElementPosition(l.findDOMNode(z)).y;da-=v;return da<ca;},_calculateHeight:function(){var z=n.getViewportDimensions().y,aa=Math.min(this.props.maxHeight||u,z-t);if(this.props.upsell)return Math.max(aa-w,0);return aa;},_keepOnLoading:function(){if(this.isMounted())this.props.afterScroll(this._isLoadingIndicatorVisible());},_renderItems:function(){return r(this.props.notifs).map(function(z){var aa=z.alert_id;return (l.createElement(k,l.__spread({key:aa,visible:!this.props.hiddenState[aa],isRead:this.props.readState[aa],gnfGiven:this.props.gnfState[aa],negativeTracking:this.props.negativeTracking,shortenTimestamp:this.props.shortenTimestamp,useChevron:this.props.useChevron,onChevronShow:this.props.onChevronShow,onChevronHide:this.props.onChevronHide,paused:this.props.paused,parent:this},z)));}.bind(this));},componentDidMount:function(){var z=l.findDOMNode(this.refs.scrollable);h.listen(window,'resize',p(function(){if(!s(this.props.notifs))new g(z).to('height',this._calculateHeight()+'px').duration(100).go();}.bind(this)));},componentDidUpdate:function(z){if(this.props.paused&&!z.paused)if(this.props.shouldScroll&&this.refs.scrollable)this.refs.scrollable.getArea().scrollToTop(false);setTimeout(this._keepOnLoading,0);},render:function(){var z=this.props.notifs,aa=null,ba=null,ca=x,da=null;if(!s(z)){aa=l.createElement("ul",{"data-gt":this.props.tracking},this._renderItems());ba=this._calculateHeight();}else if(!this.props.canFetchMore)aa=l.createElement("div",{className:"_572e"},q._("Keine neuen Benachrichtigungen"));if(this.props.canFetchMore)da=l.createElement(i,{color:"white",size:"small",ref:"loading",className:"_33i"});var ea=null;if(this.props.upsell){var fa=this.props.upsell.module;ea=l.createElement(fa,l.__spread({},this.props.upsell.props));}var ga=(("_50-t")+(this.props.showingChevron?' '+"_2iy1":''));return (l.createElement("div",{className:ga},l.createElement(m,{ref:"scrollable",width:ca,height:ba,fade:true,persistent:true,onScroll:p(this._keepOnLoading)},aa,da),ea));}});e.exports=y;},null);
__d("NotificationJewelListController",["NotificationList.react","NotificationJewelList.react","React"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(k,l){"use strict";this.$NotificationJewelListController0=k;this.$NotificationJewelListController1=l;this.$NotificationJewelListController2=false;this.$NotificationJewelListController3=false;this.$NotificationJewelListController4();}j.prototype.open=function(){"use strict";this.$NotificationJewelListController2=true;this.$NotificationJewelListController4();};j.prototype.pause=function(){"use strict";this.$NotificationJewelListController3=true;this.$NotificationJewelListController4();};j.prototype.unpause=function(){"use strict";this.$NotificationJewelListController3=false;this.$NotificationJewelListController4();};j.prototype.$NotificationJewelListController4=function(){"use strict";i.render(i.createElement(g,{hasEverBeenOpened:this.$NotificationJewelListController2,paused:this.$NotificationJewelListController3,tracking:this.$NotificationJewelListController1.tracking,negativeTracking:this.$NotificationJewelListController1.negativeTracking,shortenTimestamp:this.$NotificationJewelListController1.shortenTimestamp,businessID:this.$NotificationJewelListController1.businessID,maxHeight:this.$NotificationJewelListController1.maxHeight,useChevron:this.$NotificationJewelListController1.useChevron,numPerPage:5,listRenderer:h,upsell:this.$NotificationJewelListController1.upsell||null}),this.$NotificationJewelListController0);};e.exports=j;},null);
__d("HashtagParser",["URLMatcher","getHashtagRegex"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=100,j=30,k=/@\[([0-9]+):([0-9]+):((?:[^\\\]]*(?:\\.)*)*)\]/g;function l(da){var ea=y(da),fa=0,ga=0;return n(da).map(function(ha){while(fa<ea.length){var ia=ea[fa],ja=ia.offset-ga;if(ja<ha.offset){ga+=ia.token.length-ia.name.length;fa++;}else break;}return {marker:ha.marker,tag:ha.hashtag,rawOffset:ha.offset+ga,offset:ha.offset};});}function m(da){return o(da,t(da));}function n(da){var ea=aa(da);return o(ea,p(da,ea));}function o(da,ea){return r(da).slice(0,j).filter(function(fa){var ga=v(fa.offset,fa.hashtag.length,ea);return !ga&&fa.hashtag.length<=i;});}function p(da,ea){return u(s(da),t(ea));}var q=h();function r(da){var ea=[];da.replace(q,function(fa,ga,ha,ia,ja){ea.push({marker:ha,hashtag:ia,offset:ja+ga.length});});return ea;}function s(da){return ba(da).map(function(ea){return [ea.offset,ea.name.length];});}function t(da){var ea=[],fa,ga=0;while((fa=g.permissiveMatch(da))){var ha=da.indexOf(fa);ea.push([ga+ha,fa.length]);da=da.substring(ha+fa.length);ga+=ha+fa.length;}return ea;}function u(da,ea){var fa=[],ga=0,ha=0,ia=0;while(ga<da.length&&ha<ea.length)if(da[ga][0]>ea[ha][0]){fa[ia++]=ea[ha++];}else fa[ia++]=da[ga++];return fa.concat(da.slice(ga),ea.slice(ha));}function v(da,ea,fa){if(!fa)return false;var ga=x(fa,da);return w(da,ea,fa,ga)||w(da,ea,fa,ga+1);}function w(da,ea,fa,ga){if(!fa[ga])return false;var ha=fa[ga][0],ia=fa[ga][1];return !((da+ea-1<ha)||(da>ha+ia-1));}function x(da,ea){var fa=0,ga=da.length-1;while(fa<=ga){var ha=Math.floor((fa+ga)/2),ia=da[ha][0];if(ia==ea){return ha;}else if(ia<ea){fa=ha+1;}else ga=ha-1;}return ga;}function y(da){var ea=[];da.replace(k,function(fa,ga,ha,ia,ja){ea.push({token:fa,id:ga,type:ha,name:ia,offset:ja});});return ea;}function z(da){return da?da.replace(/\\([^\\])/g,'$1').replace(/\\\\/g,'\\'):null;}function aa(da){return da.replace(k,function(ea,fa,ga,ha,ia){return z(ha);});}function ba(da){var ea=0,fa=0;return y(da).map(function(ga){var ha=da.indexOf(ga.token,fa);fa=ha+1;ha-=ea;var ia=z(ga.name);ea+=ga.token.length-ia.length;if(ha>=0)return {id:ga.id,name:ia,type:ga.type,offset:ha};});}var ca={};ca.parse=l;ca.parseWithoutMentions=m;e.exports=ca;},null);
__d("FacebarResultStoreUtils",["FacebarGlobalOptions"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={getQueryFeatures:function(i){var j={};if(g.enableBootstrapRanking){if(i.raw_text)j.FEATURE_QUERY_LENGTH=i.raw_text.length;if(i.tokens){j.FEATURE_QUERY_TOKENS=i.tokens.length;j.FEATURE_QUERY_TOKEN_LENGTH_SUM=0;for(var k=0;k<i.tokens.length;k++)j.FEATURE_QUERY_TOKEN_LENGTH_SUM+=i.tokens[k].length;}}return j;},addFeatures:function(i,j,k,l,m,n){if(!i.features)return;i.features={FEATURE_QUERY_LENGTH:l.FEATURE_QUERY_LENGTH,FEATURE_QUERY_TOKENS:l.FEATURE_QUERY_TOKENS,FEATURE_QUERY_TOKEN_LENGTH_SUM:l.FEATURE_QUERY_TOKEN_LENGTH_SUM};i.features.FEATURE_IS_EXACT_NAME_MATCH=m;i.features.FEATURE_IS_STOP_WORD_MATCH=n;if(j&&j.length>0){var o=j.split(' ').length,p=0;for(var q=0;q<i.termMatches.length;++q)if(j.search(i.termMatches[q])>=0)p++;i.features.FEATURE_TITLE_TOKEN_MATCH_FRACTION=p/o;}if(k.tokens&&k.tokens.length>0){var r=j.search(k.tokens[0]);i.features.FEATURE_FIRST_TERM_MATCH_POSITION=r;i.features.FEATURE_FIRST_TERM_MATCH_TOKEN=j.substring(0,r+k.tokens[0].length).split(' ').length;i.termMatches.some(function(s){if(s.search(k.tokens[0])===0){i.features.FEATURE_FIRST_TERM_MATCH_TOKEN_FRACTION=k.tokens[0].length/s.length;return true;}return false;});i.features.FEATURE_IN_ORDER_MATCH=1;if(k.tokens.length>1){r=j.search(k.tokens[1]);i.features.FEATURE_SECOND_TERM_MATCH_POSITION=r;i.features.FEATURE_SECOND_TERM_MATCH_TOKEN=j.substring(0,r+k.tokens[1].length).split(' ').length;i.termMatches.some(function(s){if(s.search(k.tokens[1])===0){i.features.FEATURE_FIRST_TERM_MATCH_TOKEN_FRACTION=k.tokens[0].length/s.length;return true;}return false;});if(i.features.FEATURE_SECOND_TERM_MATCH_TOKEN<i.features.FEATURE_FIRST_TERM_MATCH_POSITION)i.features.FEATURE_IN_ORDER_MATCH=0;}}return i;},processEntityResult:function(i,j,k,l,m,n,o,p,q){var r={semantic:j.toString(),structure:[{type:'ent:'+i,text:k,uid:j}],type:i,cost:l,cache_id_length:0,features:[]};r.tuid=JSON.stringify({semantic:r.semantic,structure:r.structure});if(g.enableBootstrapRanking){r.termMatches=o[j.toString()];r=this.addFeatures(r,k.toLowerCase(),m,n,p,q);}return r;},getRawTextFromStructured:function(i){var j=i.map(function(k){return k.getText();});return j.join('');},getTextFromResult:function(i){var j=i.structure,k='';j.forEach(function(l){k+=l.text;});return k;}};e.exports=h;},null);
__d("HashtagSearchResultUtils",["FacebarResultStoreUtils","HashtagParser","HashtagSearchResultConfig","URI","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l={getHashtagFromQuery:function(m){var n=h.parse(m);if(n&&n.length===1&&n[0].offset===0)return n[0].tag;return false;},makeTypeaheadResult:function(m){var n=k._("Hashtag");return {category:n,path:new j('/hashtag/'+m).toString(),photo:i.image_url,rankType:null,replace_results:i.boost_result?true:false,scaled_score:1,score:0,text:'#'+m,type:'hashtag_exact',uid:'hashtag:'+m};},makeFacebarEntry:function(m){var n=k._("Hashtag");return {category:n,path:new j('/hashtag/'+m).toString(),photo:i.image_url,replace_results:i.boost_result?true:false,text:'#'+m,type:'hashtag_exact',uid:'hashtag:'+m};},makeFacebarResult:function(m){var n=g.processEntityResult('hashtag_exact','hashtag:'+m,'#'+m,i.hashtag_cost);n.parse={display:[{type:'ent:hashtag_exact',uid:'hashtag:'+m}],remTokens:[],suffix:''};n.tags={hashtag:'hashtag'};return n;}};e.exports=l;},null);
__d("ContextualHelpSearchController",["Event","AsyncRequest","DOM","CSS","Focus","Input"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=400;function n(){this._token=null;this._timerID=0;this._lastQuery=null;this.typing_listener=null;this.clear_listener=null;this.async_request=null;}Object.assign(n.prototype,{init:function(o,p,q,r,s,t){this.loader=o;this.search_box=p;this.topics_area=q;this.results_area=r;this.clear_button=s;this.typing_listener=g.listen(this.search_box,'keyup',this.setTimer.bind(this));this.clear_listener=g.listen(this.clear_button,'click',this.clearResults.bind(this));if(t==null||t.focusSearchBox==null||t.focusSearchBox)k.set(this.search_box);},source:'contextual_help',clearResults:function(){this.show(this.topics_area);this._lastQuery='';l.reset(this.search_box);k.set(this.search_box);if(this.async_request!==null){this.async_request.abort();this.async_request=null;}j.addClass(this.clear_button,'hidden_elem');},update:function(){var o=l.getValue(this.search_box);if(o===this._lastQuery)return;this._lastQuery=o;if(o===''){this.clearResults();return;}this.show(this.loader);var p={query:o,width:this._width||m,source:this.source};this.async_request=new h('/help/ajax/search/').setData(p).setHandler(function(q){this._update(q);}.bind(this));this.async_request.send();},_update:function(o){this.async_request=null;var p=o.getPayload().results;i.setContent(this.results_area,p);this.show(this.results_area);if(l.getValue(this.search_box)===''){this.clearResults();}else j.removeClass(this.clear_button,'hidden_elem');},setTimer:function(){if(this._timerID!==0)clearTimeout(this._timerID);this._timerID=setTimeout(this.update.bind(this),300);if(this.async_request!=null){this.async_request.abort();this.async_request=null;}},show:function(o){var p=[this.loader,this.topics_area,this.results_area];for(var q=0;q<p.length;q++)j.addClass(p[q],'hidden_elem');j.removeClass(o,'hidden_elem');}});e.exports=n;},null);
__d("RequestsJewel",["Animation","AccessibilityLogger","Arbiter","AsyncRequest","AsyncSignal","ChannelConstants","CSS","DOM","Event","LinkController","Parent","ScrollableArea","Vector","$","debounce","ge","shield","fbt","requireWeak"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){b.__markCompiled&&b.__markCompiled();var z=null;y('FriendBrowserCheckboxController',function(ea){return z=ea;});var aa=530,ba=30,ca=160;Object.assign(da,{instance:null,getInstance:function(){return da.instance;},replaceJewelTitle:function(ea,fa){n.setContent(t(ea),fa);},updateFromDOM:function(){if(da.instance)da.instance.fromDom();},setInitialHeight:function(){if(da.instance)da.instance.setHeight();},maybeLoadJewel:function(){if(da.instance)da.instance.maybeLoadJewel();}});function da(ea,fa,ga){"use strict";da.instance=this;this.countNew=0;this.jewel=ea;this.jewelFlyoutCase=ea.getRoot();this.jewelFlyout=v('fbRequestsFlyout');this.newCountSpan=v('newRequestCount');this.folder=fa;this.doNewMarkRead=ga;this.openTimestamp=0;this.$RequestsJewel0={};this.$RequestsJewel1=0;this.shouldClearPredictionAssocOnClick=false;var ha=v('requestsMarkReadButton');if(ha)o.listen(ha,'click',w(this.$RequestsJewel2,this));this.jewel.subscribe('marked-seen',w(this.$RequestsJewel3,this));this.jewel.subscribe('closed',w(this.$RequestsJewel4,this));this.jewel.subscribe('updated',this.$RequestsJewel5.bind(this));this.jewel.subscribe('opened',this.$RequestsJewel6.bind(this));p.registerHandler(this.$RequestsJewel7.bind(this));i.subscribe(l.getArbiterType('jewel_requests_add'),this.$RequestsJewel8.bind(this));i.subscribe(l.getArbiterType('jewel_friending_notifs'),this.$RequestsJewel9.bind(this));i.subscribe(l.getArbiterType('jewel_requests_remove_old'),this.$RequestsJewela.bind(this));i.subscribe(l.getArbiterType('friend_requests_seen'),this.$RequestsJewelb.bind(this));o.listen(this.jewelFlyout,'submit',function(ja){var ka=q.byClass(ja.getTarget(),'objectListItem');if(ka){m.removeClass(ka,'jewelItemNew');m.addClass(ka,'jewelItemResponded');}}.bind(this));var ia=n.find(v('fbRequestsJewel'),'a[rel="toggle"]');o.listen(ia,'focus',function(ja){h.logFocusIn();}.bind(this));this.setupScroll();o.listen(window,'resize',u(function(){this.$RequestsJewelc();}.bind(this)));}da.prototype.setupScroll=function(){"use strict";var ea=n.scry(this.jewelFlyout,'.uiScrollableAreaWrap')[0];if(ea){this.$RequestsJeweld=ea;this.$RequestsJewele=0;this.$RequestsJewelf=o.listen(ea,'scroll',this.$RequestsJewelg.bind(this),o.Priority.$RequestsJewelh);}};da.prototype.fromDom=function(){"use strict";n.scry(this.jewelFlyout,'.jewelItemList li.objectListItem').forEach(function(ea){var fa=ea.getAttribute('id');if(fa){var ga=v(fa+'_status'),ha=this.$RequestsJeweli(fa);if(ha.requester)this.$RequestsJewel0[ha.requester]=fa;++this.$RequestsJewel1;}}.bind(this));this.$RequestsJewelj();};da.prototype.$RequestsJewelk=function(ea){"use strict";var fa=ea.match(/^(\d+)_(\d+)/);return (fa)?{requester:fa[1],type:fa[2]}:(void 0);};da.prototype.$RequestsJeweli=function(ea){"use strict";var fa=ea?this.$RequestsJewelk(ea):(void 0),ga;if(fa&&fa.requester){ga=parseInt(fa.requester,10);if(isNaN(ga))ga=(void 0);}var ha;if(fa&&fa.type){ha=parseInt(fa.type,10);if(isNaN(ha))ha=(void 0);}return {requester:ga,type:ha};};da.prototype.$RequestsJewell=function(){"use strict";if(this.countNew>0)this.countNew-=1;};da.prototype.$RequestsJewel7=function(ea,event){"use strict";var fa=q.byClass(ea,'jewelItemNew');if(fa&&q.byClass(fa,'fbRequestList')&&q.byClass(fa,'beeperEnabled')){var ga=this.$RequestsJewelk(fa.id);ga&&this.$RequestsJewel3(ga.requester,ga.type);this.$RequestsJewell();i.inform('jewel/count-updated',{jewel:'requests',count:this.countNew});m.removeClass(fa,'jewelItemNew');}return true;};da.prototype.$RequestsJewelm=function(){"use strict";return n.scry(this.jewelFlyout,'.uiScrollableArea')[0];};da.prototype.$RequestsJewelg=function(){"use strict";var ea=n.scry(this.$RequestsJeweld,'.uiMorePager');if(!ea)return;var fa=ea.pop();if(fa){var ga=s.getElementPosition(fa,'viewport').y;if(ga>0)m.addClass(q.byClass(this.$RequestsJeweld,'uiScrollableArea'),'contentAfter');var ha=n.find(fa,'a');if(!ha)return;var ia=s.getElementPosition(ha,'viewport').y;if(ia==this.$RequestsJewele)return;var ja=s.getElementPosition(this.$RequestsJeweld,'viewport').y+s.getElementDimensions(this.$RequestsJeweld).y;if(ia-300<ja&&ia>0){this.$RequestsJewele=ia;var ka=ha.getAttribute('ajaxify');if(ka){new j(ka).setRelativeTo(ha).setStatusElement(q.byClass(ha,'stat_elem')).send();}else z&&z.getInstance('jewel').showMore();}}};da.prototype.$RequestsJewel9=function(ea,fa){"use strict";if(!fa||this.jewel.isOpen())return;if(fa.obj.notif_type!=='friend_confirmed')return;if(v('fbRequestsJewelLoading')){new j().setURI('/ajax/requests/loader/').send();return;}var ga={};ga.reloadcontent=true;new j().setURI('/ajax/requests/loader/').setData(ga).send();};da.prototype.$RequestsJewel8=function(ea,fa){"use strict";if(!fa)return;var ga=fa.obj.from,ha=fa.obj.suggester,ia=this.$RequestsJeweli(this.$RequestsJewel0[ga]).type,ja=ia===19&&!ha;if(!ja&&(ia||this.jewel.isOpen()))return;if(v('fbRequestsJewelLoading')){new j().setURI('/ajax/requests/loader/').send();}else{var ka={};ka.reloadcontent=true;new j().setURI('/ajax/requests/loader/').setData(ka).send();}};da.prototype.$RequestsJewela=function(ea,fa){"use strict";if(!fa||this.jewel.isOpen()||v('fbRequestsJewelLoading')!==null)return;var ga=this.$RequestsJewel0[fa.obj.from],ha=ga&&v(ga);if(ha){if(m.hasClass(ha,'jewelItemNew')){this.$RequestsJewell();i.inform('jewel/count-updated',{jewel:'requests',count:this.countNew});}if(!m.hasClass(ha,'jewelItemResponded')){n.remove(ha);delete this.$RequestsJewel0[fa.obj.from];--this.$RequestsJewel1;this.$RequestsJewelj();}}};da.prototype.$RequestsJewel2=function(){"use strict";this.jewel.markSeen();this.$RequestsJewelo();};da.prototype.$RequestsJewel3=function(ea,fa){"use strict";var ga=n.scry(this.jewelFlyout,'li');new k('/ajax/gigaboxx/endpoint/UpdateLastSeenTime.php',{folder:this.folder,first_item:ga[0].id}).send();var ha=typeof ea!='undefined'&&typeof fa!='undefined'?{requester:ea,type:fa}:{};this.doNewMarkRead&&new k('/ajax/requests/mark_read/',ha).send();};da.prototype.$RequestsJewelb=function(ea,fa){"use strict";i.inform('jewel/count-updated',{jewel:'requests',count:0});};da.prototype.$RequestsJewelo=function(ea,fa){"use strict";n.scry(this.jewel.root,'li.jewelItemNew').forEach(function(ga){m.removeClass(ga,'jewelItemNew');});};da.prototype.$RequestsJewel5=function(ea,fa){"use strict";this.countNew=fa.count;m.conditionClass(this.jewelFlyout,'beeperUnread',this.countNew>0);m.conditionClass(this.jewelFlyoutCase,'showRequests',this.countNew>0);if(this.newCountSpan){var ga=this.countNew==1?x._("{num} NEUE ANFRAGE",[x.param("num",this.countNew)]):x._({"*":"{num} NEUE ANFRAGEN"},[x.param("num",this.countNew,[0])]);n.setContent(this.newCountSpan,ga);}};da.prototype.$RequestsJewelj=function(){"use strict";n.scry(this.jewelFlyout,'li.empty').forEach(function(ea){m.conditionShow(ea,this.$RequestsJewel1<=0);}.bind(this));};da.prototype.$RequestsJewel6=function(){"use strict";i.inform('requestsJewel/opened');var ea=v('fbRequestsJewelLoading'),fa=this.$RequestsJewelm();if(!ea&&!fa){this.unhandledRequest=true;}else if(ea){var ga=Date.now();if(this.openTimestamp+5000<ga){this.openTimestamp=ga;new j().setURI('/ajax/requests/loader/').setData({log_impressions:true}).send();}}else{var ha=Object.keys(this.$RequestsJewel0);if(ha.length>0)new j().setURI('/friends/requests/log_impressions').setData({ids:ha.join(','),ref:'jewel'}).send();}fa&&r.poke(fa);};da.prototype.$RequestsJewel4=function(){"use strict";i.inform('requestsJewel/closed');this.$RequestsJewelo();};da.prototype.$RequestsJewelp=function(){"use strict";return Math.min(Math.max(s.getViewportDimensions().y-ca,ba),aa);};da.prototype.$RequestsJewelc=function(){"use strict";if(this.$RequestsJewelm())new g(this.$RequestsJewelm()).to('height',this.$RequestsJewelp()+'px').duration(100).go();};da.prototype.setHeight=function(){"use strict";this.$RequestsJewelm().style.height=this.$RequestsJewelp()+'px';};da.prototype.maybeLoadJewel=function(){"use strict";if(this.unhandledRequest){this.unhandledRequest=false;this.$RequestsJewel6();}};e.exports=da;},null);
__d("JewelX",["Event","Arbiter","ArbiterMixin","CSS","DOM","HTML","Keys","TabIsolation","Toggler","Run","csx","emptyFunction","reportData","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u=function(v,w){v&&w&&this.init(v,w);};Object.assign(u,{_instancesByName:{},_resizeListener:null});Object.assign(u.prototype,i,{init:function(v,w){this.name=w.name;this.root=v;this.badge=w.badge;this.countNew=0;this.initialCount=0;this.escHandler=null;this.bootload_module=w.bootload_module;this.bootload_args=w.bootload_args;this.bootload_done=false;this.togglerInstance=o.createInstance(v).setSticky(false);p.onAfterLoad(function(){return this._setupBootload();}.bind(this));if(w.keepOpenForSnowlift)this.togglerInstance.setPrePageTransitionCallback(this._onPrePageTransition.bind(this));u._instancesByName[this.name]=this;var x=this.getFlyout(),y=new n(x);o.createInstance(x).setSticky(false);o.listen('show',this.root,function(z){this._logFirstClick();this.hasNew()&&this.markSeen();this.reset();this.inform('opened');h.inform('layer_shown',{type:'Jewel'});y.enable();this.setupEvents();this._setupBootload();}.bind(this));o.listen('hide',this.root,function(z,aa){this.hasNew()&&this.markSeen();this.reset();this.inform('closed');h.inform('layer_hidden',{type:'Jewel'});y.disable();this.removeEvents();}.bind(this));h.subscribe('jewel/count-updated',function(z,aa){aa.jewel==this.name&&this.update(aa);}.bind(this));h.subscribe('jewel/count-initial',function(z,aa){aa.jewel==this.name&&this.setInitial(aa);}.bind(this));h.subscribe('jewel/reset',function(z,aa){aa.jewel==this.name&&this.reset();}.bind(this));h.subscribe('jewel/focus',function(z,aa){if(this.isOpen())o.hide(this.root);}.bind(this));u._resizeListener=u._resizeListener||(function(){var z=null;return g.listen(window,'resize',function(){clearTimeout(z);z=t(h.inform.bind(h,'jewel/resize'),100);});})();},getRoot:function(){return this.root;},getFlyout:function(){if(typeof this._flyout==='undefined')this._flyout=k.find(this.root,".__tw");return this._flyout;},hasNew:function(){return j.hasClass(this.root,'hasNew');},isOpen:function(){return j.hasClass(this.root,'openToggler');},reset:function(){j.removeClass(this.root,'hasNew');},setContent:function(v){var w=k.find(this.root,'ul.jewelItemList');k.setContent(w,l(v));},update:function(v){this.countNew=v.count;if(typeof this.countNew==='number'&&this.countNew<0)this.countNew=0;this.badge.setLegacyContent(this.countNew);var w=isNaN(this.countNew)||this.countNew>0;j.conditionClass(this.root,'hasNew',w);this.inform('updated',v);},setInitial:function(v){this.initialCount=v;},setupEvents:function(){this.escHandler=g.listen(document.documentElement,'keydown',function(v){if(v.keyCode===m.ESC&&this.isOpen())o.hide(this.root);}.bind(this));},removeEvents:function(){if(this.escHandler){this.escHandler.remove();this.escHandler=null;}},markSeen:function(){h.inform('jewel/count-updated',{jewel:this.name,count:0},h.BEHAVIOR_STATE);this.inform('marked-seen');},_onPrePageTransition:function(v,w){if(!this._isSnowliftURI(w.from)&&!this._isSnowliftURI(w.to))this.togglerInstance&&this.togglerInstance.hide();},_isSnowliftURI:function(v){return v&&v.getQueryData().hasOwnProperty('theater');},_logFirstClick:function(){this._logFirstClick=r;s('jewel_click',{gt:{count:this.countNew,initial:this.initialCount,jewel:this.name}});},_setupBootload:function(){if(this.bootload_done||!this.bootload_module)return;this.bootload_done=true;this.bootload_module.load().then(function(v){return new v(this,this.bootload_args);}.bind(this));}});e.exports=u;},null);
__d("LitestandNewsfeedCountUpdater",["Arbiter","AsyncRequest","LitestandMessages","LitestandSidebarBookmarkConfig","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l,m;function n(){m&&clearTimeout(m);if(l)return;m=setTimeout(o,j.nf_count_query_interval_ms);}function o(){if(l)return;new h().setURI('/ajax/litestand/newsfeed_count').setHandler(function(r){if(l)return;p(r.getPayload());n();}).setAllowCrossPageTransition(true).send();}function p(r){g.inform(i.UPDATE_HOME_COUNT,{count:r,onHome:l},g.BEHAVIOR_STATE);}var q={init:function(){q.init=k;g.subscribe(i.NEWSFEED_LOAD,function(){l=true;p(0);});g.subscribe(i.LEAVE_HOME,function(){l=false;n();});n();}};e.exports=q;},null);
__d("LitestandChromeHomeCount",["Arbiter","CSS","DOM","Event","LitestandMessages","LitestandNewsfeedCountUpdater","Parent","UserAgent_DEPRECATED","csx","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=20,r,s,t,u,v,w={init:function(x){v=x;s=i.find(document,"div._uaw ._5ahz");r=s.parentNode;t=m.byClass(r,"_1ayn");u=false;g.subscribe(k.UPDATE_HOME_COUNT,function(y,z){w.updateBadge(z.onHome?0:z.count);});j.listen(t,'click',function(event){var y=event.getModifiers();if(y.shift||(n.osx()&&y.meta)||(n.windows()&&y.control))w.updateBadge(0);});l.init();w.updateBadge(v);},updateBadge:function(x){v=x;var y=x>0;w.toggleBadge(y);if(y){var z=x>q?q+'+':x;i.setContent(s,z);}},toggleBadge:function(x){if(u===x)return;u=x;h.conditionClass(r,"_5ahy",!x);}};e.exports=w;},null);
__d("MercuryJewelModuleLoader",["JSResource"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports=g('MercuryJewel');},null);
__d("RenderManager",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){"use strict";this._isDirty=false;this._obj=h;}g.prototype.dirty=function(){"use strict";if(!this._isDirty){this._isDirty=true;setTimeout(this._doPaint.bind(this),0);}};g.prototype._doPaint=function(){"use strict";this._isDirty=false;this._obj.paint();};e.exports=g;},null);
__d("CounterDisplay",["Arbiter","CSS","DOM","RenderManager","Run","$","removeFromArray"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();function n(o,p,q,r,s,t){Object.assign(this,{_name:o,_valueNode:l(p),_wrapperNode:l(q)||null,_statusClass:s,_rm:new j(this),_arbiterSubscription:null,_count:0});var u=this._valueNode.firstChild;if(u){var v=parseInt(u.nodeValue,10);if(!isNaN(v))this._count=v;}this._statusNode=r?l(r):null;this._subscribeAll();n.instances.push(this);if(!t)k.onLeave(this._destroy.bind(this),true);}Object.assign(n,{EVENT_TYPE_ADJUST:'CounterDisplay/adjust',EVENT_TYPE_UPDATE:'CounterDisplay/update',instances:[],adjustCount:function(o,p){g.inform(n.EVENT_TYPE_ADJUST+'/'+o,p);},setCount:function(o,p){g.inform(n.EVENT_TYPE_UPDATE+'/'+o,p);}});Object.assign(n.prototype,{_destroy:function(){delete this._valueNode;delete this._wrapperNode;if(this._arbiterSubscription){this._arbiterSubscription.unsubscribe();delete this._arbiterSubscription;}m(n.instances,this);},adjustCount:function(o){this._count=Math.max(0,this._count+o);this._rm.dirty();return this;},setCount:function(o){this._count=Math.max(0,o);this._rm.dirty();return this;},paint:function(){i.setContent(this._valueNode,this._count);this._toggleNodes();},_toggleNodes:function(){if(this._wrapperNode)h.conditionClass(this._wrapperNode,'hidden_elem',this._count<=0);if(this._statusClass&&this._statusNode)h.conditionClass(this._statusNode,this._statusClass,this._count>0);},_subscribeAll:function(){var o=[n.EVENT_TYPE_ADJUST+'/'+this._name,n.EVENT_TYPE_UPDATE+'/'+this._name];this._arbiterSubscription=g.subscribe(o,this._onInform.bind(this),g.SUBSCRIBE_NEW);},_onInform:function(o,p){p=parseInt(p);if(isNaN(p))return;if(o.indexOf(n.EVENT_TYPE_ADJUST)!=-1){this.adjustCount(p);}else if(o.indexOf(n.EVENT_TYPE_UPDATE)!=-1){this.setCount(p);}else return;return;}});e.exports=n;},null);
__d("MessagingEvents",["Arbiter","ChannelConstants","arrayContains","isEmpty"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={},l=new g();function m(n){if(!j(k))return;for(var o in n)l.inform('count/'+o,n[o]);}l.subscribe('mark-as-read',function(n,o){(o.tids||o.chat_ids||[]).forEach(function(p){p=''+p;if(!(p in k)){k[p]=true;var q=function(){l.unsubscribe(r);clearTimeout(s);delete k[p];},r=l.subscribe('read',function(t,u){if(i((u.tids||[]),p)||i((u.chat_ids||[]),p))q();}),s=setTimeout(q,60000);}});});g.subscribe(h.getArbiterType('messaging'),function(n,o){var p=Object.assign({},o.obj),event=p.event||'';delete p.type;delete p.event;l.inform(event,p);if('unread_counts' in p){var q=p.unread_counts;m({unread:q.inbox,other_unseen:q.other});}});g.subscribe(h.getArbiterType('inbox'),function(n,o){var p=Object.assign({},o.obj);delete p.type;m(p);});a.MessagingEvents=e.exports=l;},3);
__d("TitanLeftNav",["CounterDisplay","MessagingEvents"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={initialize:function(){h.subscribe('count/other_unseen',function(j,k){g.setCount('other_unseen',k);});}};e.exports=i;},null);
__d("AccessibilityShortcut",["AccessibilityLogger","Event","Focus","ge","onEnclosingPageletDestroy","warning"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m={init:function(n,o){var p=h.listen(n,'click',function(q){q.preventDefault();var r=j(o);if(r){i.set(r);g.logSRKey();}else l(r,'Failed to set focus on element with ID: %s',o);});k(n,function(){return p.remove();});}};e.exports=m;},null);
__d("isEmail",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=/^[\w!#\$%&'\*\+\/\=\?\^`\{\|\}~\-]+(:?\.[\w!#\$%&'\*\+\/\=\?\^`\{\|\}~\-]+)*@(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?$/i;function h(i){return g.test(i);}e.exports=h;},null);
__d("NotificationJewelReminder",["Arbiter","ContextualDialog","ContextualDialogXUITheme","DOM","Event","ImageBlock.react","LayerFadeOnHide","LayerFadeOnShow","NotificationStore","React","SubscriptionsHandler","Toggler","$","cx","fbt","intlList"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w=2,x="fbRequestsJewel",y="fbNotificationsJewel";z.init=function(aa){"use strict";new z(aa);};function z(aa){"use strict";this.$NotificationJewelReminder0=aa;if(aa.request.count>0&&aa.show_request){this.$NotificationJewelReminder1(x);}else this.$NotificationJewelReminder2();}z.prototype.$NotificationJewelReminder2=function(){"use strict";if(!this.$NotificationJewelReminder0.show_notif)return;if(o.getCount()){this.$NotificationJewelReminder3();return;}};z.prototype.$NotificationJewelReminder3=function(){"use strict";o.getNotifications(o.getCount(),this.$NotificationJewelReminder4.bind(this));};z.prototype.$NotificationJewelReminder4=function(aa){"use strict";var ba=r.getInstance(s(y));if(ba&&ba.isShown())return;var ca=[],da,ea=Object.keys(aa);for(var fa=0;fa<ea.length;fa++){if(!aa[ea[fa]].showBeep)continue;var ga=aa[ea[fa]].actors;if(ga.length===0)continue;for(var ha=0;ha<ga.length;ha++){da=da||ga[ha].profile_picture.uri;if(ca.length<w&&ga[ha].name&&ca.indexOf(ga[ha].name)===-1)ca.push(ga[ha].name);}if(ca.length===w)break;}if(ca.length===0||!da)return;var ia=this.$NotificationJewelReminder5(da,ca,ea.length,y);this.$NotificationJewelReminder6(ia);};z.prototype.$NotificationJewelReminder5=function(aa,ba,ca,da){"use strict";var ea=p.createElement("div",{className:"_5bov"},p.createElement(l,null,p.createElement("img",{className:"_5bow",src:aa}),p.createElement("div",null,this.$NotificationJewelReminder7(ca,ba,da)))),fa=j.create('div');p.render(ea,fa);var ga=new h({alignment:'right',contextSelector:'#'+da,offsetY:-10,position:'below',theme:i,width:210},fa);ga.enableBehaviors([n,m]);return ga;};z.prototype.$NotificationJewelReminder7=function(aa,ba,ca){"use strict";ba=ba.map(function(da){return p.createElement("b",null,da);});if(ca===y){return (u._({"*":{"notifications":"{number} Benachrichtigungen von {notification senders}","notification":"{number} Benachrichtigung von {notification senders}"}},[u.param("number",aa,[0]),u['enum'](aa>1?'notifications':'notification',{notifications:"notifications",notification:"notification"}),u.param("notification senders",v(ba))]));}else return (u._({"*":{"requests":"{number} Freundschaftsanfragen von {request senders}","request":"{number} Freundschaftsanfrage von {request senders}"}},[u.param("number",aa,[0]),u['enum'](aa>1?'requests':'request',{requests:"requests",request:"request"}),u.param("request senders",v(ba))]));};z.prototype.$NotificationJewelReminder6=function(aa){"use strict";aa.show();this.$NotificationJewelReminder8=aa;var ba=aa.getRoot();this.$NotificationJewelReminder9=setTimeout(this.$NotificationJewelRemindera.bind(this),this.$NotificationJewelReminder0.show_time);this.$NotificationJewelReminderb=new q();this.$NotificationJewelReminderb.addSubscriptions(g.subscribe('layer_shown',function(ca,da){if(da&&da.type==='Jewel')this.$NotificationJewelRemindera();}.bind(this)),k.listen(ba,'mouseenter',function(){clearTimeout(this.$NotificationJewelReminder9);}.bind(this)),k.listen(ba,'mouseleave',this.$NotificationJewelRemindera.bind(this)),k.listen(ba,'click',function(){this.$NotificationJewelRemindera();r.show(s(y));}.bind(this)));};z.prototype.$NotificationJewelRemindera=function(){"use strict";clearTimeout(this.$NotificationJewelReminder9);this.$NotificationJewelReminder8.hide();this.$NotificationJewelReminderb.release();};z.prototype.$NotificationJewelReminder1=function(aa){"use strict";if(!this.$NotificationJewelReminder0.show_request||!this.$NotificationJewelReminder0.request.count)return;var ba=r.getInstance(s(aa));if(ba&&ba.isShown())return;var ca=this.$NotificationJewelReminder5(this.$NotificationJewelReminder0.request.pics[0],this.$NotificationJewelReminder0.request.names,this.$NotificationJewelReminder0.request.count,aa);this.$NotificationJewelReminderd(ca);};z.prototype.$NotificationJewelReminderd=function(aa){"use strict";aa.show();this.$NotificationJewelRemindere=aa;var ba=aa.getRoot();this.$NotificationJewelReminderf=setTimeout(this.$NotificationJewelReminderg.bind(this),this.$NotificationJewelReminder0.show_time);this.$NotificationJewelReminderh=new q();this.$NotificationJewelReminderh.addSubscriptions(g.subscribe('layer_shown',function(ca,da){if(da&&da.type==='Jewel')this.$NotificationJewelReminderg();}.bind(this)),k.listen(ba,'mouseenter',function(){clearTimeout(this.$NotificationJewelReminderf);}.bind(this)),k.listen(ba,'mouseleave',this.$NotificationJewelReminderg.bind(this)),k.listen(ba,'click',function(){this.$NotificationJewelReminderg();r.show(s(x));}.bind(this)));};z.prototype.$NotificationJewelReminderg=function(){"use strict";clearTimeout(this.$NotificationJewelReminderf);this.$NotificationJewelRemindere.hide();this.$NotificationJewelReminderh.release();this.$NotificationJewelReminder2();};e.exports=z;},null);
__d("PagesVoiceBar",["$","Arbiter","AsyncRequest","BlueBar","ChannelConstants","DOM","URI","ViewportBounds"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o='PagesVoiceBar/initialized',p='PagesVoiceBar/switchVoice',q='page_transition',r='pages_voice_bar_sync',s=null,t=null,u=false,v=false,w=n.addTop(0);function x(da,ea){new i('/ajax/pages/switch_voice.php').setData(ea).setHandler(function(fa){ba();}).send();}function y(){s=null;}function z(da,ea){if(ea.obj.profile_id&&ea.obj.profile_id===s)ba();}function aa(da){h.subscribe(o,da);}function ba(){m.getNextURI().go();}var ca={initVoiceBar:function(){if(v)return;t=g('pagesVoiceBarContent');h.subscribe(p,x);h.subscribe(q,y);h.subscribe(k.getArbiterType(r),z);v=true;u=l.contains(j.getBar(),t);h.inform(o,null,h.BEHAVIOR_STATE);},update:function(da,ea){aa(function(){s=ea;l.setContent(t,da);var fa=t.offsetHeight;if(!u&&w.getSize()!==fa){w.remove();w=n.addTop(n.getTop()+fa);}});}};e.exports=ca;},null);
__d("PrivacyLiteFlyout",["Animation","Arbiter","ArbiterMixin","AsyncDialog","AsyncRequest","Banzai","CSS","DOM","Ease","Event","PrivacyConst","Style","SubscriptionsHandler","Toggler","XPrivacyCheckupSpawnDialogController","XPrivacyRemindersDismissController","csx","cx","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){b.__markCompiled&&b.__markCompiled();var z='PrivacyLiteFlyout/expandingSection',aa={},ba={};function ca(ia,ja,ka){var la=ja?0:ia.offsetHeight;r.set(ia,'height',la+'px');r.set(ia,'overflow','hidden');m.show(ia);var ma=ja?ia.scrollHeight:0,na=n.getID(ia);aa[na]&&aa[na].stop();aa[na]=new g(ia).to('height',ma).ondone(function(){aa[na]=null;r.set(ia,'height','');r.set(ia,'overflow','');ma||m.hide(ia);ka();}).duration(Math.abs(ma-la)*1.5).ease(o.sineOut).go();}function da(ia){var event='other_section';switch(ia){case 'who_can_see':case 'who_can_contact':case 'how_to_stop':event=ia;break;}return event;}var ea=null,fa=false,ga=false,ha=Object.assign({loadBody:function(){this._loadBody(false);},loadBodyFromMegaphone:function(){this._loadBody(true);},_loadBody:function(ia){if(!fa&&y('fbPrivacyLiteFlyoutLoading')){fa=true;new k('/ajax/privacy/privacy_lite/loader').setData({from_megaphone:ia}).send();}},_addListener:function(ia,event,ja){return p.listen(ia,'click',function(){l.post('privacy_lite',{event:event,exit_point:ja});});},addLoggingElem:function(ia,event,ja){var ka=this._loggingElements.length,la={elem:ia,event:event,exit:ja};this._loggingElements[ka]=la;},registerSettingsAndBasicsLinkLogging:function(ia,event,ja,ka){var la=n.scry(ia,"._5cw0")[0],ma=n.scry(ia,"._3djx")[0];if(la){this._settingsLinkListener&&this._settingsLinkListener.release();this._settingsLinkListener=this._addListener(la,event,ja);}if(ma){this._privacyBasicsLinkListener&&this._privacyBasicsLinkListener.release();this._privacyBasicsLinkListener=this._addListener(ma,event,ka);}},_subscribeListeners:function(){this._loggingElements&&this._loggingElements.forEach(function(ia){this._subscriptions&&this._subscriptions.addSubscriptions(this._addListener(ia.elem,ia.event,ia.exit));},this);},renderBody:function(ia,ja){var ka=y('fbPrivacyLiteFlyoutLoading');if(ka){n.replace(ka,ia);ha.registerCallback(function(){ha.inform('load',null,h.BEHAVIOR_STATE);},ja);}},hideCleanup:function(ia){h.inform(z);var ja=n.scry(ia,"._2va0").forEach(function(ka){m.removeClass(ka,"_2va0");});},registerFlyoutToggler:function(ia,ja,ka){this._loggingElements=[];ea=ja;var la=t.createInstance(ia);la.setSticky(false);t.listen(['show','hide'],ja,function(ma){ha.inform(ma);ga=ma==='show';if(!ga){ha.hideCleanup(ia);la.hide();this._subscriptions&&this._subscriptions.release();this._subscriptions=null;h.inform('layer_hidden',{type:'PrivacyShortcutsFlyout'});}else{h.inform('layer_shown',{type:'PrivacyShortcutsFlyout'});if(ka){ka.start(this);ka=null;}h.subscribeOnce(z,function(){this._subscriptions&&this._subscriptions.release();this._subscriptions=new s();this._subscribeListeners();}.bind(this));l.post('privacy_lite',{event:'show_flyout',exit_point:null});}}.bind(this));},isFlyoutVisible:function(){return ea&&t.getActive()===ea;},exists:function(){return !!n.scry(document.body,"._59fc")[0];},setFlyoutVisible:function(ia){ia?t.show(ea):t.hide(ea);},showSection:function(ia){var ja=ba[ia];if(!ja)return;if(!ja.sublist_container){ha.inform('expanded',ia,h.BEHAVIOR_STATE);return;}var ka=ja.chevron,la=ja.sublist_container;h.inform(z,ka);if(ha.inform('expand',ia)!==false){m.removeClass(ka,"_9or");m.addClass(ka,"_9os");ca(la,true,function(){ha.inform('expanded',ia);});}},hideSection:function(ia,ja,ka){var la=ba[ia],ma=la.chevron,na=la.sublist_container;if(ka===ma)return;if(ha.inform('collapse',ia)!==false){m.addClass(ma,"_9or");m.removeClass(ma,"_9os");ca(na,false,function(){ha.inform('collapsed',ia);});}},toggleSection:function(ia){var ja=ba[ia].chevron;t.getInstance(ja).hide();if(m.hasClass(ja,"_9or")){ha.showSection(ia);l.post('privacy_lite',{event:da(ia)+'_expand',exit_point:null});new k('/ajax/privacy/privacy_lite/log_section_expand').setData({section:ia}).send();}else{ha.hideSection(ia);l.post('privacy_lite',{event:da(ia)+'_collapse',exit_point:null});}},registerSection:function(ia,ja){ba[ia]=ja;if(ja.sublist_container){h.subscribe(z,ha.hideSection.bind(null,ia));p.listen(ja.section_block,'click',ha.toggleSection.bind(null,ia));}ha.inform(ia);},registerInlineHelpOnAudienceChangeNewSelector:function(ia,ja,ka,la){ia=ia.getInstance();ia.subscribe('changed',function(ma){this._registerInlineHelpOnAudienceChange(ja,ka,la,ia.getSelectedBaseValue());}.bind(this));},registerSelectorLogging:function(ia,ja,ka,la){ia=ia.getInstance();ia.subscribe('open',function(){l.post('privacy_lite',{event:ja,exit_point:null});});ia.subscribe('close',function(){l.post('privacy_lite',{event:ka,exit_point:null});});ia.subscribe('changed',function(){l.post('privacy_lite',{event:la,exit_point:null});});},_registerInlineHelpOnAudienceChange:function(ia,ja,ka,la){var ma=n.find(ia,"._9o_"),na=n.find(ia,"._2v9_");if(ka){var oa=n.find(ia,"._5n9w"),pa=(la==q.BaseValue.EVERYONE);m.conditionShow(oa,pa);m.conditionShow(ma,!pa);if(oa&&pa){var qa=(v.getURIBuilder()).setString('type','delta_everyone').setBool('log_plite',true).getURI();new k(qa).send();}}else m.show(ma);m.hide(na);if(ja)new k('/ajax/privacy/privacy_lite/kill_intro').send();},registerInlineHelpXOutOnClick:function(ia,ja,ka){p.listen(ia,'click',function(){m.addClass(ja,"_9p0");});},registerBlockUnhideOnFocus:function(ia,ja){p.listen(ia,'focus',function(ka){m.show(ka);l.post('privacy_lite',{event:'block_user_input_click',exit_point:null});}.bind(this,ja));},registerMessageFilterSettingOnClick:function(ia,ja){var ka=n.find(ia,"._fv0");p.listen(ia,'click',function(){if(ka.checked){new k('/ajax/mercury/change_filtering_type.php').setData({filtering_type:ja,source:'privacy_lite'}).send();}else{var event='basic_filtering';if(ja==='strict')event='strict_filtering';l.post('privacy_lite',{event:event,exit_point:null});}});},registerPrivacyCheckupListener:function(ia){p.listen(ia,'click',function(){this.setFlyoutVisible(false);j.send(new k((u.getURIBuilder()).setEnum('source','plite').getURI()));l.post('privacy_lite',{event:'exit_flyout',exit_point:'privacy_checkup'});}.bind(this));},displayPrivacyCheckup:function(ia){ia.show();}},i);e.exports=ha;},null);
__d("PrivacyLiteFlyoutHelp",["Event","Arbiter","AsyncRequest","Banzai","ContextualHelpSearchController","CSS","DOM","Parent","csx","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q,r;function s(t,u,v,w,x){this._width=315;r=m.find(u,'input');var y=m.create('div');this.init(t,r,y,v,w,{focusSearchBox:false});q=n.byClass(u,"_8-a");g.listen(x,'click',function(){this._hideSearch(this);j.post('privacy_lite',{event:'plite_search_collapse',exit_point:null});}.bind(this));h.subscribe('PrivacyLiteFlyout/expandingSection',this._hideSearch.bind(this));var z=m.scry(q,"._d1r")[0];z&&g.listen(z,'click',function(){l.addClass(q,"_aw6");r.focus();j.post('privacy_lite',{event:'plite_search_expand',exit_point:null});if(!this.suggestedResults)new i('/ajax/privacy/privacy_lite/help_suggestions').setHandler(function(aa){var ba=aa.getPayload().searchSuggestions,ca=m.find(q,"._4_8m");m.setContent(ca,ba);l.addClass(q,"_4_8l");}.bind(this)).send();}.bind(this));}Object.assign(s.prototype,new k(),k.prototype,{source:'privacy_shortcuts',_hideSearch:function(){this.clearResults();l.removeClass(q,"_aw6");},show:function(t){if(t===this.topics_area){l.removeClass(q,"_aw7");return;}else if(t===this.loader){l.addClass(q,"_aw7");l.hide(this.results_area);}else l.hide(this.loader);l.show(t);}});e.exports=s;},null);
__d("ViewasChromeBar",["Event","Arbiter","AsyncRequest","CSS","DOM","Focus","ModalMask","PageTransitionsRegistrar","Parent","cx","csx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r='ViewasChromeBar/initialized',s=null,t=false;function u(x){h.subscribe(r,x);}function v(x){j.addClass(x,"_7g7");var y=k.find(x,"._7g0");l.set(k.find(y,'.textInput'));}var w={initChromeBar:function(x){if(t)return;s=x;t=true;h.inform(r,null,h.BEHAVIOR_STATE);},update:function(x,y){u(function(){k.setContent(s,x);if(y)new i('/ajax/privacy/glasgow/viewas_bar_flyout_open').send();});},registerSpecificModeOnClick:function(x){g.listen(x,'click',v.bind(null,o.byClass(x,"_7f-")));},registerFlyoutModalMask:function(){m.show();n.registerHandler(m.hide,10);}};e.exports=w;},null);
__d("SearchSingleState",["fbt"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(j,k,l,m){return {classNames:'grammar',groupIndex:0,indexInGroup:j,path:k,text:l,type:'grammar',uid:m};}var i={getSuggestions:function(j,k,l){if(l==='ent:user'){return this.getSuggestionsForUser(j,k);}else if(l==='ent:page'){return this.getSuggestionsForPage(j,k);}else if(l==='ent:app'){return this.getSuggestionsForApp(j,k);}else if(l==='ent:group')return this.getSuggestionsForGroup(j,k);},getSuggestionsForUser:function(j,k){return [h(0,'/search/'+j+'/photos-of',g._("Fotos von {full name}",[g.param("full name",k)]),'photos_of_user'),h(1,'/search/'+j+'/friends',g._("Freunde von {full name}",[g.param("full name",k)]),'friends_of_user'),h(2,'/search/'+j+'/pages-liked',g._("Lieblingsseiten von {full name}",[g.param("full name",k)]),'pages_liked_user'),h(3,'/search/str/'+k+'/users-named',g._("finde alle Menschen mit dem Namen \u201e{full name}\u201c",[g.param("full name",k)]),'people_named_text')];},getSuggestionsForPage:function(j,k){return [h(0,'/search/'+j+'/photos-of',g._("Fotos von {name of page}",[g.param("name of page",k)]),'photos_of_page'),h(1,'/search/'+j+'/likers',g._("Personen, denen {name of page} gef\u00e4llt",[g.param("name of page",k)]),'page_likers'),h(2,'/search/str/'+k+'/pages-named',g._("finde alle Seiten mit dem Namen \u201e{name of page}\u201c",[g.param("name of page",k)]),'pages_named_text')];},getSuggestionsForGroup:function(j,k){return [h(0,'/search/'+j+'/members',g._("Mitglieder von {name of group}",[g.param("name of group",k)]),'members_of_group'),h(1,'/search/'+j+'/photos-in',g._("Fotos in {name of groups}",[g.param("name of groups",k)]),'photos_in_group'),h(2,'/search/'+j+'/creators',g._("\u201e{name of group}\u201c-Ersteller",[g.param("name of group",k)]),'creators_of_group'),h(3,'/search/'+j+'/admins',g._("{name of group} Administratoren",[g.param("name of group",k)]),'admins_of_group')];},getSuggestionsForApp:function(j,k){return [h(0,'/search/'+j+'/apps-similar-to',g._("\u00c4hnlich wie {name of app}",[g.param("name of app",k)]),'similar_apps'),h(1,'/search/'+j+'/app-users',g._("Personen, die {name of app} verwenden",[g.param("name of app",k)]),'app_users'),h(2,'/search/str/'+k+'/pages-named',g._("finde alle Apps mit dem Namen \u201e{name of page}\u201c",[g.param("name of page",k)]),'apps_named_text')];}};e.exports=i;},null);
__d("SearchDataSource",["Event","Arbiter","AsyncResponse","DataSource","HashtagSearchResultUtils","createArrayFromMixed","PageTransitionsRegistrar","SearchSingleState","UnicodeCJK","debounce","errorCode"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r=100,s='/typeahead/search/facebar/nullstate/';for(var t in j)if(j.hasOwnProperty(t))v[t]=j[t];var u=j===null?null:j.prototype;v.prototype=Object.create(u);v.prototype.constructor=v;v.__superConstructor__=j;function v(w){"use strict";this._token=w.token||'';this._lazyonload=w.lazyonload===false?false:true;this._extraTypes=w.extraTypes;this._buckets=w.buckets;this._noMultiFetch=w.noMultiFetch||false;this._nullStateConfig=w.nullStateConfig||{};var x=w.maxResults||8;j.call(this,w);this._numResults={min:3,max:x};this.recordingRoute='non_banzai';this._enabledHashtag=w.enabledHashtag||false;this.logBackendQueriesWindow=w.logBackendQueriesWindow||25;this._genTime=w.genTime;this._bootstrapError=false;this.cacheUnicodeMatch.setConfigs({prefix_hangul_conjoining_jamo:true,prefix_kana_drop_trailing_latin:w.cjkDropLatinInCjTokens,prefix_kana_hiragana_to_katakana:w.cjkUiCacheHiraganaToKatakana});this.backendUnicodeMatch.setConfigs({prefix_kana_drop_trailing_latin:w.cjkDropLatinInCjTokens});}v.prototype.init=function(){"use strict";u.init.call(this);this._leanPayload=null;this._bootstrapRequestsPending=0;this._criticalOnly=true;this._updateMaxResults();var w=p(this._updateMaxResults,r,this,true);g.listen(window,'resize',w);if(this._nullStateConfig.prefetchNullState)this.fetchNullState('');if(this._nullStateConfig.singleState)h.subscribe('page_transition',this.handlePageTransition.bind(this));if(this._nullStateConfig.prefetchNullState||this._nullStateConfig.singleState)h.subscribe('search/updateNullState',this.updateNullState.bind(this));if(this._nullStateConfig.recent)h.subscribe('search/refreshRecentSearchesNullstate',this.refreshRecentSearches.bind(this));};v.prototype.refreshRecentSearches=function(){"use strict";this.nullStateData=null;};v.prototype.handlePageTransition=function(){"use strict";this.nullStateParams={};};v.prototype.updateNullState=function(event,w){"use strict";this.nullStateParams=w;this.fetchNullState();};v.prototype.markResultsAsNullState=function(w){"use strict";var x,y,z;if(w){var aa;for(x=w,y=Array.isArray(x),z=0,x=y?x:x[typeof Symbol=="function"?Symbol.iterator:"@@iterator"]();;){if(y){if(z>=x.length)break;aa=x[z++];}else{z=x.next();if(z.done)break;aa=z.value;}aa.isNullState=true;}}};v.prototype.markResultsAsSingleState=function(w){"use strict";var x,y,z;if(w){var aa;for(x=w,y=Array.isArray(x),z=0,x=y?x:x[typeof Symbol=="function"?Symbol.iterator:"@@iterator"]();;){if(y){if(z>=x.length)break;aa=x[z++];}else{z=x.next();if(z.done)break;aa=z.value;}aa.isSingleState=true;}}};v.prototype.fetchNullState=function(w){"use strict";this.lastNullOrSingleStateFetchStartTime=Date.now();if(!this._nullStateConfig.hasNullState)return;var x=null;if(this.nullStateParams&&this.nullStateParams.uid){this.nullStateParams.query=w||'';x=this._fetchDataForSingleState();this.markResultsAsNullState(x);}else{x=this._fetchDataForNullState();this.markResultsAsSingleState(x);}if(x)this.inform('respond',{value:this.nullStateParams?this.nullStateParams.query:'',results:x,isAsync:false,nullState:true});};v.prototype._fetchDataForSingleState=function(){"use strict";if(this.nullStateDataWithProfile&&this.nullStateParams.uid===this.nullStateDataWithProfile.profileID)return this.nullStateDataWithProfile.data;if(this.nullStateParams.type==='ent:app'||this.nullStateParams.type==='ent:group'||this.nullStateParams.type==='ent:page'){this.fetch(s,{profile_id:this.nullStateParams.uid,ent_type:this.nullStateParams.type},{singleState:true});this.nullStateDataWithProfile={profileID:this.nullStateParams.uid};return;}var w=n.getSuggestions(this.nullStateParams.uid,this.nullStateParams.text,this.nullStateParams.type);if(!w)return this._fetchDataForNullState();this.nullStateDataWithProfile={data:w,profileID:this.nullStateParams.uid};return w;};v.prototype._shouldRefreshNullState=function(){"use strict";if(!this._nullStateConfig.recent)return false;var w=window.location.href;if(!w)return false;if(w.contains('allactivity')&&w.contains('log_filter=search'))return true;return false;};v.prototype._fetchDataForNullState=function(){"use strict";if(this.nullStateData&&!this._shouldRefreshNullState()){this.markResultsAsNullState(this.nullStateData);setTimeout(function(){this.inform('respond',{value:'',results:this.nullStateData,isAsync:true,nullState:true});}.bind(this),0);return;}if(!this.fetchingNullState){this.fetchingNullState=true;this.fetch(s,{value:""},{nullState:true,value:''});}return null;};v.prototype.dirty=function(){"use strict";u.dirty.call(this);this._bootstrapError=false;this._fetchOnUseRequests=[];};v.prototype.asyncErrorHandler=function(w,x){"use strict";if(x.nullState)this.fetchingNullState=false;if(x.bootstrap)this._bootstrapError=true;this.inform('fetchError',{response:w,fetch_context:x});if(window.Dialog&&window.Dialog.getCurrent()==null&&w.getError()==1400003)i.verboseErrorHandler(w);};v.prototype.fetch=function(w,x,y){"use strict";y=y||{};y.fetch_start=Date.now();var z=m.getMostRecentURI().path;x=Object.assign({},x,{path:z});u.fetch.call(this,w,x,y);};v.prototype.fetchHandler=function(w,x){"use strict";if(x.nullState){this.fetchingNullState=false;this.nullStateData=w.getPayload().entries;this.markResultsAsNullState(this.nullStateData);this.inform('respond',{value:'',results:this.nullStateData,isAsync:true,nullState:true});return;}if(x.singleState){this.nullStateDataWithProfile.data=w.getPayload().entries;this.markResultsAsSingleState(this.nullStateDataWithProfile.data);this.inform('respond',{results:this.nullStateDataWithProfile.data,isAsync:true,value:this.nullStateParams?this.nullStateParams.query:'',nullState:true});return;}var y=w.getPayload(),z=Object.assign({fetch_end:Date.now()},x),aa=z.value?h.BEHAVIOR_EVENT:h.BEHAVIOR_PERSISTENT;this.inform('beginFetchHandler',{response:w});if(x.bootstrap)this._bootstrapError=false;if(x.type=='lean'){this._leanPayload=y;this._processLean();}else{if(y.coeff2_ts)z.coeff2_ts=y.coeff2_ts;u.fetchHandler.call(this,w,x);if(x.bootstrap&&!w.getRequest().getData().no_cache)z.browserCacheHit=(y.timestamp<this._genTime);if(x.bootstrap&&!y.no_data&&this._bootstrapRequestsPending>0){x.bootstrap=false;--this._bootstrapRequestsPending;!this._bootstrapRequestsPending&&this._bootstrapPostProcess();}if(y.no_data||y.stale||y.token!==this._token){var ba=Object.assign({},w.getRequest().getData());if(ba.lazy){delete ba.lazy;ba.token=this._token;this._fetchOnUse(ba,x);}}}this.inform('endpointStats',{info:z,response:w},aa);if(x&&!!x.value)this.inform('completeFetch',{response:w,stats:z});};v.prototype.respond=function(w,x,y){"use strict";this.inform('respondValidUids',x);this.inform('reorderResults',x);var z=this.buildData(x,w);z.forEach(function(aa,ba){aa.origIndex=ba;aa.fromCache=!y;});this.inform('respond',{value:w,results:z,isAsync:!!y});return z;};v.prototype.buildData=function(w,x){"use strict";if(!w||w.length===0)return [];var y=w.map(this.getEntry,this);y.length=Math.min(y.length,this._maxResults);return y;};v.prototype.fetchLean=function(){"use strict";this._fetchLean();};v.prototype._isQueryTooShort=function(w){"use strict";return w.length<this._minQueryLength&&!o.hasIdeoOrSyll(w);};v.prototype.shouldFetchMoreResults=function(w){"use strict";return w.length<this._maxResults;};v.prototype._bootstrapPostProcess=function(){"use strict";var w={time:Date.now()};this.inform('bootstrapped',w,h.BEHAVIOR_PERSISTENT);this._processLean();};v.prototype._processLean=function(){"use strict";if(this._leanPayload){var w,x=this._leanPayload.entries;for(var y in x){w=this.getEntry(y);w&&(w.index=x[y]);}this.setExclusions(this._leanPayload.blocked);this._leanPayload=null;}};v.prototype._updateMaxResults=function(){"use strict";var w=window.innerHeight||document.documentElement.clientHeight;this.setMaxResults(Math.max(this._numResults.min,Math.min(this._numResults.max,Math.ceil(2+((w-370)/56)))));};v.prototype._bootstrapFetch=function(w,x){"use strict";var y=Object.assign({},x,this.bootstrapData);if(this._criticalOnly&&this._lazyonload)y.lazy=1;this.fetch(this.bootstrapEndpoint,y,{bootstrap:true,type:w});++this._bootstrapRequestsPending;};v.prototype._fetchOnUse=function(w,x){"use strict";for(var y in this.bootstrapData)!w.hasOwnProperty(y)&&(w[y]=this.bootstrapData[y]);if(this._criticalOnly){this._fetchOnUseRequests.push({args:w,ctx:x});}else this.fetch(this.bootstrapEndpoint,w,x);};v.prototype._fetchLean=function(){"use strict";var w={no_cache:1};w.options=l(w.options);w.options.push('lean');this._fetchOnUse(w,{type:'lean'});};v.prototype.bootstrap=function(w){"use strict";if(!w){this._criticalOnly=false;this._flushFetchOnUseRequests();}if(this._bootstrapped)return;var x={filter:['event'],no_cache:1};this._fetchOnUse(x,{type:'event'});var y=['app','page','group','friendlist'];y=y.concat(this._extraTypes||[]);if(this._noMultiFetch){y.push('user');this._bootstrapFetch('user',{filter:y});}else{this._bootstrapFetch('other',{filter:y});if(this._buckets){for(var z=0;z<this._buckets.length;++z){var aa={filter:['user'],buckets:this._buckets[z]};this._bootstrapFetch('user',aa);}}else this._bootstrapFetch('user',{filter:['user']});}this._fetchLean();this._bootstrapped=true;};v.prototype.getBootstrapError=function(){"use strict";return this._bootstrapError;};v.prototype._flushFetchOnUseRequests=function(){"use strict";var w=this._fetchOnUseRequests.length;for(var x=0;x<w;++x){var y=this._fetchOnUseRequests[x];this.fetch(this.bootstrapEndpoint,y.args,y.ctx);}if(w>0)this.inform('extra_bootstrap',{time:Date.now()},h.BEHAVIOR_PERSISTENT);this._fetchOnUseRequests=[];};v.prototype.onLoad=function(w,x){"use strict";this.inform('onload',{time:Date.now()},h.BEHAVIOR_PERSISTENT);if(w)setTimeout(this.bootstrap.bind(this,x),0);};v.prototype.mergeUids=function(w,x,y,z){"use strict";var aa=this.getDynamicHashtagResult(z);if(z&&aa&&x.indexOf(aa)<=0)x.unshift(aa);var ba=y[0]?this.getEntry(y[0]):null,ca=x[0]?this.getEntry(x[0]):null,da=(ba&&ba.replace_results)?ba:null;da=(!da&&ca&&ca.replace_results)?ca:da;var ea=u.mergeUids.call(this,w,x,y,z);if(da){this.inform('backend_topreplace',{});return this.deduplicateByKey([da.uid].concat(ea));}return ea;};v.prototype.getTextToIndexFromFields=function(w,x){"use strict";var y=[],z=w.tokenVersion==="v2";for(var aa=0;aa<x.length;++aa){if(z&&(x[aa]==="text"||x[aa]==="alias"))continue;var ba=w[x[aa]];if(ba)y.push(ba.join?ba.join(' '):ba);}return y.join(' ');};v.prototype.getDynamicHashtagResult=function(w){"use strict";if(!w||!this._enabledHashtag)return;var x=k.getHashtagFromQuery(w);if(!x)return;var y='hashtag:'+x,z=this.getEntry(y);if(!z)this.processEntries([k.makeTypeaheadResult(x)],w);return y;};e.exports=v;},null);
__d("legacy:SearchDataSource",["SearchDataSource"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();a.SearchDataSource=b('SearchDataSource');},3);
__d("SearchTypeaheadCore",["Arbiter","DOM","Event","Input","Keys","Parent","ScriptPath","TypeaheadCore"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();for(var o in n)if(n.hasOwnProperty(o))q[o]=n[o];var p=n===null?null:n.prototype;q.prototype=Object.create(p);q.prototype.constructor=q;q.__superConstructor__=n;function q(r){"use strict";n.call(this,r);}q.prototype.init=function(r,s,t){"use strict";p.init.call(this,r,s,t);var u=l.byTag(t,'form'),v=this.reset.bind(this);g.subscribe('pre_page_transition',function(event,x){var y=/^\/search/,z=y.test(x.from.path),aa=y.test(x.to.path);if(z&&!aa)setTimeout(v,0);});if(u){var w=h.find(u,'input.search_sid_input');i.listen(u,'submit',function(){if(this.data&&this.data.queryData)w.value=this.data.queryData.sid;setTimeout(v,0);}.bind(this),i.Priority.URGENT);}};q.prototype.select=function(){"use strict";this.reset();this.element.focus();setTimeout((function(){this.element.blur();}).bind(this),0);m.setClickPointInfo({click:'Search'});};q.prototype.handleTab=function(event){"use strict";var r=this.view.getQuerySuggestion(this.value);if(r){j.setValue(this.element,r);this.checkValue();event.kill();}else p.handleTab.call(this,event);};q.prototype.getSearchType=function(){"use strict";return 'regular';};q.prototype.focus=function(){"use strict";p.focus.call(this);if(this.getValue().length===0||this.element.getAttribute('singlestate')==='true')this.data.fetchNullState(this.getValue());};q.prototype.keyup=function(event){"use strict";if(this.getValue().length===0&&i.getKeyCode(event)===k.ESC)return;if(this.getValue().length===0)this.data.fetchNullState(this.getValue());this.element.setAttribute('singlestate',false);};e.exports=q;},null);
__d("legacy:SearchTypeaheadCore",["SearchTypeaheadCore"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();a.SearchTypeaheadCore=b('SearchTypeaheadCore');},3);
__d("SearchPeopleSeeMore",["TokenizeUtil","URI","fbt","invariant"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();function k(l,m){"use strict";var n=m.placement,o=m.strategy,p=m.min_users,q=m.query_to_show;this.seeMoreUri=l;this.placement=n;this.strategy=o;this.min_users=p;this.query_to_show=q;}k.prototype.injectInto=function(l,m){"use strict";if(!l||l.length===0)return;var n=this.$SearchPeopleSeeMore0(l,m);if(!n)return;var o=this.createFindAllPeopleResult(n);this.$SearchPeopleSeeMore1(o,l);};k.prototype.$SearchPeopleSeeMore0=function(l,m){"use strict";if(this.strategy==='disabled')return null;if(l[0].type!=='user')return null;var n=l.filter(function(r){return r.type==='user';});if(n.length<this.min_users){return null;}else if(n.length>this.min_users)n=n.slice(0,this.min_users);var o,p=n[0];switch(this.strategy){case 'all_identical':var q=n.every(function(r){return this.$SearchPeopleSeeMore2(p.text,r.text);}.bind(this));o=q?p.text:null;break;case 'top_results_prefix':o=n.reduce(function(r,s){return this.$SearchPeopleSeeMore3(r,s.text);}.bind(this),p.text);break;default:j(false);}if(!o)return null;return this.query_to_show==='common'?o:m;};k.prototype.$SearchPeopleSeeMore1=function(l,m){"use strict";if(this.placement==='last'){var n=m.filter(function(p){return p.type==='user';}).length;m.splice(n,0,l);}else{var o=parseInt(this.placement,10);m.splice(o,0,l);}};k.prototype.createFindAllPeopleResult=function(l){"use strict";var m=i._("Alle Personen mit dem Namen \u201e{query}\u201c finden",[i.param("query",l.toLowerCase())]),n=new h(this.seeMoreUri).addQueryData({q:l,init:'psm'}).toString();return {uid:'people_search',type:'user',text:m,classNames:'seeAllUser',photo:'/images/search_typeahead/people_see_more.png',path:n};};k.prototype.$SearchPeopleSeeMore2=function(l,m){"use strict";if(l===m)return true;var n=g.tokenize(l),o=g.tokenize(m);if(n.length!==o.length)return false;return n.every(function(p,q){return p===o[q];});};k.prototype.$SearchPeopleSeeMore3=function(l,m){"use strict";if(!l||!m)return;if(l===m)return l;var n=g.tokenize(l),o=g.tokenize(m),p=[];for(var q=0;q<n.length&&q<o.length;q++)if(n[q]===o[q]){p.push(n[q]);}else break;if(p.length===0)return null;return p.join(' ');};e.exports=k;},null);
__d("SearchPeopleFriendsOf",["TokenizeUtil","URI","fbt"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(k,l){"use strict";this.friendsOfUri=k;this.placementStrategy=l.placement_strategy;this.placementParams=l.placement_params;this.triggerStrategy=l.trigger_strategy;this.triggerParams=l.trigger_params;}j.prototype.injectInto=function(k,l){"use strict";if(!k||k.length===0||!this.$SearchPeopleFriendsOf0(k,l))return;if(k[0].type!=="user")return;var m=this.createFindAllFriendsOf(k[0].text,k[0].uid);this.$SearchPeopleFriendsOf1(m,k);};j.prototype.$SearchPeopleFriendsOf1=function(k,l){"use strict";var m=this.$SearchPeopleFriendsOf2(l);if(m==='last'){var n=l.filter(function(o){return o.type==='user';}).length;m=n;}l.splice(m,0,k);};j.prototype.$SearchPeopleFriendsOf0=function(k,l){"use strict";var m=this.$SearchPeopleFriendsOf3(this.triggerStrategy);return m(k,this.triggerParams,l);};j.prototype.$SearchPeopleFriendsOf2=function(k){"use strict";var l=this.$SearchPeopleFriendsOf3(this.placementStrategy);return l(k,this.placementParams);};j.prototype.$SearchPeopleFriendsOf3=function(k){"use strict";return this["$SearchPeopleFriendsOf_"+k];};j.prototype.$SearchPeopleFriendsOf4=function(k,l,m){"use strict";return false;};j.prototype.$SearchPeopleFriendsOf5=function(k,l,m){"use strict";return true;};j.prototype.$SearchPeopleFriendsOf6=function(k,l,m){"use strict";var n=parseInt(l,10),o=0;for(var p=0;p<k.length;p++){var q=k[p];if(q.type==='user'&&q.index_rank==-1)o++;if(o>n)return false;}return true;};j.prototype.$SearchPeopleFriendsOf7=function(k,l,m){"use strict";var n=parseInt(l,10),o=g.tokenize(m);o=o.map(function(w){return w.toLowerCase();});var p=0;for(var q=0;q<k.length;q++){var r=k[q];if(r.type!=='user'||r.index_rank!=-1)continue;var s=g.tokenize(r.text);s=s.map(function(w){return w.toLowerCase();});if(s.length<o.length)continue;var t=true;for(var u=0;u<o.length-1;u++)if(o[u]!==s[u]){t=false;break;}var v=o.length-1;if(t&&s[v].startsWith(o[v])){p++;if(p>=n)return false;}}return true;};j.prototype.$SearchPeopleFriendsOf8=function(k,l){"use strict";return "last";};j.prototype.$SearchPeopleFriendsOf9=function(k,l){"use strict";return 1;};j.prototype.createFindAllFriendsOf=function(k,l){"use strict";var m=i._("{name}s Freunde",[i.param("name",k)]),n=new h(this.friendsOfUri).addQueryData({q:"",init:'psm',fofid:l}).toString();return {uid:'people_search',type:'user',text:m,classNames:'seeAllUser',photo:'/images/search_typeahead/people_see_more.png',logType:'grammar',path:n};};e.exports=j;},null);
__d("SearchTypeaheadView",["Arbiter","ContextualLayerUpdateOnScroll","ContextualTypeaheadView","DOM","goURI","MusicConstants","MusicEvents","SearchPeopleSeeMore","SearchPeopleSeeMoreOptions","SearchPeopleFriendsOf","SearchPeopleFriendsOfOptions","URI","fbt","isEmail"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();for(var u in i)if(i.hasOwnProperty(u))w[u]=i[u];var v=i===null?null:i.prototype;w.prototype=Object.create(v);w.prototype.constructor=w;w.__superConstructor__=i;function w(y,z){"use strict";i.call(this,y,z);this._peopleSeeMore=new n(this.getSeeMoreEndpoint('',true),o);this._peopleFriendsOf=new p(this.getSeeMoreEndpoint('',true),q);}w.prototype.initializeLayer=function(){"use strict";v.initializeLayer.call(this);this.layer.setOffsetY(-1);this.layer.enableBehavior(h);};w.prototype.ignoreClick=function(event){"use strict";event.prevent();};w.prototype.render=function(y,z,aa){"use strict";if(!z)return;if(this._bucketize)z=x(z);if(this.showPeopleSeeMore&&y)this._peopleSeeMore.injectInto(z,y);if(this.showPeopleFriendsOf&&y)this._peopleFriendsOf.injectInto(z,y);var ba={results:z,value:y};this.inform('finalResultsReordering',ba);return v.render.call(this,y,ba.results,aa);};w.prototype.disableBucketization=function(){"use strict";this._bucketize=false;};w.prototype.buildBuckets=function(y,z){"use strict";var aa=z.length,ba=0,ca;for(ca=0;ca<aa;++ca)if(z[ca].type=='user')ba++;this._redirectToUsersResultsPage=this.showFilterResults&&ba===aa;this.setWebSuggLoggingParams(y,z);if(!y&&this.showFindPeople)z.unshift(this.buildFindPeople());if(this._bucketize)z=v.buildBuckets.call(this,y,z);if(y&&this._shouldShowSeeMore){z.push(this.buildSeeMore(y,aa));if(t(y)&&(ba<1))z.push(this.buildInvite(y));}return z;};w.prototype.buildFindPeople=function(){"use strict";var y=s._("Personen finden");return {classNames:'seeAllUser seeAllUserNullState',logType:'grammar',path:this.getSeeMoreEndpoint(null,true),photo:'/images/search_typeahead/people_see_more.png',text:y,type:'no_header'};};w.prototype.buildSeeMore=function(y,z){"use strict";var aa=this.getSeeMoreText(y,z),ba=this.getSeeMoreSubtext(z),ca=j.create('li',{className:'calltoaction'},[j.create('a',{href:this.getSeeMoreEndpoint(y),rel:'ignore'},[j.create('span',{className:'text'},[j.create('span',{className:'seeMore'},[aa,j.create('span',{className:'arrow'})]),j.create('span',{className:'subtext'},[ba])])])]);ca.setAttribute('aria-label',aa);return {uid:'search',node:ca,search:true};};w.prototype.getSeeMoreText=function(y,z){"use strict";if(this.showKeywordResultsPage)return s._("Suche nach \u201e{query}\u201c",[s.param("query",y)]);if(z<=0)return s._("Ergebnisse f\u00fcr \u201e{query}\u201c anzeigen",[s.param("query",y)]);if(this._redirectToUsersResultsPage)return s._("Ergebnisse f\u00fcr {query} filtern",[s.param("query",y)]);return s._("Weitere Ergebnisse f\u00fcr \u201e{query}\u201c anzeigen",[s.param("query",y)]);};w.prototype.getSeeMoreSubtext=function(y){"use strict";if(y===0)return s._("Keine Ergebnisse vorhanden");if(y===1)return s._("Das beste Ergebnis wird angezeigt");return s._({"*":"Die besten {number} Ergebnisse werden angezeigt"},[s.param("number",y,[0])]);};w.prototype.buildInvite=function(y){"use strict";var z=s._("{query} zu Facebook einladen",[s.param("query",y)]),aa=j.create('li',{className:'calltoaction'},[j.create('a',{href:this.getInviteEndpoint(y),rel:'ignore'},[j.create('span',{className:'text'},[j.create('span',{className:'invite'},[z])])])]);aa.setAttribute('aria-label',z);return {uid:'invite',node:aa,search:true};};w.prototype.searchPageQueryData=function(y){"use strict";return Object.assign({q:y},(this.queryData||{}));};w.prototype.searchPageTypeData=function(y){"use strict";return this._redirectToUsersResultsPage||y?{type:"users"}:{};};w.prototype.select=function(y){"use strict";var z=this.index,aa=this.results[z];if(!aa||aa.type=='header')return;var ba=this.items[z],ca=j.scry(ba,'a')[0];if(aa.song){if(ca)m.inform(l.MUSIC_BUTTON.ACTIVATE,ca);y&&this.inform('highlight',{index:z,selected:aa});}else{v.select.call(this,y);if(ca&&ca.href)if(ca.target=='_blank'){window.open(ca.href);}else k(ca.href);}};w.prototype.setSid=function(y){"use strict";this.queryData.tas=y;};w.prototype.getSeeMoreEndpoint=function(y,z){"use strict";return new r(this.seeMoreEndpoint).addQueryData(this.searchPageQueryData(y)).addQueryData(this.searchPageTypeData(z)).toString();};w.prototype.getInviteEndpoint=function(y){"use strict";return new r('/invite.php').addQueryData({email_list:y});};w.prototype.show=function(){"use strict";if(!this.isVisible()){g.inform('layer_shown',{type:'SearchTypeahead'});v.show.call(this);}};w.prototype.hide=function(){"use strict";if(this.isVisible()){g.inform('layer_hidden',{type:'SearchTypeahead'});v.hide.call(this);}};w.prototype.getQuerySuggestion=function(y){"use strict";var z=this.results[this.index],aa=z&&z.type!='header'?z.text.toLowerCase():'';return aa==y.toLowerCase()?'':aa;};w.prototype.setWebSuggLoggingParams=function(y,z){"use strict";var aa=0,ba=0;for(var ca=0;ca<z.length;ca++)if(z[ca].type==='websuggestion'){if(ba===0)ba=ca+1;var da='FR'+(ca-aa)+'AS'+aa,ea=ca+1;z[ca].path+='&wssk='+da+'&wssp='+ea+'&wspq='+encodeURIComponent(y);z[ca].path+='&wssrc='+z[ca].websuggestion_source;aa++;}var fa='&wssc='+z.length+'-'+y.length+'&wsbp='+aa+'-'+ba;for(ca=0;ca<z.length;ca++)if(z[ca].type==='websuggestion')z[ca].path+=fa;};function x(y){var z,aa,ba,ca,da=[],ea={};aa=y.length;for(z=0;z<aa;z++){ba=y[z];ca=ba.render_type||ba.type;if(!ea.hasOwnProperty(ca)){ea[ca]=da.length;da.push([]);}da[ea[ca]].push(ba);}var fa=[];aa=da.length;for(z=0;z<aa;++z){ba=da[z][0];ca=ba.render_type||ba.type;fa=fa.concat(da[z]);}return fa;}Object.assign(w.prototype,{_shouldShowSeeMore:true,_bucketize:true,queryData:{init:'quick'}});e.exports=w;},null);
__d("legacy:SearchTypeaheadView",["SearchTypeaheadView"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();a.SearchTypeaheadView=b('SearchTypeaheadView');},3);
__d("legacy:Typeahead",["Typeahead"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();a.Typeahead=b('Typeahead');},3);
__d("SearchTypeaheadRecorder",["AsyncRequest","Banzai","BanzaiNectar","BanzaiScuba","CurrentUser","Event","FacebarGlobalOptions","Keys","TokenizeUtil","Vector","clickRefAction","mapObject","ge","throttle","whitelistObjectKeys"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();var v={WAITING:'WAITING',SUCCESS:'SUCCESS',NO_RESULTS:'NO_RESULTS',ERROR:'ERROR'};function w(y){"use strict";this.init(y);this.initEvents();}w.prototype.init=function(y){"use strict";this.core=y.getCore();this.data=y.getData();this.view=y.getView();this.element=this.core.getElement();this.initTime=Date.now();this._onloadTime=0;this._extraRecorder=[];this.performanceTimings={};var z=s('search_first_focus');this.initStartTime=z&&z.value;this.bootstrapStats={bootstrapped:0};this.type="legacy_search";this._reset();};w.prototype._reset=function(){"use strict";this.stats={};this.avgStats={};this.appendStats={};this._backspacing=false;this.backendQueries=[];this.backendQueriesStatus={};this._topreplace=false;this._inflightRequests={};var y=Math.random().toString();this.data.setQueryData({sid:y});this.view.setSid(y);this.recordStat('sid',y);this.recordStat('keypressed',0);};w.prototype.initEvents=function(){"use strict";this.core.subscribe('focus',function(event){if(!this.stats.session_start_time){this.recordStat('session_start_time',Date.now());var y=new Date(),z=y.getTimezoneOffset(),aa=Date.now()-z*60*1000;this.recordStat('session_start_time_user_timezone',aa);}}.bind(this));this.core.subscribe('blur',function(event){var y=Date.now();for(var z in this._inflightRequests){var aa=this._inflightRequests[z],ba=y-aa;this.recordAvgStat('search_endpoint_ms_from_js',ba);}this.recordStat('session_end_time',y);this.submit();}.bind(this));this.view.subscribe('select',function(y,z){this.recordSelectInfo(z);}.bind(this));this.view.subscribe('render',function(y,z){this.recordRender(z);}.bind(this));this.data.subscribe('logPerformanceTiming',function(y,z){this.performanceTimings[z.field]=z.value;}.bind(this));this.data.subscribe('activity',function(y,z){this.recordStat('pending_request',z.activity);}.bind(this));this.data.subscribe('respondValidUids',function(y,z){this.validUids=z.slice(0);}.bind(this));this.data.subscribe('beforeQuery',function(y,z){if(!z.value){this.query='';this.results=[];this.data.lastNullOrSingleStateFetchStartTime=Date.now();return;}if(!this.stats.first_query_time)this.recordStat('first_query_time',Date.now());this.query=z.value;if(!this.queryStartTime)this.queryStartTime=[];this.queryStartTime[this.query]=Date.now();this.recordCountStat('num_queries');}.bind(this));this.data.subscribe('queryEndpoint',function(y,z){this.recordCountStat('num_search_ajax_requests');this.recordAvgStat('endpoint_query_length',z.value.length);this._inflightRequests[z.value]=Date.now();}.bind(this));this.data.subscribe('onload',function(y,z){this._onloadTime=z.time;}.bind(this));this.data.subscribe('bootstrapped',function(y,z){this.bootstrapStats.endTime=z.time;this.bootstrapStats.bootstrapped=1;}.bind(this));this.core.subscribe('recordFunction',function(y,z){this._extraRecorder.push(z);}.bind(this));this.data.subscribe('endpointStats',function(y,z){var aa=z.info,ba=aa.fetch_end-aa.fetch_start;if(aa.value){this.recordAvgStat('search_endpoint_ms_from_js',ba);}else this.bootstrapStats[aa.type]=ba;if(aa.coeff2_ts)this.bootstrapStats.coeff2_ts=aa.coeff2_ts;if(typeof aa.browserCacheHit!='undefined')this.recordCountStat(aa.browserCacheHit?'bootstrap_cachehits':'bootstrap_cachemisses');if(this._inflightRequests[aa.value])delete this._inflightRequests[aa.value];}.bind(this));this.data.subscribe('fetchComplete',function(y,z){var aa=z.entries,ba=z.value;if(ba&&this.backendQueriesStatus[ba]){this._addDurationForBackendQuery(this.backendQueriesStatus[ba]);this.backendQueriesStatus[ba].status=aa&&aa.length>0?v.SUCCESS:v.NO_RESULTS;}}.bind(this));this.data.subscribe('fetchError',function(y,z){var aa=z.fetch_context,ba=aa.value;if(aa.bootstrap||!ba)return;if(this.backendQueriesStatus[ba]){this.backendQueriesStatus[ba].status=v.ERROR;this._addDurationForBackendQuery(this.backendQueriesStatus[ba]);}}.bind(this));this.data.subscribe('query',function(y,z){this.recordAvgStat('num_results_from_cache',z.results.length);}.bind(this));this.data.subscribe('backend_topreplace',function(y,z){if(false===this._topreplace){this.recordStat("backend_topreplace",1);this._topreplace=true;}}.bind(this));this.data.subscribe('completeFetch',function(y,z){if(this.core.scubaInfo){var aa=z.response,ba={recv:z.stats.fetch_end-z.stats.fetch_start,render:Date.now()-z.stats.fetch_start,payload_size:JSON.stringify(aa).length};if(!aa.payload.entities)aa.payload.entities=this.buildResults();this.logToScuba(aa,ba,this.core.scubaInfo,this.query,this.type);}}.bind(this));this.data.subscribe('completeCacheFetch',t(function(y,z){if(this.core.scubaInfo)this.logToScuba({},{},this.core.scubaInfo,this.query,this.type);}.bind(this),500));l.listen(this.element,'keydown',function(event){this.recordStat('keypressed',1);this.recordCountStat('count_keys_pressed');if(l.getKeyCode(event)==n.BACKSPACE){if(!this._backspacing&&this.query){this._backspacing=true;this.recordAppendStat('before_backspace_queries',this.query);}}else this._backspacing=false;}.bind(this));this.data.subscribe('beforeFetch',function(y,z){var aa=z.request.data.value;if(!aa)return;this.backendQueries.push(aa);this.backendQueriesStatus[aa]={status:v.WAITING,start_time:Date.now()};}.bind(this));};w.prototype.recordStat=function(y,z){"use strict";this.stats[y]=z;};w.prototype.recordCountStat=function(y){"use strict";var z=this.stats[y];this.stats[y]=z?z+1:1;};w.prototype.recordAvgStat=function(y,z){"use strict";if(this.avgStats[y]){this.avgStats[y][0]+=z;++this.avgStats[y][1];}else this.avgStats[y]=[z,1];};w.prototype.recordAppendStat=function(y,z){"use strict";if(!this.appendStats.hasOwnProperty(y))this.appendStats[y]=[];this.appendStats[y].push(z);};w.prototype.recordRender=function(y){"use strict";this.results=y.filter(function(ha){return (ha.uid!='search'&&ha.type!='disabled_result'&&ha.type!='header');}).map(function(ha){return Object.assign({},ha);});var z=null;if(this.queryStartTime)z=this.queryStartTime[this.query];var aa=this.results.every(function(ha){return ha.fromCache;}),ba=this.results.every(function(ha){return ha.isFromGSEF||ha.fromCache;}),ca=this.results.every(function(ha){return ha.isNullState;}),da=this.results.every(function(ha){return ha.isSingleState;}),ea=this.results.every(function(ha){return ha.exactMatchKeyword;});if(this.results.length&&this.data.lastNullOrSingleStateFetchStartTime&&ca){this.recordStat('time_render_null_state',Date.now()-this.data.lastNullOrSingleStateFetchStartTime);this.data.lastNullOrSingleStateFetchStartTime=null;}else if(this.data.lastNullOrSingleStateFetchStartTime&&this.results.length&&da){this.recordStat('time_render_single_state',Date.now()-this.data.lastNullOrSingleStateFetchStartTime);this.data.lastNullOrSingleStateFetchStartTime=null;}else if(z){var fa=Date.now()-z;if(ea){this.recordAppendStat('times_render_gs_echo',fa);}else this.recordAppendStat(aa?'times_render_local':'times_render_remote',fa);if(!aa&&ba)this.recordAppendStat('time_render_gs_early_fetch',fa);}var ga=p.getViewportDimensions();this.recordStat('window_size_width',ga.x);this.recordStat('window_size_height',ga.y);if(this.results.length>0&&!this.stats.first_result_time)this.recordStat('first_result_time',Date.now());};w.prototype.recordSelectInfo=function(y){"use strict";var z=y.selected,aa=y.index;if(z.groupIndex!==(void 0))aa=y.index-z.groupIndex-1;var ba={href:z.path},ca=z.dataGT?{gt:JSON.parse(z.dataGT)}:{};q('click',ba,null,null,ca);if(z.uid=='search'||z.uid=='people_search'){this.recordStat('selected_search',1);}else if(z.uid=='invite'){this.recordStat('selected_invite',1);}else{var da=z.log_type||z.rankType||z.render_type||z.type,ea=(da=='friend'?'user':da);this.recordStat('selected_'+ea,1);this.recordStat('selected_position',aa);this.recordStat('selected_type',da);this.recordStat('selected_name_length',z.text.length);this.recordStat('selected_id',z.uid);this.recordStat('selected_degree',z.bootstrapped?1:2);this.recordStat('selected_recent_search',z.recent_search);var fa=o.parse(this.data.getTextToIndex(z)).tokens,ga=x(fa,this.query);if(ga)this.recordStat('matched_terms',ga);}var ha={};this._extraRecorder.forEach(function(ia){ia(y,this.results,ha);}.bind(this));this.recordStat('extra_select_info',JSON.stringify(ha));if(z.type==='websuggestion'){this.recordStat('selected_memcached_websuggestion',z.fromMemcache);this.recordStat('selected_websuggestion_source',z.websuggestion_source);}this.recordStat('selected_with_mouse',y.clicked?1:0);};w.prototype._addDurationForBackendQuery=function(y){"use strict";if(y.start_time){y.duration=Date.now()-y.start_time;delete y.start_time;}};w.prototype._dataToSubmit=function(){"use strict";this.recordStat('candidate_results',this.buildResults());this.recordStat('query',this.query);this.recordStat('init_time',this.initTime);if(this.initStartTime){this.recordStat('init_start_time',this.initStartTime);this.recordStat('onload_time',this._onloadTime);this.initStartTime=0;}this.recordStat('bootstrapped',this.bootstrapStats.bootstrapped);if(this.bootstrapStats.endTime){this.recordStat('bootstrapped_time',this.bootstrapStats.endTime);this.recordStat('user_bootstrap_ms',this.bootstrapStats.user);this.recordStat('other_bootstrap_ms',this.bootstrapStats.other);this.bootstrapStats.endTime=0;}var y=this.data.getBootstrapError();if(y)this.recordStat('bootstrap_error',1);this.recordStat('coeff2_ts',this.bootstrapStats.coeff2_ts);this.recordStat('max_results',this.data._maxResults);if(this.backendQueries.length>0){if(this.backendQueries.length>this.data.logBackendQueriesWindow)this.backendQueries=this.backendQueries.slice(this.backendQueries.length-this.data.logBackendQueriesWindow);this.recordStat('backend_queries',this.backendQueries);var z=u(this.backendQueriesStatus,this.backendQueries);r(z,this._addDurationForBackendQuery,this);this.recordStat('backend_queries_status',z);}if(m.taSessionLoggingSample){var aa=[];this.results.forEach(function(fa){aa.push([fa.text||'',fa.category||'',fa.subtext||'']);});this.recordStat('raw_suggestions_text',aa);}var ba=this.stats;for(var ca in this.avgStats){var da=this.avgStats[ca];ba[ca]=da[0]/da[1];}for(var ea in this.appendStats)ba[ea]=JSON.stringify(this.appendStats[ea]);return ba;};w.prototype.buildResults=function(){"use strict";var y=(this.results||[]).map(function(z,aa){var ba=o.parse(this.data.getTextToIndex(z)).tokens,ca=z.rankType||z.render_type||z.type,da=z.bootstrapped?1:0,ea=z.s_token||'',fa=(typeof z.index=='undefined')?100:z.index,ga=x(ba,this.query)||this.query,ha=z,ia=ha.index_rank,ja=ha.match_type,ka=ha.l_type,la=ha.vertical_type,ma=ha.prefix_match,na=ha.prefix_length,oa=ha.text,pa=ha.category,qa=ha.subtext,ra=ha.fromCache,sa=ha.isNullState,ta=ha.isSingleState;if(typeof z.groupIndex=='number')return [z.groupIndex,z.indexInGroup,z.uid,ca,da,ea,ga,ia,ja,ma,na,z.origIndex,ka,la,oa,pa,qa,fa,ra,sa,ta];return [0,aa,z.uid,ca,da,ea,ga,ia,ja,ma,na,z.origIndex,ka,la,oa,pa,qa,fa,ra,sa,ta];}.bind(this));return JSON.stringify(y);};w.prototype.submit=function(){"use strict";var y=this._dataToSubmit();switch(this.data.recordingRoute){case 'banzai_vital':h.post(this._banzaiRoute,y,{delay:0,retry:true});break;default:this.submitThroughAsyncRequest(y);}this._reset();};w.prototype.addLatencyToSample=function(y,z,aa,ba){"use strict";y.addInteger(ba+'query_start',aa.queryStart);y.addInteger(ba+'query_end',aa.queryEnd);y.addInteger(ba+'keypress_query_end',aa.keyPressToQueryEnd);y.addInteger(ba+'render',aa.render);y.addInteger(ba+'keypress_render',aa.keyPressToRender);z[ba+'query_start']=aa.queryStart;z[ba+'query_end']=aa.queryEnd;z[ba+'keypress_query_end']=aa.keyPressToQueryEnd;z[ba+'render']=aa.render;z[ba+'keypress_render']=aa.keyPressToRender;};w.prototype.logToScuba=function(y,z,aa,ba,ca){"use strict";var da={},ea=new j('search_facebar_js',null,{addBrowserFields:true,addPredictedGeographyFields:true,addUser:true,addSearchVersion:true,addGatekeepers:{facebarGKs:true}});ea.addInteger('sample_rate',aa.sample_rate);da.sample_rate=aa.sample_rate;ea.addNormal('site',aa.site);da.site=aa.site;ea.addDenorm('query',ba);da.query=ba;var fa=y.payload||{};if(fa.entities){ea.addInteger('num_entities',fa.entities.length);da.num_entities=fa.entities.length;}Object.keys(this.performanceTimings).forEach(function(ha){ea.addInteger(ha,this.performanceTimings[ha]);da[ha]=this.performanceTimings[ha];}.bind(this),this);if(fa.results||fa.entries){var ga=(fa.results||fa.entries).length;ea.addInteger('num_results',ga);da.num_results=ga;}if(fa.gzipped_payload_size!==(void 0)){ea.addInteger('gzipped_payload_size',fa.gzipped_payload_size);da.gzipped_payload_size=fa.gzipped_payload_size;}if(z.recv&&z.render>z.recv){ea.addInteger('time_render',z.render-z.recv);da.time_render=z.render-z.recv;ea.addInteger('time_js_async',z.recv);da.time_js_async=z.recv;}if(z.payload_size){ea.addInteger('payload_size',z.payload_size);da.payload_size=z.payload_size;}if(this.stats.time_render_null_state&&(!ba||ba.length===0)){ea.addInteger('time_render_null_state',this.stats.time_render_null_state);da.time_render_null_state=this.stats.time_render_null_state;}ea.addInteger('query_id',y.queryId);da.query_id=y.queryId;ea.addDenorm('user_id',k.getID());da.user_id=k.getID();ea.addDenorm('session_id',this.stats.sid);da.session_id=this.stats.sid;ea.addNormal('typeahead_type',ca);da.typeahead_type=ca;if(z.remoteQueryLatencies){this.addLatencyToSample(ea,da,z.remoteQueryLatencies,'remote_');ea.addInteger('remote_keypress_query_dispatch',z.remoteQueryLatencies.keyPressToQueryDispatch);da.remote_keypress_query_dispatch=z.remoteQueryLatencies.keyPressToQueryDispatch;ea.addInteger('remote_keypress_query_start',z.remoteQueryLatencies.keyPressToQueryStart);da.remote_keypress_query_start=z.remoteQueryLatencies.keyPressToQueryStart;ea.addNormal('inflight_requests',z.remoteQueryLatencies.inflightRequests);ea.addInteger('inflight_requests',z.remoteQueryLatencies.inflightRequests);da.inflight_requests=z.remoteQueryLatencies.inflightRequests;ea.addNormal('waiting_queries',z.remoteQueryLatencies.waitingQueries);ea.addInteger('waiting_queries',z.remoteQueryLatencies.waitingQueries);da.waiting_queries=z.remoteQueryLatencies.waitingQueries;}if(z.cacheQueryLatencies)this.addLatencyToSample(ea,da,z.cacheQueryLatencies,'cache_');ea.post();i.log('search_facebar_js','typeahead',da);};w.prototype.submitThroughAsyncRequest=function(y){"use strict";if(Object.keys(y).length>0)new g().setURI(this._endPoint).setMethod('POST').setData({stats:y}).setOption('handleErrorAfterUnload',true).setErrorHandler(function(z){y.retry=true;new g().setURI(this._endPoint).setMethod('POST').setData({stats:y}).setOption('asynchronous',false).send();}.bind(this)).send();};var x=function(y,z){if(!y||!z)return;var aa=o.parse(z);if(aa.flatValue[aa.flatValue.length-1]===' ')return aa.flatValue;var ba=aa.tokens[aa.tokens.length-1],ca={};y.forEach(function(ha){ca[ha]=(ca[ha]||0)+1;});var da={},ea=aa.tokens.slice(0,aa.tokens.length-1);ea.forEach(function(ha){da[ha]=(da[ha]||0)+1;});for(var fa=0;fa<y.length;++fa){var ga=y[fa];if(ga.indexOf(ba)===0&&(ca[ga]-(da[ga]||0)>0)){ea.push(ga);return ea.join(' ');}}return (void 0);};Object.assign(w.prototype,{_endPoint:'/ajax/typeahead/record_metrics.php',_banzaiRoute:'search'});e.exports=w;},null);
__d("TypeaheadSearchRecorderBasic",["SearchTypeaheadRecorder","emptyFunction"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(j){"use strict";this._typeahead=j;}i.prototype.enable=function(){"use strict";new g(this._typeahead);};Object.assign(i.prototype,{disable:h});e.exports=i;},null);
__d("legacy:SearchRecorderBasicTypeaheadBehavior",["TypeaheadSearchRecorderBasic"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();if(!a.TypeaheadBehaviors)a.TypeaheadBehaviors={};a.TypeaheadBehaviors.searchRecorderBasic=function(h){h.enableBehavior(g);};},3);
__d("legacy:SearchTypeaheadRenderer",["SearchTypeaheadRenderer"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();if(!a.TypeaheadRenderers)a.TypeaheadRenderers={};a.TypeaheadRenderers.search=b('SearchTypeaheadRenderer');},3);
void(0);
__d("XSearchFacebarSurveyController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/search\/facebar_survey\/",{id:{type:"String",required:true},query:{type:"String"},session_id:{type:"String",required:true}});},null);
__d("AbandonedSessionSurvey",["AsyncRequest","SubscriptionsHandler","XSearchFacebarSurveyController","getOrCreateDOMID"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();function k(l){"use strict";this.core=l.getCore();this.data=l.getData();this.view=l.getView();this.subscriptionsHandler=new h();}k.prototype.enable=function(){"use strict";this.subscriptionsHandler.addSubscriptions(this.core.subscribe('focus',function(){this.searchBoxFocused=true;this.resultSelected=false;}.bind(this)),this.data.subscribe('beforeQuery',function(l,m){this.query=m.value||'';}.bind(this)),this.view.subscribe('select',function(){this.resultSelected=true;}.bind(this)),this.core.subscribe('blur',function(){if(this.searchBoxFocused&&!this.resultSelected){this.resultSelected=false;this.searchBoxFocused=false;this.openSurvey();}}.bind(this)));};k.prototype.disable=function(){"use strict";this.subscriptionsHandler.release();this.request&&this.request.abort();};k.prototype.openSurvey=function(){"use strict";if(this.openedSurvey)return;this.openedSurvey=true;var l=i.getURIBuilder().setString('id',j(this.core.element)).setString('query',this.query||'').setString('session_id',this.data.queryData.sid);this.request=(new g()).setMethod('post').setURI(l.getURI());this.request.send();};e.exports=k;},null);
__d("TypeaheadSearchFilter",["Arbiter"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i){"use strict";this._typeahead=i;}h.prototype.enable=function(){"use strict";var i=this._typeahead,j=i.getView().seeMoreEndpoint;this._subscriptions=[g.subscribe('search/typeahead/updateFilter',function(k,l){if(l.filter_type=='web')i.getView().queryData.form='FBKBFR';i.getView().queryData.type=l.filter_type;}),g.subscribe('search/typeahead/updateSeeMoreEndpoint',function(k,l){i.getView().seeMoreEndpoint=l;}),g.subscribe('page_transition',function(k,l){if(i.getView().queryData.form)delete i.getView().queryData.form;delete i.getView().queryData.type;i.getView().seeMoreEndpoint=j;},g.SUBSCRIBE_NEW)];};h.prototype.disable=function(){"use strict";this._subscriptions.forEach(function(i){i.unsubscribe();});this._subscriptions=null;};Object.assign(h.prototype,{_subscription:null});e.exports=h;},null);
__d("legacy:SearchFilterTypeaheadBehavior",["TypeaheadSearchFilter"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();if(!a.TypeaheadBehaviors)a.TypeaheadBehaviors={};a.TypeaheadBehaviors.initFilters=function(h){h.enableBehavior(g);};},3);
__d("TypeaheadExcludeBootstrapFromQueryCache",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){"use strict";this._data=h.getData();}g.prototype.enable=function(){"use strict";this._buildingQueryCache=false;this._buildQueryCache=this._data.subscribe('buildQueryCache',function(){this._buildingQueryCache=true;}.bind(this));this._mergeUids=this._data.subscribe('mergeUids',function(h,i){if(this._buildingQueryCache)i.local_uids.splice(0,i.local_uids.length);}.bind(this));this._fetchComplete=this._data.subscribe('fetchComplete',function(){this._buildingQueryCache=false;}.bind(this));};g.prototype.disable=function(){"use strict";this._data.unsubscribe(this._buildQueryCache);this._data.unsubscribe(this._mergeUids);this._data.unsubscribe(this._fetchComplete);};e.exports=g;},null);
__d("TypeaheadRecentSearchUpdater",["Arbiter"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i){"use strict";this.view=i.getView();}h.prototype.enable=function(){"use strict";this.updaterSubscription=this.view.subscribe('select',function(){g.inform('search/refreshRecentSearchesNullstate',{},g.BEHAVIOR_STATE);});};h.prototype.disable=function(){"use strict";this.view.unsubscribe(this.updaterSubscription);};e.exports=h;},null);